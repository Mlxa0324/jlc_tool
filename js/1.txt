(window["@qianchuan-vmok/qianchuan-pc:1.0.1.7282"] = window["@qianchuan-vmok/qianchuan-pc:1.0.1.7282"] || []).push([[8734], {
    45941: function(e) {
        var t;
        "undefined" != typeof self && self,
        t = function() {
            return function(e) {
                var t = {};
                function r(n) {
                    if (t[n])
                        return t[n].exports;
                    var i = t[n] = {
                        i: n,
                        l: !1,
                        exports: {}
                    };
                    return e[n].call(i.exports, i, i.exports, r),
                    i.l = !0,
                    i.exports
                }
                return r.m = e,
                r.c = t,
                r.d = function(e, t, n) {
                    r.o(e, t) || Object.defineProperty(e, t, {
                        enumerable: !0,
                        get: n
                    })
                }
                ,
                r.r = function(e) {
                    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                        value: "Module"
                    }),
                    Object.defineProperty(e, "__esModule", {
                        value: !0
                    })
                }
                ,
                r.t = function(e, t) {
                    if (1 & t && (e = r(e)),
                    8 & t)
                        return e;
                    if (4 & t && "object" == typeof e && e && e.__esModule)
                        return e;
                    var n = Object.create(null);
                    if (r.r(n),
                    Object.defineProperty(n, "default", {
                        enumerable: !0,
                        value: e
                    }),
                    2 & t && "string" != typeof e)
                        for (var i in e)
                            r.d(n, i, function(t) {
                                return e[t]
                            }
                            .bind(null, i));
                    return n
                }
                ,
                r.n = function(e) {
                    var t = e && e.__esModule ? function() {
                        return e.default
                    }
                    : function() {
                        return e
                    }
                    ;
                    return r.d(t, "a", t),
                    t
                }
                ,
                r.o = function(e, t) {
                    return Object.prototype.hasOwnProperty.call(e, t)
                }
                ,
                r.p = "",
                r(r.s = 9)
            }([function(e, t, r) {
                "use strict";
                var n = "object" == typeof Reflect ? Reflect : null
                  , i = n && "function" == typeof n.apply ? n.apply : function(e, t, r) {
                    return Function.prototype.apply.call(e, t, r)
                }
                  , o = n && "function" == typeof n.ownKeys ? n.ownKeys : Object.getOwnPropertySymbols ? function(e) {
                    return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))
                }
                : function(e) {
                    return Object.getOwnPropertyNames(e)
                }
                  , s = Number.isNaN || function(e) {
                    return e != e
                }
                ;
                function a() {
                    a.init.call(this)
                }
                e.exports = a,
                e.exports.once = function(e, t) {
                    return new Promise((function(r, n) {
                        function i(r) {
                            e.removeListener(t, o),
                            n(r)
                        }
                        function o() {
                            "function" == typeof e.removeListener && e.removeListener("error", i),
                            r([].slice.call(arguments))
                        }
                        g(e, t, o, {
                            once: !0
                        }),
                        "error" !== t && function(e, t, r) {
                            "function" == typeof e.on && g(e, "error", t, r)
                        }(e, i, {
                            once: !0
                        })
                    }
                    ))
                }
                ,
                (a.EventEmitter = a).prototype._events = void 0,
                a.prototype._eventsCount = 0,
                a.prototype._maxListeners = void 0;
                var c = 10;
                function u(e) {
                    if ("function" != typeof e)
                        throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof e)
                }
                function f(e) {
                    return void 0 === e._maxListeners ? a.defaultMaxListeners : e._maxListeners
                }
                function l(e, t, r, n) {
                    var i, o;
                    return u(r),
                    void 0 === (i = e._events) ? (i = e._events = Object.create(null),
                    e._eventsCount = 0) : (void 0 !== i.newListener && (e.emit("newListener", t, r.listener || r),
                    i = e._events),
                    o = i[t]),
                    void 0 === o ? (o = i[t] = r,
                    ++e._eventsCount) : ("function" == typeof o ? o = i[t] = n ? [r, o] : [o, r] : n ? o.unshift(r) : o.push(r),
                    0 < (i = f(e)) && o.length > i && !o.warned && (o.warned = !0,
                    (n = new Error("Possible EventEmitter memory leak detected. " + o.length + " " + String(t) + " listeners added. Use emitter.setMaxListeners() to increase limit")).name = "MaxListenersExceededWarning",
                    n.emitter = e,
                    n.type = t,
                    n.count = o.length,
                    console && console.warn)),
                    e
                }
                function h(e, t, r) {
                    return t = function() {
                        if (!this.fired)
                            return this.target.removeListener(this.type, this.wrapFn),
                            this.fired = !0,
                            0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments)
                    }
                    .bind(e = {
                        fired: !1,
                        wrapFn: void 0,
                        target: e,
                        type: t,
                        listener: r
                    }),
                    t.listener = r,
                    e.wrapFn = t
                }
                function p(e, t, r) {
                    return void 0 === (e = e._events) || void 0 === (e = e[t]) ? [] : "function" == typeof e ? r ? [e.listener || e] : [e] : r ? function(e) {
                        for (var t = new Array(e.length), r = 0; r < t.length; ++r)
                            t[r] = e[r].listener || e[r];
                        return t
                    }(e) : y(e, e.length)
                }
                function d(e) {
                    var t = this._events;
                    if (void 0 !== t) {
                        if ("function" == typeof (t = t[e]))
                            return 1;
                        if (void 0 !== t)
                            return t.length
                    }
                    return 0
                }
                function y(e, t) {
                    for (var r = new Array(t), n = 0; n < t; ++n)
                        r[n] = e[n];
                    return r
                }
                function g(e, t, r, n) {
                    if ("function" == typeof e.on)
                        n.once ? e.once(t, r) : e.on(t, r);
                    else {
                        if ("function" != typeof e.addEventListener)
                            throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof e);
                        e.addEventListener(t, (function i(o) {
                            n.once && e.removeEventListener(t, i),
                            r(o)
                        }
                        ))
                    }
                }
                Object.defineProperty(a, "defaultMaxListeners", {
                    enumerable: !0,
                    get: function() {
                        return c
                    },
                    set: function(e) {
                        if ("number" != typeof e || e < 0 || s(e))
                            throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + e + ".");
                        c = e
                    }
                }),
                a.init = function() {
                    void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = Object.create(null),
                    this._eventsCount = 0),
                    this._maxListeners = this._maxListeners || void 0
                }
                ,
                a.prototype.setMaxListeners = function(e) {
                    if ("number" != typeof e || e < 0 || s(e))
                        throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + e + ".");
                    return this._maxListeners = e,
                    this
                }
                ,
                a.prototype.getMaxListeners = function() {
                    return f(this)
                }
                ,
                a.prototype.emit = function(e) {
                    for (var t = [], r = 1; r < arguments.length; r++)
                        t.push(arguments[r]);
                    var n = "error" === e
                      , o = this._events;
                    if (void 0 !== o)
                        n = n && void 0 === o.error;
                    else if (!n)
                        return !1;
                    if (n) {
                        if ((s = 0 < t.length ? t[0] : s)instanceof Error)
                            throw s;
                        throw (n = new Error("Unhandled error." + (s ? " (" + s.message + ")" : ""))).context = s,
                        n
                    }
                    var s = o[e];
                    if (void 0 === s)
                        return !1;
                    if ("function" == typeof s)
                        i(s, this, t);
                    else {
                        var a = s.length
                          , c = y(s, a);
                        for (r = 0; r < a; ++r)
                            i(c[r], this, t)
                    }
                    return !0
                }
                ,
                a.prototype.on = a.prototype.addListener = function(e, t) {
                    return l(this, e, t, !1)
                }
                ,
                a.prototype.prependListener = function(e, t) {
                    return l(this, e, t, !0)
                }
                ,
                a.prototype.once = function(e, t) {
                    return u(t),
                    this.on(e, h(this, e, t)),
                    this
                }
                ,
                a.prototype.prependOnceListener = function(e, t) {
                    return u(t),
                    this.prependListener(e, h(this, e, t)),
                    this
                }
                ,
                a.prototype.off = a.prototype.removeListener = function(e, t) {
                    var r, n, i, o, s;
                    if (u(t),
                    void 0 === (n = this._events))
                        return this;
                    if (void 0 === (r = n[e]))
                        return this;
                    if (r === t || r.listener === t)
                        0 == --this._eventsCount ? this._events = Object.create(null) : (delete n[e],
                        n.removeListener && this.emit("removeListener", e, r.listener || t));
                    else if ("function" != typeof r) {
                        for (i = -1,
                        o = r.length - 1; 0 <= o; o--)
                            if (r[o] === t || r[o].listener === t) {
                                s = r[o].listener,
                                i = o;
                                break
                            }
                        if (i < 0)
                            return this;
                        0 === i ? r.shift() : function(e, t) {
                            for (; t + 1 < e.length; t++)
                                e[t] = e[t + 1];
                            e.pop()
                        }(r, i),
                        1 === r.length && (n[e] = r[0]),
                        void 0 !== n.removeListener && this.emit("removeListener", e, s || t)
                    }
                    return this
                }
                ,
                a.prototype.removeAllListeners = function(e) {
                    var t, r = this._events;
                    if (void 0 === r)
                        return this;
                    if (void 0 === r.removeListener)
                        return 0 === arguments.length ? (this._events = Object.create(null),
                        this._eventsCount = 0) : void 0 !== r[e] && (0 == --this._eventsCount ? this._events = Object.create(null) : delete r[e]),
                        this;
                    if (0 === arguments.length) {
                        for (var n, i = Object.keys(r), o = 0; o < i.length; ++o)
                            "removeListener" !== (n = i[o]) && this.removeAllListeners(n);
                        return this.removeAllListeners("removeListener"),
                        this._events = Object.create(null),
                        this._eventsCount = 0,
                        this
                    }
                    if ("function" == typeof (t = r[e]))
                        this.removeListener(e, t);
                    else if (void 0 !== t)
                        for (o = t.length - 1; 0 <= o; o--)
                            this.removeListener(e, t[o]);
                    return this
                }
                ,
                a.prototype.listeners = function(e) {
                    return p(this, e, !0)
                }
                ,
                a.prototype.rawListeners = function(e) {
                    return p(this, e, !1)
                }
                ,
                a.listenerCount = function(e, t) {
                    return "function" == typeof e.listenerCount ? e.listenerCount(t) : d.call(e, t)
                }
                ,
                a.prototype.listenerCount = d,
                a.prototype.eventNames = function() {
                    return 0 < this._eventsCount ? o(this._events) : []
                }
            }
            , function(e, t, r) {
                (function(t) {
                    e.exports = function() {
                        "use strict";
                        function e(e, t) {
                            for (var r = 0; r < t.length; r++) {
                                var n = t[r];
                                n.enumerable = n.enumerable || !1,
                                n.configurable = !0,
                                "value"in n && (n.writable = !0),
                                Object.defineProperty(e, n.key, n)
                            }
                        }
                        function r(e, t, r) {
                            return e(r = {
                                path: t,
                                exports: {},
                                require: function(e, t) {
                                    return function() {
                                        throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")
                                    }(null == t && r.path)
                                }
                            }, r.exports),
                            r.exports
                        }
                        "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : void 0 !== t || "undefined" != typeof self && self;
                        var n = r((function(e, t) {
                            var r;
                            e.exports = (r = r || function(e, t) {
                                var r = Object.create || function() {
                                    function e() {}
                                    return function(t) {
                                        var r;
                                        return e.prototype = t,
                                        r = new e,
                                        e.prototype = null,
                                        r
                                    }
                                }()
                                  , n = {}
                                  , i = n.lib = {}
                                  , o = i.Base = {
                                    extend: function(e) {
                                        var t = r(this);
                                        return e && t.mixIn(e),
                                        t.hasOwnProperty("init") && this.init !== t.init || (t.init = function() {
                                            t.$super.init.apply(this, arguments)
                                        }
                                        ),
                                        t.init.prototype = t,
                                        t.$super = this,
                                        t
                                    },
                                    create: function() {
                                        var e = this.extend();
                                        return e.init.apply(e, arguments),
                                        e
                                    },
                                    init: function() {},
                                    mixIn: function(e) {
                                        for (var t in e)
                                            e.hasOwnProperty(t) && (this[t] = e[t]);
                                        e.hasOwnProperty("toString") && (this.toString = e.toString)
                                    },
                                    clone: function() {
                                        return this.init.prototype.extend(this)
                                    }
                                }
                                  , s = i.WordArray = o.extend({
                                    init: function(e, t) {
                                        e = this.words = e || [],
                                        this.sigBytes = null != t ? t : 4 * e.length
                                    },
                                    toString: function(e) {
                                        return (e || c).stringify(this)
                                    },
                                    concat: function(e) {
                                        var t = this.words
                                          , r = e.words
                                          , n = this.sigBytes
                                          , i = e.sigBytes;
                                        if (this.clamp(),
                                        n % 4)
                                            for (var o = 0; o < i; o++) {
                                                var s = r[o >>> 2] >>> 24 - o % 4 * 8 & 255;
                                                t[n + o >>> 2] |= s << 24 - (n + o) % 4 * 8
                                            }
                                        else
                                            for (o = 0; o < i; o += 4)
                                                t[n + o >>> 2] = r[o >>> 2];
                                        return this.sigBytes += i,
                                        this
                                    },
                                    clamp: function() {
                                        var t = this.words
                                          , r = this.sigBytes;
                                        t[r >>> 2] &= 4294967295 << 32 - r % 4 * 8,
                                        t.length = e.ceil(r / 4)
                                    },
                                    clone: function() {
                                        var e = o.clone.call(this);
                                        return e.words = this.words.slice(0),
                                        e
                                    },
                                    random: function(t) {
                                        for (var r, n = [], i = function(t) {
                                            t = t;
                                            var r = 987654321
                                              , n = 4294967295;
                                            return function() {
                                                var i = ((r = 36969 * (65535 & r) + (r >> 16) & n) << 16) + (t = 18e3 * (65535 & t) + (t >> 16) & n) & n;
                                                return i /= 4294967296,
                                                (i += .5) * (e.random() > .5 ? 1 : -1)
                                            }
                                        }, o = 0; o < t; o += 4) {
                                            var a = i(4294967296 * (r || e.random()));
                                            r = 987654071 * a(),
                                            n.push(4294967296 * a() | 0)
                                        }
                                        return new s.init(n,t)
                                    }
                                })
                                  , a = n.enc = {}
                                  , c = a.Hex = {
                                    stringify: function(e) {
                                        for (var t = e.words, r = e.sigBytes, n = [], i = 0; i < r; i++) {
                                            var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255;
                                            n.push((o >>> 4).toString(16)),
                                            n.push((15 & o).toString(16))
                                        }
                                        return n.join("")
                                    },
                                    parse: function(e) {
                                        for (var t = e.length, r = [], n = 0; n < t; n += 2)
                                            r[n >>> 3] |= parseInt(e.substr(n, 2), 16) << 24 - n % 8 * 4;
                                        return new s.init(r,t / 2)
                                    }
                                }
                                  , u = a.Latin1 = {
                                    stringify: function(e) {
                                        for (var t = e.words, r = e.sigBytes, n = [], i = 0; i < r; i++) {
                                            var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255;
                                            n.push(String.fromCharCode(o))
                                        }
                                        return n.join("")
                                    },
                                    parse: function(e) {
                                        for (var t = e.length, r = [], n = 0; n < t; n++)
                                            r[n >>> 2] |= (255 & e.charCodeAt(n)) << 24 - n % 4 * 8;
                                        return new s.init(r,t)
                                    }
                                }
                                  , f = a.Utf8 = {
                                    stringify: function(e) {
                                        try {
                                            return decodeURIComponent(escape(u.stringify(e)))
                                        } catch (e) {
                                            throw new Error("Malformed UTF-8 data")
                                        }
                                    },
                                    parse: function(e) {
                                        return u.parse(unescape(encodeURIComponent(e)))
                                    }
                                }
                                  , l = i.BufferedBlockAlgorithm = o.extend({
                                    reset: function() {
                                        this._data = new s.init,
                                        this._nDataBytes = 0
                                    },
                                    _append: function(e) {
                                        "string" == typeof e && (e = f.parse(e)),
                                        this._data.concat(e),
                                        this._nDataBytes += e.sigBytes
                                    },
                                    _process: function(t) {
                                        var r = this._data
                                          , n = r.words
                                          , i = r.sigBytes
                                          , o = this.blockSize
                                          , a = i / (4 * o)
                                          , c = (a = t ? e.ceil(a) : e.max((0 | a) - this._minBufferSize, 0)) * o
                                          , u = e.min(4 * c, i);
                                        if (c) {
                                            for (var f = 0; f < c; f += o)
                                                this._doProcessBlock(n, f);
                                            var l = n.splice(0, c);
                                            r.sigBytes -= u
                                        }
                                        return new s.init(l,u)
                                    },
                                    clone: function() {
                                        var e = o.clone.call(this);
                                        return e._data = this._data.clone(),
                                        e
                                    },
                                    _minBufferSize: 0
                                })
                                  , h = (i.Hasher = l.extend({
                                    cfg: o.extend(),
                                    init: function(e) {
                                        this.cfg = this.cfg.extend(e),
                                        this.reset()
                                    },
                                    reset: function() {
                                        l.reset.call(this),
                                        this._doReset()
                                    },
                                    update: function(e) {
                                        return this._append(e),
                                        this._process(),
                                        this
                                    },
                                    finalize: function(e) {
                                        return e && this._append(e),
                                        this._doFinalize()
                                    },
                                    blockSize: 16,
                                    _createHelper: function(e) {
                                        return function(t, r) {
                                            return new e.init(r).finalize(t)
                                        }
                                    },
                                    _createHmacHelper: function(e) {
                                        return function(t, r) {
                                            return new h.HMAC.init(e,r).finalize(t)
                                        }
                                    }
                                }),
                                n.algo = {});
                                return n
                            }(Math),
                            r)
                        }
                        ))
                          , i = r((function(e, t) {
                            var r;
                            e.exports = (r = n,
                            function(e) {
                                var t = r
                                  , n = t.lib
                                  , i = n.WordArray
                                  , o = n.Hasher
                                  , s = t.algo
                                  , a = []
                                  , c = [];
                                !function() {
                                    function t(t) {
                                        for (var r = e.sqrt(t), n = 2; n <= r; n++)
                                            if (!(t % n))
                                                return !1;
                                        return !0
                                    }
                                    function r(e) {
                                        return 4294967296 * (e - (0 | e)) | 0
                                    }
                                    for (var n = 2, i = 0; i < 64; )
                                        t(n) && (i < 8 && (a[i] = r(e.pow(n, .5))),
                                        c[i] = r(e.pow(n, 1 / 3)),
                                        i++),
                                        n++
                                }();
                                var u = []
                                  , f = s.SHA256 = o.extend({
                                    _doReset: function() {
                                        this._hash = new i.init(a.slice(0))
                                    },
                                    _doProcessBlock: function(e, t) {
                                        for (var r = this._hash.words, n = r[0], i = r[1], o = r[2], s = r[3], a = r[4], f = r[5], l = r[6], h = r[7], p = 0; p < 64; p++) {
                                            if (p < 16)
                                                u[p] = 0 | e[t + p];
                                            else {
                                                var d = u[p - 15]
                                                  , y = (d << 25 | d >>> 7) ^ (d << 14 | d >>> 18) ^ d >>> 3
                                                  , g = u[p - 2]
                                                  , m = (g << 15 | g >>> 17) ^ (g << 13 | g >>> 19) ^ g >>> 10;
                                                u[p] = y + u[p - 7] + m + u[p - 16]
                                            }
                                            var v = n & i ^ n & o ^ i & o
                                              , b = (n << 30 | n >>> 2) ^ (n << 19 | n >>> 13) ^ (n << 10 | n >>> 22)
                                              , _ = h + ((a << 26 | a >>> 6) ^ (a << 21 | a >>> 11) ^ (a << 7 | a >>> 25)) + (a & f ^ ~a & l) + c[p] + u[p];
                                            h = l,
                                            l = f,
                                            f = a,
                                            a = s + _ | 0,
                                            s = o,
                                            o = i,
                                            i = n,
                                            n = _ + (b + v) | 0
                                        }
                                        r[0] = r[0] + n | 0,
                                        r[1] = r[1] + i | 0,
                                        r[2] = r[2] + o | 0,
                                        r[3] = r[3] + s | 0,
                                        r[4] = r[4] + a | 0,
                                        r[5] = r[5] + f | 0,
                                        r[6] = r[6] + l | 0,
                                        r[7] = r[7] + h | 0
                                    },
                                    _doFinalize: function() {
                                        var t = this._data
                                          , r = t.words
                                          , n = 8 * this._nDataBytes
                                          , i = 8 * t.sigBytes;
                                        return r[i >>> 5] |= 128 << 24 - i % 32,
                                        r[14 + (i + 64 >>> 9 << 4)] = e.floor(n / 4294967296),
                                        r[15 + (i + 64 >>> 9 << 4)] = n,
                                        t.sigBytes = 4 * r.length,
                                        this._process(),
                                        this._hash
                                    },
                                    clone: function() {
                                        var e = o.clone.call(this);
                                        return e._hash = this._hash.clone(),
                                        e
                                    }
                                });
                                t.SHA256 = o._createHelper(f),
                                t.HmacSHA256 = o._createHmacHelper(f)
                            }(Math),
                            r.SHA256)
                        }
                        ))
                          , o = (r((function(e, t) {
                            var r, i, o;
                            e.exports = (i = (r = n).lib.Base,
                            o = r.enc.Utf8,
                            void (r.algo.HMAC = i.extend({
                                init: function(e, t) {
                                    e = this._hasher = new e.init,
                                    "string" == typeof t && (t = o.parse(t));
                                    var r = e.blockSize
                                      , n = 4 * r;
                                    t.sigBytes > n && (t = e.finalize(t)),
                                    t.clamp();
                                    for (var i = this._oKey = t.clone(), s = this._iKey = t.clone(), a = i.words, c = s.words, u = 0; u < r; u++)
                                        a[u] ^= 1549556828,
                                        c[u] ^= 909522486;
                                    i.sigBytes = s.sigBytes = n,
                                    this.reset()
                                },
                                reset: function() {
                                    var e = this._hasher;
                                    e.reset(),
                                    e.update(this._iKey)
                                },
                                update: function(e) {
                                    return this._hasher.update(e),
                                    this
                                },
                                finalize: function(e) {
                                    var t = this._hasher
                                      , r = t.finalize(e);
                                    return t.reset(),
                                    t.finalize(this._oKey.clone().concat(r))
                                }
                            })))
                        }
                        )),
                        r((function(e, t) {
                            e.exports = n.HmacSHA256
                        }
                        )))
                          , s = function(e, t) {
                            return o(t, e)
                        }
                          , a = function(e) {
                            return i(e)
                        }
                          , c = ["authorization", "content-type", "content-length", "user-agent", "presigned-expires", "expect", "x-amzn-trace-id"]
                          , u = "aws4_request"
                          , f = function(e) {
                            try {
                                return encodeURIComponent(e).replace(/[^A-Za-z0-9_.~\-%]+/g, escape).replace(/[*]/g, (function(e) {
                                    return "%".concat(e.charCodeAt(0).toString(16).toUpperCase())
                                }
                                ))
                            } catch (e) {
                                return ""
                            }
                        }
                          , l = function(e) {
                            return Object.keys(e).sort().map((function(t) {
                                var r = e[t];
                                if (null != r) {
                                    var n = f(t);
                                    if (n)
                                        return Array.isArray(r) ? "".concat(n, "=").concat(r.map(f).sort().join("&".concat(n, "="))) : "".concat(n, "=").concat(f(r))
                                }
                            }
                            )).filter((function(e) {
                                return e
                            }
                            )).join("&")
                        };
                        return function() {
                            function t(e, r, n) {
                                !function(e, t) {
                                    if (!(e instanceof t))
                                        throw new TypeError("Cannot call a class as a function")
                                }(this, t),
                                this.request = e,
                                this.request.headers = e.headers || {},
                                this.serviceName = r,
                                n = n || {},
                                this.signatureCache = "boolean" != typeof n.signatureCache || n.signatureCache,
                                this.operation = n.operation,
                                this.signatureVersion = n.signatureVersion
                            }
                            var r, n;
                            return r = t,
                            (n = [{
                                key: "addAuthorization",
                                value: function(e, t) {
                                    var r = this.iso8601(t).replace(/[:\-]|\.\d{3}/g, "");
                                    this.addHeaders(e, r),
                                    this.request.headers.Authorization = this.authorization(e, r)
                                }
                            }, {
                                key: "addHeaders",
                                value: function(e, t) {
                                    this.request.headers["X-Amz-Date"] = t,
                                    e.sessionToken && (this.request.headers["x-amz-security-token"] = e.sessionToken),
                                    this.request.body && (this.request.headers["X-Amz-Content-Sha256"] = a(JSON.stringify(this.request.body)).toString())
                                }
                            }, {
                                key: "authorization",
                                value: function(e, t) {
                                    var r = []
                                      , n = this.credentialString(t);
                                    return r.push("".concat("AWS4-HMAC-SHA256", " Credential=").concat(e.accessKeyId, "/").concat(n)),
                                    r.push("SignedHeaders=".concat(this.signedHeaders())),
                                    r.push("Signature=".concat(this.signature(e, t))),
                                    r.join(", ")
                                }
                            }, {
                                key: "signature",
                                value: function(e, t) {
                                    var r = this.getSigningKey(e, t.substr(0, 8), this.request.region, this.serviceName, this.signatureCache);
                                    return s(r, this.stringToSign(t), "hex")
                                }
                            }, {
                                key: "stringToSign",
                                value: function(e) {
                                    var t = [];
                                    return t.push("AWS4-HMAC-SHA256"),
                                    t.push(e),
                                    t.push(this.credentialString(e)),
                                    t.push(this.hexEncodedHash(this.canonicalString())),
                                    t.join("\n")
                                }
                            }, {
                                key: "canonicalString",
                                value: function() {
                                    var e = []
                                      , t = this.request.pathname || "/";
                                    return e.push(this.request.method.toUpperCase()),
                                    e.push(t),
                                    e.push(l(this.request.params) || ""),
                                    e.push("".concat(this.canonicalHeaders(), "\n")),
                                    e.push(this.signedHeaders()),
                                    e.push(this.hexEncodedBodyHash()),
                                    e.join("\n")
                                }
                            }, {
                                key: "canonicalHeaders",
                                value: function() {
                                    var e = this
                                      , t = [];
                                    Object.keys(this.request.headers).forEach((function(r) {
                                        t.push([r, e.request.headers[r]])
                                    }
                                    )),
                                    t.sort((function(e, t) {
                                        return e[0].toLowerCase() < t[0].toLowerCase() ? -1 : 1
                                    }
                                    ));
                                    var r = [];
                                    return t.forEach((function(t) {
                                        var n = t[0].toLowerCase();
                                        if (e.isSignableHeader(n)) {
                                            var i = t[1];
                                            if (null == i || "function" != typeof i.toString)
                                                throw new Error("Header ".concat(n, " contains invalid value"));
                                            r.push("".concat(n, ":").concat(e.canonicalHeaderValues(i.toString())))
                                        }
                                    }
                                    )),
                                    r.join("\n")
                                }
                            }, {
                                key: "canonicalHeaderValues",
                                value: function(e) {
                                    return e.replace(/\s+/g, " ").replace(/^\s+|\s+$/g, "")
                                }
                            }, {
                                key: "signedHeaders",
                                value: function() {
                                    var e = this
                                      , t = [];
                                    return Object.keys(this.request.headers).forEach((function(r) {
                                        r = r.toLowerCase(),
                                        e.isSignableHeader(r) && t.push(r)
                                    }
                                    )),
                                    t.sort().join(";")
                                }
                            }, {
                                key: "credentialString",
                                value: function(e) {
                                    return this.createScope(e.substr(0, 8), this.request.region, this.serviceName)
                                }
                            }, {
                                key: "hexEncodedHash",
                                value: function(e) {
                                    return a(e)
                                }
                            }, {
                                key: "hexEncodedBodyHash",
                                value: function() {
                                    return this.request.headers["X-Amz-Content-Sha256"] ? this.request.headers["X-Amz-Content-Sha256"] : this.request.body ? this.hexEncodedHash(l(this.request.body)) : this.hexEncodedHash("")
                                }
                            }, {
                                key: "isSignableHeader",
                                value: function(e) {
                                    return 0 === e.toLowerCase().indexOf("x-amz-") || c.indexOf(e) < 0
                                }
                            }, {
                                key: "iso8601",
                                value: function(e) {
                                    return void 0 === e && (e = new Date),
                                    e.toISOString().replace(/\.\d{3}Z$/, "Z")
                                }
                            }, {
                                key: "getSigningKey",
                                value: function(e, t, r, n) {
                                    var i = s("AWS4".concat(e.secretAccessKey), t)
                                      , o = s(i, r)
                                      , a = s(o, n);
                                    return s(a, u)
                                }
                            }, {
                                key: "createScope",
                                value: function(e, t, r) {
                                    return [e.substr(0, 8), t, r, u].join("/")
                                }
                            }]) && e(r.prototype, n),
                            t
                        }()
                    }()
                }
                ).call(this, r(7))
            }
            , function(e, t, r) {
                e.exports = function() {
                    return r(8)('!function(t){var n={};function __webpack_require__(r){if(n[r])return n[r].exports;var e=n[r]={i:r,l:!1,exports:{}};return t[r].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}__webpack_require__.m=t,__webpack_require__.c=n,__webpack_require__.d=function(r,e,t){__webpack_require__.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},__webpack_require__.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},__webpack_require__.t=function(e,r){if(1&r&&(e=__webpack_require__(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(__webpack_require__.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)__webpack_require__.d(t,n,function(r){return e[r]}.bind(null,n));return t},__webpack_require__.n=function(r){var e=r&&r.__esModule?function getDefault(){return r.default}:function getModuleExports(){return r};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=9)}([function(r,e,t){r.exports=function(){var r=r||function(u,t){var n=Object.create||function(){function F(){}return function(r){var e;F.prototype=r;e=new F;F.prototype=null;return e}}();var r={};var e=r.lib={};var i=e.Base=function(){return{extend:function(r){var e=n(this);if(r)e.mixIn(r);if(!e.hasOwnProperty("init")||this.init===e.init)e.init=function(){e.$super.init.apply(this,arguments)};e.init.prototype=e;e.$super=this;return e},create:function(){var r=this.extend();r.init.apply(r,arguments);return r},init:function(){},mixIn:function(r){for(var e in r)if(r.hasOwnProperty(e))this[e]=r[e];if(r.hasOwnProperty("toString"))this.toString=r.toString},clone:function(){return this.init.prototype.extend(this)}}}();var h=e.WordArray=i.extend({init:function(r,e){r=this.words=r||[];if(e!=t)this.sigBytes=e;else this.sigBytes=r.length*4},toString:function(r){return(r||o).stringify(this)},concat:function(r){var e=this.words;var t=r.words;var n=this.sigBytes;var i=r.sigBytes;this.clamp();if(n%4)for(var a=0;a<i;a++){var o=t[a>>>2]>>>24-a%4*8&255;e[n+a>>>2]|=o<<24-(n+a)%4*8}else for(var a=0;a<i;a+=4)e[n+a>>>2]=t[a>>>2];this.sigBytes+=i;return this},clamp:function(){var r=this.words;var e=this.sigBytes;r[e>>>2]&=4294967295<<32-e%4*8;r.length=u.ceil(e/4)},clone:function(){var r=i.clone.call(this);r.words=this.words.slice(0);return r},random:function(r){var e=[];var t=function(e){var e=e;var t=987654321;var n=4294967295;return function(){t=36969*(t&65535)+(t>>16)&n;e=18e3*(e&65535)+(e>>16)&n;var r=(t<<16)+e&n;r/=4294967296;r+=.5;return r*(u.random()>.5?1:-1)}};for(var n=0,i;n<r;n+=4){var a=t((i||u.random())*4294967296);i=a()*987654071;e.push(a()*4294967296|0)}return new h.init(e,r)}});var a=r.enc={};var o=a.Hex={stringify:function(r){var e=r.words;var t=r.sigBytes;var n=[];for(var i=0;i<t;i++){var a=e[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16));n.push((a&15).toString(16))}return n.join("")},parse:function(r){var e=r.length;var t=[];for(var n=0;n<e;n+=2)t[n>>>3]|=parseInt(r.substr(n,2),16)<<24-n%8*4;return new h.init(t,e/2)}};var s=a.Latin1={stringify:function(r){var e=r.words;var t=r.sigBytes;var n=[];for(var i=0;i<t;i++){var a=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(r){var e=r.length;var t=[];for(var n=0;n<e;n++)t[n>>>2]|=(r.charCodeAt(n)&255)<<24-n%4*8;return new h.init(t,e)}};var c=a.Utf8={stringify:function(r){try{return decodeURIComponent(escape(s.stringify(r)))}catch(r){throw new Error("Malformed UTF-8 data")}},parse:function(r){return s.parse(unescape(encodeURIComponent(r)))}};var v=e.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new h.init;this._nDataBytes=0},_append:function(r){if(typeof r=="string")r=c.parse(r);this._data.concat(r);this._nDataBytes+=r.sigBytes},_process:function(r){var e=this._data;var t=e.words;var n=e.sigBytes;var i=this.blockSize;var a=i*4;var o=n/a;if(r)o=u.ceil(o);else o=u.max((o|0)-this._minBufferSize,0);var s=o*i;var c=u.min(s*4,n);if(s){for(var v=0;v<s;v+=i)this._doProcessBlock(t,v);var f=t.splice(0,s);e.sigBytes-=c}return new h.init(f,c)},clone:function(){var r=i.clone.call(this);r._data=this._data.clone();return r},_minBufferSize:0});var f=e.Hasher=v.extend({cfg:i.extend(),init:function(r){this.cfg=this.cfg.extend(r);this.reset()},reset:function(){v.reset.call(this);this._doReset()},update:function(r){this._append(r);this._process();return this},finalize:function(r){if(r)this._append(r);var e=this._doFinalize();return e},blockSize:512/32,_createHelper:function(t){return function(r,e){return new t.init(e).finalize(r)}},_createHmacHelper:function(t){return function(r,e){return new p.HMAC.init(t,e).finalize(r)}}});var p=r.algo={};return r}(Math);return r}()},function(r,e,t){r.exports=function(F){F.lib.Cipher||function(o){var r=F;var e=r.lib;var t=e.Base;var c=e.WordArray;var n=e.BufferedBlockAlgorithm;var i=r.enc;var a=i.Utf8;var s=i.Base64;var v=r.algo;var f=v.EvpKDF;var u=e.Cipher=n.extend({cfg:t.extend(),createEncryptor:function(r,e){return this.create(this._ENC_XFORM_MODE,r,e)},createDecryptor:function(r,e){return this.create(this._DEC_XFORM_MODE,r,e)},init:function(r,e,t){this.cfg=this.cfg.extend(t);this._xformMode=r;this._key=e;this.reset()},reset:function(){n.reset.call(this);this._doReset()},process:function(r){this._append(r);return this._process()},finalize:function(r){if(r)this._append(r);var e=this._doFinalize();return e},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function selectCipherStrategy(r){if(typeof r=="string")return S;else return m}return function(n){return{encrypt:function(r,e,t){return selectCipherStrategy(e).encrypt(n,r,e,t)},decrypt:function(r,e,t){return selectCipherStrategy(e).decrypt(n,r,e,t)}}}}()});var h=e.StreamCipher=u.extend({_doFinalize:function(){var r=this._process(!!"flush");return r},blockSize:1});var p=r.mode={};var l=e.BlockCipherMode=t.extend({createEncryptor:function(r,e){return this.Encryptor.create(r,e)},createDecryptor:function(r,e){return this.Decryptor.create(r,e)},init:function(r,e){this._cipher=r;this._iv=e}});var _=p.CBC=function(){var r=l.extend();r.Encryptor=r.extend({processBlock:function(r,e){var t=this._cipher;var n=t.blockSize;xorBlock.call(this,r,e,n);t.encryptBlock(r,e);this._prevBlock=r.slice(e,e+n)}});r.Decryptor=r.extend({processBlock:function(r,e){var t=this._cipher;var n=t.blockSize;var i=r.slice(e,e+n);t.decryptBlock(r,e);xorBlock.call(this,r,e,n);this._prevBlock=i}});function xorBlock(r,e,t){var n=this._iv;if(n){var i=n;this._iv=o}else var i=this._prevBlock;for(var a=0;a<t;a++)r[e+a]^=i[a]}return r}();var d=r.pad={};var y=d.Pkcs7={pad:function(r,e){var t=e*4;var n=t-r.sigBytes%t;var i=n<<24|n<<16|n<<8|n;var a=[];for(var o=0;o<n;o+=4)a.push(i);var s=c.create(a,n);r.concat(s)},unpad:function(r){var e=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=e}};var g=e.BlockCipher=u.extend({cfg:u.cfg.extend({mode:_,padding:y}),reset:function(){u.reset.call(this);var r=this.cfg;var e=r.iv;var t=r.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else{var n=t.createDecryptor;this._minBufferSize=1}if(this._mode&&this._mode.__creator==n)this._mode.init(this,e&&e.words);else{this._mode=n.call(t,this,e&&e.words);this._mode.__creator=n}},_doProcessBlock:function(r,e){this._mode.processBlock(r,e)},_doFinalize:function(){var r=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){r.pad(this._data,this.blockSize);var e=this._process(!!"flush")}else{var e=this._process(!!"flush");r.unpad(e)}return e},blockSize:128/32});var k=e.CipherParams=t.extend({init:function(r){this.mixIn(r)},toString:function(r){return(r||this.formatter).stringify(this)}});var x=r.format={};var B=x.OpenSSL={stringify:function(r){var e=r.ciphertext;var t=r.salt;if(t)var n=c.create([1398893684,1701076831]).concat(t).concat(e);else var n=e;return n.toString(s)},parse:function(r){var e=s.parse(r);var t=e.words;if(t[0]==1398893684&&t[1]==1701076831){var n=c.create(t.slice(2,4));t.splice(0,4);e.sigBytes-=16}return k.create({ciphertext:e,salt:n})}};var m=e.SerializableCipher=t.extend({cfg:t.extend({format:B}),encrypt:function(r,e,t,n){n=this.cfg.extend(n);var i=r.createEncryptor(t,n);var a=i.finalize(e);var o=i.cfg;return k.create({ciphertext:a,key:t,iv:o.iv,algorithm:r,mode:o.mode,padding:o.padding,blockSize:r.blockSize,formatter:n.format})},decrypt:function(r,e,t,n){n=this.cfg.extend(n);e=this._parse(e,n.format);var i=r.createDecryptor(t,n).finalize(e.ciphertext);return i},_parse:function(r,e){if(typeof r=="string")return e.parse(r,this);else return r}});var w=r.kdf={};var b=w.OpenSSL={execute:function(r,e,t,n){if(!n)n=c.random(64/8);var i=f.create({keySize:e+t}).compute(r,n);var a=c.create(i.words.slice(e),t*4);i.sigBytes=e*4;return k.create({key:i,iv:a,salt:n})}};var S=e.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:b}),encrypt:function(r,e,t,n){n=this.cfg.extend(n);var i=n.kdf.execute(t,r.keySize,r.ivSize);n.iv=i.iv;var a=m.encrypt.call(this,r,e,i.key,n);a.mixIn(i);return a},decrypt:function(r,e,t,n){n=this.cfg.extend(n);e=this._parse(e,n.format);var i=n.kdf.execute(t,r.keySize,r.ivSize,e.salt);n.iv=i.iv;var a=m.decrypt.call(this,r,e,i.key,n);return a}})}()}(t(0),t(5))},function(r,e,t){r.exports=function(a){return function(){var r=a;var e=r.lib;var t=e.BlockCipher;var n=r.algo;var f=[];var v=[];var u=[];var h=[];var p=[];var l=[];var _=[];var d=[];var y=[];var g=[];(function(){var r=[];for(var e=0;e<256;e++)if(e<128)r[e]=e<<1;else r[e]=e<<1^283;var t=0;var n=0;for(var e=0;e<256;e++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^i&255^99;f[t]=i;v[i]=t;var a=r[t];var o=r[a];var s=r[o];var c=r[i]*257^i*16843008;u[t]=c<<24|c>>>8;h[t]=c<<16|c>>>16;p[t]=c<<8|c>>>24;l[t]=c;var c=s*16843009^o*65537^a*257^t*16843008;_[i]=c<<24|c>>>8;d[i]=c<<16|c>>>16;y[i]=c<<8|c>>>24;g[i]=c;if(!t)t=n=1;else{t=a^r[r[r[s^a]]];n^=r[r[n]]}}})();var k=[0,1,2,4,8,16,32,64,128,27,54];var i=n.AES=t.extend({_doReset:function(){if(this._nRounds&&this._keyPriorReset===this._key)return;var r=this._keyPriorReset=this._key;var e=r.words;var t=r.sigBytes/4;var n=this._nRounds=t+6;var i=(n+1)*4;var a=this._keySchedule=[];for(var o=0;o<i;o++)if(o<t)a[o]=e[o];else{var s=a[o-1];if(!(o%t)){s=s<<8|s>>>24;s=f[s>>>24]<<24|f[s>>>16&255]<<16|f[s>>>8&255]<<8|f[s&255];s^=k[o/t|0]<<24}else if(t>6&&o%t==4)s=f[s>>>24]<<24|f[s>>>16&255]<<16|f[s>>>8&255]<<8|f[s&255];a[o]=a[o-t]^s}var c=this._invKeySchedule=[];for(var v=0;v<i;v++){var o=i-v;if(v%4)var s=a[o];else var s=a[o-4];if(v<4||o<=4)c[v]=s;else c[v]=_[f[s>>>24]]^d[f[s>>>16&255]]^y[f[s>>>8&255]]^g[f[s&255]]}},encryptBlock:function(r,e){this._doCryptBlock(r,e,this._keySchedule,u,h,p,l,f)},decryptBlock:function(r,e){var t=r[e+1];r[e+1]=r[e+3];r[e+3]=t;this._doCryptBlock(r,e,this._invKeySchedule,_,d,y,g,v);var t=r[e+1];r[e+1]=r[e+3];r[e+3]=t},_doCryptBlock:function(r,e,t,n,i,a,o,s){var c=this._nRounds;var v=r[e]^t[0];var f=r[e+1]^t[1];var u=r[e+2]^t[2];var h=r[e+3]^t[3];var p=4;for(var l=1;l<c;l++){var _=n[v>>>24]^i[f>>>16&255]^a[u>>>8&255]^o[h&255]^t[p++];var d=n[f>>>24]^i[u>>>16&255]^a[h>>>8&255]^o[v&255]^t[p++];var y=n[u>>>24]^i[h>>>16&255]^a[v>>>8&255]^o[f&255]^t[p++];var g=n[h>>>24]^i[v>>>16&255]^a[f>>>8&255]^o[u&255]^t[p++];v=_;f=d;u=y;h=g}var _=(s[v>>>24]<<24|s[f>>>16&255]<<16|s[u>>>8&255]<<8|s[h&255])^t[p++];var d=(s[f>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[v&255])^t[p++];var y=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[v>>>8&255]<<8|s[f&255])^t[p++];var g=(s[h>>>24]<<24|s[v>>>16&255]<<16|s[f>>>8&255]<<8|s[u&255])^t[p++];r[e]=_;r[e+1]=d;r[e+2]=y;r[e+3]=g},keySize:256/32});r.AES=t._createHelper(i)}(),a.AES}(t(0),(t(10),t(11),t(5),t(1)))},function(r,e,t){r.exports=function(e){return e.mode.ECB=function(){var r=e.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(r,e){this._cipher.encryptBlock(r,e)}});r.Decryptor=r.extend({processBlock:function(r,e){this._cipher.decryptBlock(r,e)}});return r}(),e.mode.ECB}(t(0),t(1))},function(r,e,t){r.exports=function(r){return r.enc.Utf8}(t(0))},function(r,e,t){r.exports=function(o){return function(){var r=o;var e=r.lib;var t=e.Base;var f=e.WordArray;var n=r.algo;var i=n.MD5;var a=n.EvpKDF=t.extend({cfg:t.extend({keySize:128/32,hasher:i,iterations:1}),init:function(r){this.cfg=this.cfg.extend(r)},compute:function(r,e){var t=this.cfg;var n=t.hasher.create();var i=f.create();var a=i.words;var o=t.keySize;var s=t.iterations;while(a.length<o){if(c)n.update(c);var c=n.update(r).finalize(e);n.reset();for(var v=1;v<s;v++){c=n.finalize(c);n.reset()}i.concat(c)}i.sigBytes=o*4;return i}});r.EvpKDF=function(r,e,t){return a.create(t).compute(r,e)}}(),o.EvpKDF}(t(0),(t(12),t(13)))},function(r,e,t){r.exports=function(r){return r.pad.Pkcs7}(t(0),t(1))},function(r,e,t){r.exports=function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding}(t(0),t(1))},function(r,e,t){r.exports=function(a){return function(){if(typeof ArrayBuffer!="function")return;var r=a;var e=r.lib;var t=e.WordArray;var i=t.init;var n=t.init=function(r){if(r instanceof ArrayBuffer)r=new Uint8Array(r);if(r instanceof Int8Array||typeof Uint8ClampedArray!=="undefined"&&r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);if(r instanceof Uint8Array){var e=r.byteLength;var t=[];for(var n=0;n<e;n++)t[n>>>2]|=r[n]<<24-n%4*8;i.call(this,t,e)}else i.apply(this,arguments)};n.prototype=t}(),a.lib.WordArray}(t(0))},function(r,e,t){"use strict";t.r(e);var e=t(2),o=t.n(e),e=t(3),s=t.n(e),e=t(6),c=t.n(e),e=t(7),v=t.n(e),e=t(8),f=t.n(e),e=t(4),u=t.n(e);function crc32(r,e){for(var t=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],n=("undefined"!=typeof Int32Array&&(t=new Int32Array(t)),-1^~~e),i=(r=new Uint8Array(r)).length,a=0;a<i;a++)n=t[255&(n^r[a])]^n>>>8;return(-1^n)>>>0}function dec2hex(r){if(void 0!==r)return function toEight(r){return r.length<8?toEight(r="0".concat(r)):r}(Number(r).toString(16))}self.onmessage=function(r){var r=r.data,e=r[0],t=r[1],n=r[2],i=r[3],a=r[4],r=r[5];i?(i=f.a.create(e),i=crc32(r=function wordArrayToUint8Array(r){for(var e=r.sigBytes,t=r.words,n=new Uint8Array(e),i=0,a=0;i!==e;){var o=t[a++];if(n[i++]=(4278190080&o)>>>24,i===e)break;if(n[i++]=(16711680&o)>>>16,i===e)break;if(n[i++]=(65280&o)>>>8,i===e)break;n[i++]=255&o}return n}((r&&e.byteLength%16!=0?o.a.encrypt(i,u.a.parse(a),{mode:s.a,padding:c.a}):o.a.encrypt(i,u.a.parse(a),{mode:s.a,padding:v.a})).ciphertext),0),postMessage([r.buffer,dec2hex(i),t,n],[r.buffer])):(a=crc32(e,0),postMessage([e,dec2hex(a),t,n],[e]))}},function(r,e,t){r.exports=function(i){return function(){var r=i;var e=r.lib;var c=e.WordArray;var t=r.enc;var n=t.Base64={stringify:function(r){var e=r.words;var t=r.sigBytes;var n=this._map;r.clamp();var i=[];for(var a=0;a<t;a+=3){var o=e[a>>>2]>>>24-a%4*8&255;var s=e[a+1>>>2]>>>24-(a+1)%4*8&255;var c=e[a+2>>>2]>>>24-(a+2)%4*8&255;var v=o<<16|s<<8|c;for(var f=0;f<4&&a+f*.75<t;f++)i.push(n.charAt(v>>>6*(3-f)&63))}var u=n.charAt(64);if(u)while(i.length%4)i.push(u);return i.join("")},parse:function(r){var e=r.length;var t=this._map;var n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<t.length;i++)n[t.charCodeAt(i)]=i}var a=t.charAt(64);if(a){var o=r.indexOf(a);if(o!==-1)e=o}return parseLoop(r,e,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function parseLoop(r,e,t){var n=[];var i=0;for(var a=0;a<e;a++)if(a%4){var o=t[r.charCodeAt(a-1)]<<a%4*2;var s=t[r.charCodeAt(a)]>>>6-a%4*2;n[i>>>2]|=(o|s)<<24-i%4*8;i++}return c.create(n,i)}}(),i.enc.Base64}(t(0))},function(r,e,t){r.exports=function(o){return function(f){var r=o;var e=r.lib;var t=e.WordArray;var n=e.Hasher;var i=r.algo;var F=[];(function(){for(var r=0;r<64;r++)F[r]=f.abs(f.sin(r+1))*4294967296|0})();var a=i.MD5=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(r,e){for(var t=0;t<16;t++){var n=e+t;var i=r[n];r[n]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var a=this._hash.words;var o=r[e+0];var s=r[e+1];var c=r[e+2];var v=r[e+3];var f=r[e+4];var u=r[e+5];var h=r[e+6];var p=r[e+7];var l=r[e+8];var _=r[e+9];var d=r[e+10];var y=r[e+11];var g=r[e+12];var k=r[e+13];var x=r[e+14];var B=r[e+15];var m=a[0];var w=a[1];var b=a[2];var S=a[3];m=FF(m,w,b,S,o,7,F[0]);S=FF(S,m,w,b,s,12,F[1]);b=FF(b,S,m,w,c,17,F[2]);w=FF(w,b,S,m,v,22,F[3]);m=FF(m,w,b,S,f,7,F[4]);S=FF(S,m,w,b,u,12,F[5]);b=FF(b,S,m,w,h,17,F[6]);w=FF(w,b,S,m,p,22,F[7]);m=FF(m,w,b,S,l,7,F[8]);S=FF(S,m,w,b,_,12,F[9]);b=FF(b,S,m,w,d,17,F[10]);w=FF(w,b,S,m,y,22,F[11]);m=FF(m,w,b,S,g,7,F[12]);S=FF(S,m,w,b,k,12,F[13]);b=FF(b,S,m,w,x,17,F[14]);w=FF(w,b,S,m,B,22,F[15]);m=GG(m,w,b,S,s,5,F[16]);S=GG(S,m,w,b,h,9,F[17]);b=GG(b,S,m,w,y,14,F[18]);w=GG(w,b,S,m,o,20,F[19]);m=GG(m,w,b,S,u,5,F[20]);S=GG(S,m,w,b,d,9,F[21]);b=GG(b,S,m,w,B,14,F[22]);w=GG(w,b,S,m,f,20,F[23]);m=GG(m,w,b,S,_,5,F[24]);S=GG(S,m,w,b,x,9,F[25]);b=GG(b,S,m,w,v,14,F[26]);w=GG(w,b,S,m,l,20,F[27]);m=GG(m,w,b,S,k,5,F[28]);S=GG(S,m,w,b,c,9,F[29]);b=GG(b,S,m,w,p,14,F[30]);w=GG(w,b,S,m,g,20,F[31]);m=HH(m,w,b,S,u,4,F[32]);S=HH(S,m,w,b,l,11,F[33]);b=HH(b,S,m,w,y,16,F[34]);w=HH(w,b,S,m,x,23,F[35]);m=HH(m,w,b,S,s,4,F[36]);S=HH(S,m,w,b,f,11,F[37]);b=HH(b,S,m,w,p,16,F[38]);w=HH(w,b,S,m,d,23,F[39]);m=HH(m,w,b,S,k,4,F[40]);S=HH(S,m,w,b,o,11,F[41]);b=HH(b,S,m,w,v,16,F[42]);w=HH(w,b,S,m,h,23,F[43]);m=HH(m,w,b,S,_,4,F[44]);S=HH(S,m,w,b,g,11,F[45]);b=HH(b,S,m,w,B,16,F[46]);w=HH(w,b,S,m,c,23,F[47]);m=II(m,w,b,S,o,6,F[48]);S=II(S,m,w,b,p,10,F[49]);b=II(b,S,m,w,x,15,F[50]);w=II(w,b,S,m,u,21,F[51]);m=II(m,w,b,S,g,6,F[52]);S=II(S,m,w,b,v,10,F[53]);b=II(b,S,m,w,d,15,F[54]);w=II(w,b,S,m,s,21,F[55]);m=II(m,w,b,S,l,6,F[56]);S=II(S,m,w,b,B,10,F[57]);b=II(b,S,m,w,h,15,F[58]);w=II(w,b,S,m,k,21,F[59]);m=II(m,w,b,S,f,6,F[60]);S=II(S,m,w,b,y,10,F[61]);b=II(b,S,m,w,c,15,F[62]);w=II(w,b,S,m,_,21,F[63]);a[0]=a[0]+m|0;a[1]=a[1]+w|0;a[2]=a[2]+b|0;a[3]=a[3]+S|0},_doFinalize:function(){var r=this._data;var e=r.words;var t=this._nDataBytes*8;var n=r.sigBytes*8;e[n>>>5]|=128<<24-n%32;var i=f.floor(t/4294967296);var a=t;e[(n+64>>>9<<4)+15]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360;e[(n+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;r.sigBytes=(e.length+1)*4;this._process();var o=this._hash;var s=o.words;for(var c=0;c<4;c++){var v=s[c];s[c]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}return o},clone:function(){var r=n.clone.call(this);r._hash=this._hash.clone();return r}});function FF(r,e,t,n,i,a,o){var s=r+(e&t|~e&n)+i+o;return(s<<a|s>>>32-a)+e}function GG(r,e,t,n,i,a,o){var s=r+(e&n|t&~n)+i+o;return(s<<a|s>>>32-a)+e}function HH(r,e,t,n,i,a,o){var s=r+(e^t^n)+i+o;return(s<<a|s>>>32-a)+e}function II(r,e,t,n,i,a,o){var s=r+(t^(e|~n))+i+o;return(s<<a|s>>>32-a)+e}r.MD5=n._createHelper(a);r.HmacMD5=n._createHmacHelper(a)}(Math),o.MD5}(t(0))},function(r,e,t){r.exports=function(o){return function(){var r=o;var e=r.lib;var t=e.WordArray;var n=e.Hasher;var i=r.algo;var u=[];var a=i.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(r,e){var t=this._hash.words;var n=t[0];var i=t[1];var a=t[2];var o=t[3];var s=t[4];for(var c=0;c<80;c++){if(c<16)u[c]=r[e+c]|0;else{var v=u[c-3]^u[c-8]^u[c-14]^u[c-16];u[c]=v<<1|v>>>31}var f=(n<<5|n>>>27)+s+u[c];if(c<20)f+=(i&a|~i&o)+1518500249;else if(c<40)f+=(i^a^o)+1859775393;else if(c<60)f+=(i&a|i&o|a&o)-1894007588;else f+=(i^a^o)-899497514;s=o;o=a;a=i<<30|i>>>2;i=n;n=f}t[0]=t[0]+n|0;t[1]=t[1]+i|0;t[2]=t[2]+a|0;t[3]=t[3]+o|0;t[4]=t[4]+s|0},_doFinalize:function(){var r=this._data;var e=r.words;var t=this._nDataBytes*8;var n=r.sigBytes*8;e[n>>>5]|=128<<24-n%32;e[(n+64>>>9<<4)+14]=Math.floor(t/4294967296);e[(n+64>>>9<<4)+15]=t;r.sigBytes=e.length*4;this._process();return this._hash},clone:function(){var r=n.clone.call(this);r._hash=this._hash.clone();return r}});r.SHA1=n._createHelper(a);r.HmacSHA1=n._createHmacHelper(a)}(),o.SHA1}(t(0))},function(r,e,t){r.exports=function(o){(function(){var r=o;var e=r.lib;var t=e.Base;var n=r.enc;var v=n.Utf8;var i=r.algo;var a=i.HMAC=t.extend({init:function(r,e){r=this._hasher=new r.init;if(typeof e=="string")e=v.parse(e);var t=r.blockSize;var n=t*4;if(e.sigBytes>n)e=r.finalize(e);e.clamp();var i=this._oKey=e.clone();var a=this._iKey=e.clone();var o=i.words;var s=a.words;for(var c=0;c<t;c++){o[c]^=1549556828;s[c]^=909522486}i.sigBytes=a.sigBytes=n;this.reset()},reset:function(){var r=this._hasher;r.reset();r.update(this._iKey)},update:function(r){this._hasher.update(r);return this},finalize:function(r){var e=this._hasher;var t=e.finalize(r);e.reset();var n=e.finalize(this._oKey.clone().concat(t));return n}})})()}(t(0))}]);', null)
                }
            }
            , function(e, t, r) {
                e.exports = function() {
                    var e = e || function(e, t) {
                        var r = Object.create || function() {
                            function e() {}
                            return function(t) {
                                var r;
                                return e.prototype = t,
                                r = new e,
                                e.prototype = null,
                                r
                            }
                        }()
                          , n = {}
                          , i = n.lib = {}
                          , o = i.Base = {
                            extend: function(e) {
                                var t = r(this);
                                return e && t.mixIn(e),
                                t.hasOwnProperty("init") && this.init !== t.init || (t.init = function() {
                                    t.$super.init.apply(this, arguments)
                                }
                                ),
                                t.init.prototype = t,
                                t.$super = this,
                                t
                            },
                            create: function() {
                                var e = this.extend();
                                return e.init.apply(e, arguments),
                                e
                            },
                            init: function() {},
                            mixIn: function(e) {
                                for (var t in e)
                                    e.hasOwnProperty(t) && (this[t] = e[t]);
                                e.hasOwnProperty("toString") && (this.toString = e.toString)
                            },
                            clone: function() {
                                return this.init.prototype.extend(this)
                            }
                        }
                          , s = i.WordArray = o.extend({
                            init: function(e, t) {
                                e = this.words = e || [],
                                this.sigBytes = null != t ? t : 4 * e.length
                            },
                            toString: function(e) {
                                return (e || c).stringify(this)
                            },
                            concat: function(e) {
                                var t = this.words
                                  , r = e.words
                                  , n = this.sigBytes
                                  , i = e.sigBytes;
                                if (this.clamp(),
                                n % 4)
                                    for (var o = 0; o < i; o++) {
                                        var s = r[o >>> 2] >>> 24 - o % 4 * 8 & 255;
                                        t[n + o >>> 2] |= s << 24 - (n + o) % 4 * 8
                                    }
                                else
                                    for (o = 0; o < i; o += 4)
                                        t[n + o >>> 2] = r[o >>> 2];
                                return this.sigBytes += i,
                                this
                            },
                            clamp: function() {
                                var t = this.words
                                  , r = this.sigBytes;
                                t[r >>> 2] &= 4294967295 << 32 - r % 4 * 8,
                                t.length = e.ceil(r / 4)
                            },
                            clone: function() {
                                var e = o.clone.call(this);
                                return e.words = this.words.slice(0),
                                e
                            },
                            random: function(t) {
                                for (var r, n = [], i = function(t) {
                                    t = t;
                                    var r = 987654321
                                      , n = 4294967295;
                                    return function() {
                                        var i = ((r = 36969 * (65535 & r) + (r >> 16) & n) << 16) + (t = 18e3 * (65535 & t) + (t >> 16) & n) & n;
                                        return i /= 4294967296,
                                        (i += .5) * (e.random() > .5 ? 1 : -1)
                                    }
                                }, o = 0; o < t; o += 4) {
                                    var a = i(4294967296 * (r || e.random()));
                                    r = 987654071 * a(),
                                    n.push(4294967296 * a() | 0)
                                }
                                return new s.init(n,t)
                            }
                        })
                          , a = n.enc = {}
                          , c = a.Hex = {
                            stringify: function(e) {
                                for (var t = e.words, r = e.sigBytes, n = [], i = 0; i < r; i++) {
                                    var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255;
                                    n.push((o >>> 4).toString(16)),
                                    n.push((15 & o).toString(16))
                                }
                                return n.join("")
                            },
                            parse: function(e) {
                                for (var t = e.length, r = [], n = 0; n < t; n += 2)
                                    r[n >>> 3] |= parseInt(e.substr(n, 2), 16) << 24 - n % 8 * 4;
                                return new s.init(r,t / 2)
                            }
                        }
                          , u = a.Latin1 = {
                            stringify: function(e) {
                                for (var t = e.words, r = e.sigBytes, n = [], i = 0; i < r; i++) {
                                    var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255;
                                    n.push(String.fromCharCode(o))
                                }
                                return n.join("")
                            },
                            parse: function(e) {
                                for (var t = e.length, r = [], n = 0; n < t; n++)
                                    r[n >>> 2] |= (255 & e.charCodeAt(n)) << 24 - n % 4 * 8;
                                return new s.init(r,t)
                            }
                        }
                          , f = a.Utf8 = {
                            stringify: function(e) {
                                try {
                                    return decodeURIComponent(escape(u.stringify(e)))
                                } catch (e) {
                                    throw new Error("Malformed UTF-8 data")
                                }
                            },
                            parse: function(e) {
                                return u.parse(unescape(encodeURIComponent(e)))
                            }
                        }
                          , l = i.BufferedBlockAlgorithm = o.extend({
                            reset: function() {
                                this._data = new s.init,
                                this._nDataBytes = 0
                            },
                            _append: function(e) {
                                "string" == typeof e && (e = f.parse(e)),
                                this._data.concat(e),
                                this._nDataBytes += e.sigBytes
                            },
                            _process: function(t) {
                                var r = this._data
                                  , n = r.words
                                  , i = r.sigBytes
                                  , o = this.blockSize
                                  , a = i / (4 * o)
                                  , c = (a = t ? e.ceil(a) : e.max((0 | a) - this._minBufferSize, 0)) * o
                                  , u = e.min(4 * c, i);
                                if (c) {
                                    for (var f = 0; f < c; f += o)
                                        this._doProcessBlock(n, f);
                                    var l = n.splice(0, c);
                                    r.sigBytes -= u
                                }
                                return new s.init(l,u)
                            },
                            clone: function() {
                                var e = o.clone.call(this);
                                return e._data = this._data.clone(),
                                e
                            },
                            _minBufferSize: 0
                        })
                          , h = (i.Hasher = l.extend({
                            cfg: o.extend(),
                            init: function(e) {
                                this.cfg = this.cfg.extend(e),
                                this.reset()
                            },
                            reset: function() {
                                l.reset.call(this),
                                this._doReset()
                            },
                            update: function(e) {
                                return this._append(e),
                                this._process(),
                                this
                            },
                            finalize: function(e) {
                                return e && this._append(e),
                                this._doFinalize()
                            },
                            blockSize: 16,
                            _createHelper: function(e) {
                                return function(t, r) {
                                    return new e.init(r).finalize(t)
                                }
                            },
                            _createHmacHelper: function(e) {
                                return function(t, r) {
                                    return new h.HMAC.init(e,r).finalize(t)
                                }
                            }
                        }),
                        n.algo = {});
                        return n
                    }(Math);
                    return e
                }()
            }
            , function(e, t, r) {
                var n;
                e.exports = (n = r(3),
                function(e) {
                    var t = n
                      , r = t.lib
                      , i = r.WordArray
                      , o = r.Hasher
                      , s = t.algo
                      , a = []
                      , c = [];
                    !function() {
                        function t(t) {
                            for (var r = e.sqrt(t), n = 2; n <= r; n++)
                                if (!(t % n))
                                    return !1;
                            return !0
                        }
                        function r(e) {
                            return 4294967296 * (e - (0 | e)) | 0
                        }
                        for (var n = 2, i = 0; i < 64; )
                            t(n) && (i < 8 && (a[i] = r(e.pow(n, .5))),
                            c[i] = r(e.pow(n, 1 / 3)),
                            i++),
                            n++
                    }();
                    var u = []
                      , f = s.SHA256 = o.extend({
                        _doReset: function() {
                            this._hash = new i.init(a.slice(0))
                        },
                        _doProcessBlock: function(e, t) {
                            for (var r = this._hash.words, n = r[0], i = r[1], o = r[2], s = r[3], a = r[4], f = r[5], l = r[6], h = r[7], p = 0; p < 64; p++) {
                                if (p < 16)
                                    u[p] = 0 | e[t + p];
                                else {
                                    var d = u[p - 15]
                                      , y = (d << 25 | d >>> 7) ^ (d << 14 | d >>> 18) ^ d >>> 3
                                      , g = u[p - 2]
                                      , m = (g << 15 | g >>> 17) ^ (g << 13 | g >>> 19) ^ g >>> 10;
                                    u[p] = y + u[p - 7] + m + u[p - 16]
                                }
                                var v = n & i ^ n & o ^ i & o
                                  , b = (n << 30 | n >>> 2) ^ (n << 19 | n >>> 13) ^ (n << 10 | n >>> 22)
                                  , _ = h + ((a << 26 | a >>> 6) ^ (a << 21 | a >>> 11) ^ (a << 7 | a >>> 25)) + (a & f ^ ~a & l) + c[p] + u[p];
                                h = l,
                                l = f,
                                f = a,
                                a = s + _ | 0,
                                s = o,
                                o = i,
                                i = n,
                                n = _ + (b + v) | 0
                            }
                            r[0] = r[0] + n | 0,
                            r[1] = r[1] + i | 0,
                            r[2] = r[2] + o | 0,
                            r[3] = r[3] + s | 0,
                            r[4] = r[4] + a | 0,
                            r[5] = r[5] + f | 0,
                            r[6] = r[6] + l | 0,
                            r[7] = r[7] + h | 0
                        },
                        _doFinalize: function() {
                            var t = this._data
                              , r = t.words
                              , n = 8 * this._nDataBytes
                              , i = 8 * t.sigBytes;
                            return r[i >>> 5] |= 128 << 24 - i % 32,
                            r[14 + (i + 64 >>> 9 << 4)] = e.floor(n / 4294967296),
                            r[15 + (i + 64 >>> 9 << 4)] = n,
                            t.sigBytes = 4 * r.length,
                            this._process(),
                            this._hash
                        },
                        clone: function() {
                            var e = o.clone.call(this);
                            return e._hash = this._hash.clone(),
                            e
                        }
                    });
                    t.SHA256 = o._createHelper(f),
                    t.HmacSHA256 = o._createHmacHelper(f)
                }(Math),
                n.SHA256)
            }
            , function(e, t, r) {
                e.exports = function(e) {
                    return e.HmacSHA256
                }(r(3), (r(4),
                r(6)))
            }
            , function(e, t, r) {
                var n;
                e.exports = (n = r(3),
                void function() {
                    var e = n
                      , t = e.lib.Base
                      , r = e.enc.Utf8;
                    e.algo.HMAC = t.extend({
                        init: function(e, t) {
                            e = this._hasher = new e.init,
                            "string" == typeof t && (t = r.parse(t));
                            var n = e.blockSize
                              , i = 4 * n;
                            t.sigBytes > i && (t = e.finalize(t)),
                            t.clamp();
                            for (var o = this._oKey = t.clone(), s = this._iKey = t.clone(), a = o.words, c = s.words, u = 0; u < n; u++)
                                a[u] ^= 1549556828,
                                c[u] ^= 909522486;
                            o.sigBytes = s.sigBytes = i,
                            this.reset()
                        },
                        reset: function() {
                            var e = this._hasher;
                            e.reset(),
                            e.update(this._iKey)
                        },
                        update: function(e) {
                            return this._hasher.update(e),
                            this
                        },
                        finalize: function(e) {
                            var t = this._hasher
                              , r = t.finalize(e);
                            return t.reset(),
                            t.finalize(this._oKey.clone().concat(r))
                        }
                    })
                }())
            }
            , function(e, t) {
                var r = function() {
                    return this
                }();
                try {
                    r = r || new Function("return this")()
                } catch (e) {
                    "object" == typeof window && (r = window)
                }
                e.exports = r
            }
            , function(e, t, r) {
                "use strict";
                var n = window.URL || window.webkitURL;
                e.exports = function(t, r) {
                    try {
                        try {
                            var i;
                            try {
                                (i = new (window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder)).append(t),
                                i = i.getBlob()
                            } catch (e) {
                                i = new Blob([t])
                            }
                            return new Worker(n.createObjectURL(i))
                        } catch (e) {
                            return new Worker("data:application/javascript," + encodeURIComponent(t))
                        }
                    } catch (e) {
                        if (r)
                            return new Worker(r);
                        throw Error("Inline worker is not supported")
                    }
                }
            }
            , function(e, t, r) {
                "use strict";
                r.r(t),
                r.d(t, "default", (function() {
                    return rr
                }
                )),
                t = r(0);
                var n = r.n(t)
                  , i = {
                    debug: !1,
                    region: "cn",
                    initUploadFileUrl: "{tosDomain}/{oid}?uploads",
                    uploadChunkedUrl: "{tosDomain}/{oid}?partNumber={number}&uploadID={uploadId}",
                    uploadMergeUrl: "{tosDomain}/{oid}?uploadID={uploadId}",
                    getUploadListUrl: "{tosDomain}/{oid}?uploadID={uploadId}",
                    directUploadFileUrl: "{tosDomain}/{oid}",
                    external: {},
                    getSliceFunc: null,
                    uploadSliceCount: 3,
                    retryUploadTime: 2,
                    retryProcess: !0,
                    retryProcessTime: 3,
                    retryTaskTime: 2,
                    progressMonitorTime: 10,
                    progressMonitorSpeed: 50,
                    schema: "https",
                    replace: {}
                }
                  , o = function() {
                    return (o = Object.assign || function(e) {
                        for (var t, r = 1, n = arguments.length; r < n; r++)
                            for (var i in t = arguments[r])
                                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
                        return e
                    }
                    ).apply(this, arguments)
                };
                function s() {
                    for (var e = [], t = 0; t < arguments.length; t++)
                        e = e.concat(function(e, t) {
                            var r = "function" == typeof Symbol && e[Symbol.iterator];
                            if (!r)
                                return e;
                            var n, i, o = r.call(e), s = [];
                            try {
                                for (; (void 0 === t || 0 < t--) && !(n = o.next()).done; )
                                    s.push(n.value)
                            } catch (e) {
                                i = {
                                    error: e
                                }
                            } finally {
                                try {
                                    n && !n.done && (r = o.return) && r.call(o)
                                } finally {
                                    if (i)
                                        throw i.error
                                }
                            }
                            return s
                        }(arguments[t]));
                    return e
                }
                function a(e) {
                    return null != e && "[object Object]" == Object.prototype.toString.call(e)
                }
                function c(e) {
                    var t = document.createElement("a");
                    return t.href = e,
                    t
                }
                function u(e) {
                    var t = {};
                    try {
                        c(e).search.slice(1).split("&").forEach((function(e) {
                            var r, n, i = e.split("=");
                            i.length && (r = i[0],
                            n = i[1]);
                            try {
                                t[r] = decodeURIComponent(void 0 === n ? "" : n)
                            } catch (e) {
                                t[r] = n
                            }
                        }
                        ))
                    } catch (e) {}
                    return t
                }
                function f(e) {
                    for (var t = 0, r = 0, n = (e += "").length, i = 0; i < n; i++)
                        (0x7fffffffffff < (t = 31 * t + e.charCodeAt(r++)) || t < -0x800000000000) && (t &= 0xffffffffffff);
                    return t < 0 && (t += 0x7ffffffffffff),
                    t
                }
                var l, h = function() {
                    function e() {
                        this._hooks = {},
                        this._cache = [],
                        this._hooksCache = {}
                    }
                    return e.prototype.on = function(e, t) {
                        e && t && "function" == typeof t && (this._hooks[e] || (this._hooks[e] = []),
                        this._hooks[e].push(t))
                    }
                    ,
                    e.prototype.once = function(e, t) {
                        var r = this;
                        e && t && "function" == typeof t && this.on(e, (function n(i) {
                            t(i),
                            r.off(e, n)
                        }
                        ))
                    }
                    ,
                    e.prototype.off = function(e, t) {
                        e && this._hooks[e] && this._hooks[e].length && (t ? -1 !== (t = this._hooks[e].indexOf(t)) && this._hooks[e].splice(t, 1) : this._hooks[e] = [])
                    }
                    ,
                    e.prototype.emit = function(e, t, r) {
                        r ? e && (-1 !== this._cache.indexOf(r) ? this._emit(e, t) : (this._hooksCache.hasOwnProperty(r) || (this._hooksCache[r] = {}),
                        this._hooksCache[r].hasOwnProperty(e) || (this._hooksCache[r][e] = []),
                        this._hooksCache[r][e].push(t))) : this._emit(e, t)
                    }
                    ,
                    e.prototype._emit = function(e, t) {
                        e && this._hooks[e] && this._hooks[e].length && s(this._hooks[e]).forEach((function(e) {
                            try {
                                e(t)
                            } catch (e) {}
                        }
                        ))
                    }
                    ,
                    e.prototype.set = function(e) {
                        e && -1 === this._cache.indexOf(e) && this._cache.push(e)
                    }
                    ,
                    e
                }(), p = (l = +Date.now() + Number(("" + Math.random()).slice(2, 8)),
                (t = {
                    exports: {}
                }).exports = function() {
                    function e() {
                        for (var e = 0, t = {}; e < arguments.length; e++) {
                            var r, n = arguments[e];
                            for (r in n)
                                t[r] = n[r]
                        }
                        return t
                    }
                    function t(e) {
                        return e.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent)
                    }
                    return function r(n) {
                        function i() {}
                        function o(t, r, o) {
                            if ("undefined" != typeof document) {
                                "number" == typeof (o = e({
                                    path: "/"
                                }, i.defaults, o)).expires && (o.expires = new Date(+new Date + 864e5 * o.expires)),
                                o.expires = o.expires ? o.expires.toUTCString() : "";
                                try {
                                    var s = JSON.stringify(r);
                                    /^[\{\[]/.test(s) && (r = s)
                                } catch (e) {}
                                r = n.write ? n.write(r, t) : encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent),
                                t = encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape);
                                var a, c = "";
                                for (a in o)
                                    o[a] && (c += "; " + a,
                                    !0 !== o[a] && (c += "=" + o[a].split(";")[0]));
                                return document.cookie = t + "=" + r + c
                            }
                        }
                        function s(e, r) {
                            if ("undefined" != typeof document) {
                                for (var i = {}, o = document.cookie ? document.cookie.split("; ") : [], s = 0; s < o.length; s++) {
                                    var a = o[s].split("=")
                                      , c = a.slice(1).join("=");
                                    r || '"' !== c.charAt(0) || (c = c.slice(1, -1));
                                    try {
                                        var u = t(a[0]);
                                        if (c = (n.read || n)(c, u) || t(c),
                                        r)
                                            try {
                                                c = JSON.parse(c)
                                            } catch (e) {}
                                        if (i[u] = c,
                                        e === u)
                                            break
                                    } catch (e) {}
                                }
                                return e ? i[e] : i
                            }
                        }
                        return i.set = o,
                        i.get = function(e) {
                            return s(e, !1)
                        }
                        ,
                        i.getJSON = function(e) {
                            return s(e, !0)
                        }
                        ,
                        i.remove = function(t, r) {
                            o(t, "", e(r, {
                                expires: -1
                            }))
                        }
                        ,
                        i.defaults = {},
                        i.withConverter = r,
                        i
                    }((function() {}
                    ))
                }(),
                t.exports), d = function() {
                    function e() {
                        this.cache = {}
                    }
                    return e.prototype.setItem = function(e, t) {
                        this.cache[e] = t
                    }
                    ,
                    e.prototype.getItem = function(e) {
                        return this.cache[e]
                    }
                    ,
                    e.prototype.removeItem = function(e) {
                        this.cache[e] = void 0
                    }
                    ,
                    e.prototype.getCookie = function(e) {
                        this.getItem(e)
                    }
                    ,
                    e.prototype.setCookie = function(e, t) {
                        this.setItem(e, t)
                    }
                    ,
                    e
                }(), y = {
                    getItem: function(e) {
                        try {
                            var t = localStorage.getItem(e)
                              , r = t;
                            try {
                                t && "string" == typeof t && (r = JSON.parse(t))
                            } catch (e) {}
                            return r || {}
                        } catch (e) {}
                        return {}
                    },
                    setItem: function(e, t) {
                        try {
                            var r = "string" == typeof t ? t : JSON.stringify(t);
                            localStorage.setItem(e, r)
                        } catch (e) {}
                    },
                    removeItem: function(e) {
                        try {
                            localStorage.removeItem(e)
                        } catch (e) {}
                    },
                    getCookie: function(e, t) {
                        try {
                            return p.get(e, {
                                domain: t || document.domain
                            })
                        } catch (e) {
                            return ""
                        }
                    },
                    setCookie: function(e, t, r, n) {
                        try {
                            var i = n || document.domain
                              , o = +new Date + r;
                            p.set(e, t, {
                                expires: new Date(o),
                                path: "/",
                                domain: i
                            })
                        } catch (e) {}
                    },
                    isSupportLS: function() {
                        try {
                            return localStorage.setItem("_ranger-test-key", "hi"),
                            localStorage.getItem("_ranger-test-key"),
                            localStorage.removeItem("_ranger-test-key"),
                            !0
                        } catch (e) {
                            return !1
                        }
                    }()
                }, g = {
                    getItem: function(e) {
                        try {
                            var t = sessionStorage.getItem(e)
                              , r = t;
                            try {
                                t && "string" == typeof t && (r = JSON.parse(t))
                            } catch (e) {}
                            return r || {}
                        } catch (e) {}
                        return {}
                    },
                    setItem: function(e, t) {
                        try {
                            var r = "string" == typeof t ? t : JSON.stringify(t);
                            sessionStorage.setItem(e, r)
                        } catch (e) {}
                    },
                    removeItem: function(e) {
                        try {
                            sessionStorage.removeItem(e)
                        } catch (e) {}
                    },
                    getCookie: function(e) {
                        this.getItem(e)
                    },
                    setCookie: function(e, t) {
                        this.setItem(e, t)
                    },
                    isSupportSession: function() {
                        try {
                            return sessionStorage.setItem("_ranger-test-key", "hi"),
                            sessionStorage.getItem("_ranger-test-key"),
                            sessionStorage.removeItem("_ranger-test-key"),
                            !0
                        } catch (e) {
                            return !1
                        }
                    }()
                }, m = function() {
                    function e(e, t) {
                        this._storage = t && "session" === t ? g : !e && y.isSupportLS ? y : new d
                    }
                    return e.prototype.getItem = function(e) {
                        return this._storage.getItem(e)
                    }
                    ,
                    e.prototype.setItem = function(e, t) {
                        this._storage.setItem(e, t)
                    }
                    ,
                    e.prototype.getCookie = function(e, t) {
                        return this._storage.getCookie(e, t)
                    }
                    ,
                    e.prototype.setCookie = function(e, t, r, n) {
                        this._storage.setCookie(e, t, r, n)
                    }
                    ,
                    e.prototype.removeItem = function(e) {
                        this._storage.removeItem(e)
                    }
                    ,
                    e
                }(), v = function() {
                    function e(e, t, r) {
                        this.appid = e,
                        this.domain = t,
                        this.userAgent = window.navigator.userAgent,
                        this.appVersion = window.navigator.appVersion,
                        this.cookie_expire = r
                    }
                    return e.prototype.init = function() {
                        var e = window.navigator.userAgent
                          , t = window.navigator.language
                          , r = document.referrer
                          , n = r ? c(r).hostname : ""
                          , i = u(window.location.href)
                          , o = /Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion) ? "wap" : "web"
                          , s = (this.utm = function(e, t, r, n) {
                            var i = new m(!1)
                              , o = new m(!1,"session")
                              , s = e ? "_tea_utm_cache_" + e : "_tea_utm_cache"
                              , a = e ? "_$utm_from_url_" + e : "_$utm_from_url"
                              , c = {}
                              , u = ["tr_shareuser", "tr_admaster", "tr_param1", "tr_param2", "tr_param3", "tr_param4", "$utm_from_url"]
                              , f = {
                                ad_id: Number(t.ad_id) || void 0,
                                campaign_id: Number(t.campaign_id) || void 0,
                                creative_id: Number(t.creative_id) || void 0,
                                utm_source: t.utm_source,
                                utm_medium: t.utm_medium,
                                utm_campaign: t.utm_campaign,
                                utm_term: t.utm_term,
                                utm_content: t.utm_content,
                                tr_shareuser: t.tr_shareuser,
                                tr_admaster: t.tr_admaster,
                                tr_param1: t.tr_param1,
                                tr_param2: t.tr_param2,
                                tr_param3: t.tr_param3,
                                tr_param4: t.tr_param4
                            };
                            try {
                                var l, h, p = !1;
                                for (l in f)
                                    f[l] && (-1 !== u.indexOf(l) ? (c.hasOwnProperty("tracer_data") || (c.tracer_data = {}),
                                    c.tracer_data[l] = f[l]) : c[l] = f[l],
                                    p = !0);
                                p ? (o.setItem(a, "1"),
                                i.setCookie(s, JSON.stringify(c), n, r)) : (h = i.getCookie(s, r)) && (c = JSON.parse(h)),
                                o.getItem(a) && (c.hasOwnProperty("tracer_data") || (c.tracer_data = {}),
                                c.tracer_data.$utm_from_url = 1)
                            } catch (e) {
                                return f
                            }
                            return c
                        }(this.appid, i, this.domain, this.cookie_expire),
                        i = this.browser(),
                        this.os());
                        return {
                            browser: i.browser,
                            browser_version: i.browser_version,
                            platform: o,
                            os_name: s.os_name,
                            os_version: s.os_version,
                            userAgent: e,
                            screen_width: window.screen && window.screen.width,
                            screen_height: window.screen && window.screen.height,
                            device_model: this.getDeviceModel(s.os_name),
                            language: t,
                            referrer: r,
                            referrer_host: n,
                            utm: this.utm,
                            latest_data: this.last(r, n)
                        }
                    }
                    ,
                    e.prototype.last = function(e, t) {
                        var r = ""
                          , n = ""
                          , i = ""
                          , o = location.hostname
                          , s = !1;
                        return e && t && o !== t && (n = t,
                        s = !0,
                        (o = u(r = e)).keyword && (i = o.keyword)),
                        {
                            $latest_referrer: r,
                            $latest_referrer_host: n,
                            $latest_search_keyword: i,
                            isLast: s
                        }
                    }
                    ,
                    e.prototype.browser = function() {
                        var e, t = "", r = "" + parseFloat(this.appVersion), n = this.userAgent;
                        return -1 !== n.indexOf("Edge") || -1 !== n.indexOf("Edg") ? (t = "Microsoft Edge",
                        r = -1 !== n.indexOf("Edge") ? (e = n.indexOf("Edge"),
                        n.substring(e + 5)) : (e = n.indexOf("Edg"),
                        n.substring(e + 4))) : -1 !== (e = n.indexOf("MSIE")) ? (t = "Microsoft Internet Explorer",
                        r = n.substring(e + 5)) : -1 !== (e = n.indexOf("Lark")) ? (t = "Lark",
                        r = n.substring(e + 5, e + 11)) : -1 !== (e = n.indexOf("MetaSr")) ? (t = "sougoubrowser",
                        r = n.substring(e + 7, e + 10)) : -1 !== n.indexOf("MQQBrowser") || -1 !== n.indexOf("QQBrowser") ? (t = "qqbrowser",
                        -1 !== n.indexOf("MQQBrowser") ? (e = n.indexOf("MQQBrowser"),
                        r = n.substring(e + 11, e + 15)) : -1 !== n.indexOf("QQBrowser") && (e = n.indexOf("QQBrowser"),
                        r = n.substring(e + 10, e + 17))) : -1 !== n.indexOf("Chrome") ? -1 !== (e = n.indexOf("MicroMessenger")) ? (t = "weixin",
                        r = n.substring(e + 15, e + 20)) : -1 !== (e = n.indexOf("360")) ? (t = "360browser",
                        r = n.substring(n.indexOf("Chrome") + 7)) : -1 !== n.indexOf("baidubrowser") || -1 !== n.indexOf("BIDUBrowser") ? (-1 !== n.indexOf("baidubrowser") ? (e = n.indexOf("baidubrowser"),
                        r = n.substring(e + 13, e + 16)) : -1 !== n.indexOf("BIDUBrowser") && (e = n.indexOf("BIDUBrowser"),
                        r = n.substring(e + 12, e + 15)),
                        t = "baidubrowser") : -1 !== (e = n.indexOf("xiaomi")) ? r = -1 !== n.indexOf("openlanguagexiaomi") ? (t = "openlanguage xiaomi",
                        n.substring(e + 7, e + 13)) : (t = "xiaomi",
                        n.substring(e - 7, e - 1)) : -1 !== (e = n.indexOf("TTWebView")) ? (t = "TTWebView",
                        r = n.substring(e + 10, e + 23)) : -1 === (e = n.indexOf("Chrome")) && -1 === (e = n.indexOf("Chrome")) || (t = "Chrome",
                        r = n.substring(e + 7)) : -1 !== n.indexOf("Safari") ? -1 !== (e = n.indexOf("QQ")) ? (t = "qqbrowser",
                        r = n.substring(e + 10, e + 16)) : -1 !== (e = n.indexOf("Safari")) && (t = "Safari",
                        r = n.substring(e + 7),
                        -1 !== (e = n.indexOf("Version")) && (r = n.substring(e + 8))) : -1 !== (e = n.indexOf("Firefox")) ? (t = "Firefox",
                        r = n.substring(e + 8)) : -1 !== (e = n.indexOf("MicroMessenger")) ? (t = "weixin",
                        r = n.substring(e + 15, e + 20)) : -1 !== (e = n.indexOf("QQ")) && (t = "qqbrowser",
                        r = n.substring(e + 3, e + 8)),
                        {
                            browser: t,
                            browser_version: r = -1 !== (n = (r = -1 !== (n = (r = -1 !== (n = r.indexOf(";")) ? r.substring(0, n) : r).indexOf(" ")) ? r.substring(0, n) : r).indexOf(")")) ? r.substring(0, n) : r
                        }
                    }
                    ,
                    e.prototype.os = function() {
                        for (var e = "", t = "", r = [{
                            s: "Windows 10",
                            r: /(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/
                        }, {
                            s: "Windows 8.1",
                            r: /(Windows 8.1|Windows NT 6.3)/
                        }, {
                            s: "Windows 8",
                            r: /(Windows 8|Windows NT 6.2)/
                        }, {
                            s: "Windows 7",
                            r: /(Windows 7|Windows NT 6.1)/
                        }, {
                            s: "Android",
                            r: /Android/
                        }, {
                            s: "Sun OS",
                            r: /SunOS/
                        }, {
                            s: "Linux",
                            r: /(Linux|X11)/
                        }, {
                            s: "iOS",
                            r: /(iPhone|iPad|iPod)/
                        }, {
                            s: "Mac OS X",
                            r: /Mac OS X/
                        }, {
                            s: "Mac OS",
                            r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/
                        }], n = 0; n < r.length; n++) {
                            var i = r[n];
                            if (i.r.test(this.userAgent)) {
                                "Mac OS X" === (e = i.s) && this.isNewIpad() && (e = "iOS");
                                break
                            }
                        }
                        function o(e, t) {
                            return (e = e.exec(t)) && e[1] ? e[1] : ""
                        }
                        function s(e, t) {
                            return (e = RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:" + e + ")", "i").exec(t)) ? e.slice(1)[0] : ""
                        }
                        var a, c;
                        switch (/Windows/.test(e) && (t = o(/Windows (.*)/, e),
                        e = "windows"),
                        e) {
                        case "Mac OS X":
                            t = s("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?", this.userAgent),
                            e = "mac";
                            break;
                        case "Android":
                            t = c = (c = o(/Android ([\.\_\d]+)/, a = this.userAgent)) ? c : o(/Android\/([\.\_\d]+)/, a),
                            e = "android";
                            break;
                        case "iOS":
                            t = this.isNewIpad() ? s("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?", this.userAgent) : (t = /OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion)) ? t[1] + "." + t[2] + "." + (0 | t[3]) : "",
                            e = "ios"
                        }
                        return {
                            os_name: e,
                            os_version: t
                        }
                    }
                    ,
                    e.prototype.getDeviceModel = function(e) {
                        var t, r, n = "";
                        try {
                            "android" === e ? navigator.userAgent.split(";").forEach((function(e) {
                                -1 < e.indexOf("Build/") && (n = e.slice(0, e.indexOf("Build/")))
                            }
                            )) : "ios" !== e && "mac" !== e && "windows" !== e || (n = this.isNewIpad() ? "iPad" : (r = (t = navigator.userAgent.replace("Mozilla/5.0 (", "")).indexOf(";"),
                            t.slice(0, r)))
                        } catch (e) {
                            return n.trim()
                        }
                        return n.trim()
                    }
                    ,
                    e.prototype.isNewIpad = function() {
                        return void 0 !== this.userAgent && "MacIntel" === navigator.platform && "number" == typeof navigator.maxTouchPoints && 1 < navigator.maxTouchPoints
                    }
                    ,
                    e
                }(), b = {
                    cn: "1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",
                    sg: "1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",
                    va: "1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"
                }, _ = "5.0.23_3", w = void 0, k = (t = (new Date).getTimezoneOffset(),
                parseInt("" + -t / 60, 10)), S = 60 * t, x = function() {
                    function e(e) {
                        this.is_first_time = !0,
                        this.configPersist = !1,
                        this.initConfig = e;
                        var t = new v(e.app_id,e.cookie_domain || "",e.cookie_expire || 6048e5).init()
                          , r = "__tea_cache_first_" + e.app_id;
                        this.configKey = "__tea_cache_config_" + e.app_id,
                        this.sessionStorage = new m(!1,"session"),
                        this.localStorage = new m(!1,"local"),
                        e.configPersist && (this.configPersist = !0,
                        this.storage = 1 === e.configPersist ? this.sessionStorage : this.localStorage),
                        this.localStorage.getItem(r) ? this.is_first_time = !1 : (this.is_first_time = !0,
                        this.localStorage.setItem(r, "1")),
                        this.envInfo = {
                            user: {
                                user_unique_id: w,
                                user_type: w,
                                user_id: w,
                                user_is_auth: w,
                                user_is_login: w,
                                device_id: w,
                                web_id: w,
                                ip_addr_id: w
                            },
                            header: {
                                app_id: w,
                                app_name: w,
                                app_install_id: w,
                                install_id: w,
                                app_package: w,
                                app_channel: w,
                                app_version: w,
                                os_name: t.os_name,
                                os_version: t.os_version,
                                device_model: t.device_model,
                                ab_client: w,
                                traffic_type: w,
                                client_ip: w,
                                device_brand: w,
                                os_api: w,
                                access: w,
                                language: t.language,
                                region: w,
                                app_language: w,
                                app_region: w,
                                ab_version: w,
                                creative_id: t.utm.creative_id,
                                ad_id: t.utm.ad_id,
                                campaign_id: t.utm.campaign_id,
                                log_type: w,
                                rnd: w,
                                platform: t.platform,
                                sdk_version: _,
                                sdk_lib: "js",
                                province: w,
                                city: w,
                                timezone: k,
                                tz_offset: S,
                                tz_name: w,
                                sim_region: w,
                                carrier: w,
                                resolution: t.screen_width + "x" + t.screen_height,
                                browser: t.browser,
                                browser_version: t.browser_version,
                                referrer: t.referrer,
                                referrer_host: t.referrer_host,
                                width: t.screen_width,
                                height: t.screen_height,
                                screen_width: t.screen_width,
                                screen_height: t.screen_height,
                                utm_term: t.utm.utm_term,
                                utm_content: t.utm.utm_content,
                                utm_source: t.utm.utm_source,
                                utm_medium: t.utm.utm_medium,
                                utm_campaign: t.utm.utm_campaign,
                                tracer_data: JSON.stringify(t.utm.tracer_data),
                                custom: {},
                                wechat_unionid: w,
                                wechat_openid: w
                            }
                        },
                        this.ab_version = "",
                        this.evtParams = {},
                        this.reportErrorCallback = function() {}
                        ,
                        this.initDomain()
                    }
                    return e.prototype.initDomain = function() {
                        var e = this.initConfig.channel_domain;
                        e ? this.domain = e : (e = this.initConfig.channel,
                        this.domain = function(e) {
                            return function(e, t) {
                                if ("string" == typeof e && "number" == typeof t) {
                                    for (var r = [], n = (t = t <= 25 ? t : t % 25,
                                    String.fromCharCode(t + 97)), i = e.split(n), o = 0; o < i.length; o++) {
                                        var s = 64 ^ +parseInt(i[o], t);
                                        s = String.fromCharCode(s),
                                        r.push(s)
                                    }
                                    return r.join("")
                                }
                            }(e, 25)
                        }(b[e]))
                    }
                    ,
                    e.prototype.setDomain = function(e) {
                        this.domain = e
                    }
                    ,
                    e.prototype.getDomain = function() {
                        return this.domain
                    }
                    ,
                    e.prototype.setAbVersion = function(e) {
                        this.ab_version = e
                    }
                    ,
                    e.prototype.getAbVersion = function() {
                        return this.ab_version
                    }
                    ,
                    e.prototype.getUrl = function(e) {
                        var t = "";
                        switch (e) {
                        case "event":
                            t = this.initConfig.report_url || "/list";
                            break;
                        case "webid":
                            t = "/webid";
                            break;
                        case "tobid":
                            t = "/tobid"
                        }
                        return e = "",
                        this.initConfig.caller && (e = "?sdk_version=" + _ + "&sdk_name=web&app_id=" + this.initConfig.app_id + "&caller=" + this.initConfig.caller),
                        "" + this.getDomain() + t + e
                    }
                    ,
                    e.prototype.set = function(e) {
                        var t = this;
                        Object.keys(e).forEach((function(r) {
                            var n, i, s;
                            void 0 !== e[r] && null !== e[r] || t.delete(r),
                            "evtParams" === r ? t.evtParams = o({}, t.evtParams || {}, e.evtParams || {}) : "_staging_flag" === r ? t.evtParams = o({}, t.evtParams || {}, {
                                _staging_flag: e._staging_flag
                            }) : "reportErrorCallback" === r && "function" == typeof e[r] ? t.reportErrorCallback = e[r] : (s = i = "",
                            -1 < r.indexOf(".") && (i = (n = r.split("."))[0],
                            s = n[1]),
                            i ? "user" === i || "header" === i ? t.envInfo[i][s] = e[r] : t.envInfo.header.custom[s] = e[r] : t.envInfo.user.hasOwnProperty(r) ? -1 < ["user_type", "ip_addr_id"].indexOf(r) ? t.envInfo.user[r] = e[r] && Number(e[r]) : -1 < ["user_id", "web_id", "user_unique_id"].indexOf(r) ? t.envInfo.user[r] = e[r] && String(e[r]) : -1 < ["user_is_auth", "user_is_login"].indexOf(r) ? t.envInfo.user[r] = Boolean(e[r]) : "device_id" === r && (t.envInfo.user[r] = e[r]) : t.envInfo.header.hasOwnProperty(r) ? t.envInfo.header[r] = e[r] : t.envInfo.header.custom[r] = e[r])
                        }
                        ))
                    }
                    ,
                    e.prototype.get = function(e) {
                        try {
                            return e ? "evtParams" === e ? this.evtParams : "reportErrorCallback" === e ? this[e] : this.envInfo.user.hasOwnProperty(e) ? this.envInfo.user[e] : this.envInfo.header.hasOwnProperty(e) ? this.envInfo.header[e] : JSON.parse(JSON.stringify(this.envInfo[e])) : JSON.parse(JSON.stringify(this.envInfo))
                        } catch (e) {}
                    }
                    ,
                    e.prototype.setStore = function(e) {
                        try {
                            if (!this.configPersist)
                                return;
                            var t, r = this.storage.getItem(this.configKey) || {};
                            r && Object.keys(e).length && (t = Object.assign(e, r),
                            this.storage.setItem(this.configKey, t))
                        } catch (e) {}
                    }
                    ,
                    e.prototype.getStore = function() {
                        try {
                            if (!this.configPersist)
                                return null;
                            var e = this.storage.getItem(this.configKey);
                            return e && Object.keys(e).length ? e : null
                        } catch (e) {
                            return null
                        }
                    }
                    ,
                    e.prototype.delete = function(e) {
                        try {
                            if (!this.configPersist)
                                return;
                            var t = this.storage.getItem(this.configKey);
                            t && t.hasOwnProperty(e) && (delete t[e],
                            this.storage.setItem(this.configKey, t))
                        } catch (e) {}
                    }
                    ,
                    e
                }(), O = function() {
                    function e(e, t) {
                        this.isLog = t || !1,
                        this.name = e || ""
                    }
                    return e.prototype.info = function(e) {
                        this.isLog
                    }
                    ,
                    e.prototype.warn = function(e) {
                        this.isLog
                    }
                    ,
                    e.prototype.error = function(e) {
                        this.isLog
                    }
                    ,
                    e.prototype.throw = function(e) {
                        throw this.error(this.name),
                        new Error(e)
                    }
                    ,
                    e
                }(), C = (function(e) {
                    e.Init = "init",
                    e.Config = "config",
                    e.Start = "start",
                    e.Ready = "ready",
                    e.TokenComplete = "token-complete",
                    e.TokenStorage = "token-storage",
                    e.TokenFetch = "token-fetch",
                    e.TokenError = "token-error",
                    e.ConfigUuid = "config-uuid",
                    e.ConfigWebId = "config-webid",
                    e.ConfigDomain = "config-domain",
                    e.CustomWebId = "custom-webid",
                    e.TokenChange = "token-change",
                    e.TokenReset = "token-reset",
                    e.ConfigTransform = "config-transform",
                    e.EnvTransform = "env-transform",
                    e.SessionReset = "session-reset",
                    e.SessionResetTime = "session-reset-time",
                    e.Event = "event",
                    e.Events = "events",
                    e.EventNow = "event-now",
                    e.CleanEvents = "clean-events",
                    e.BeconEvent = "becon-event",
                    e.SubmitBefore = "submit-before",
                    e.SubmitScuess = "submit-scuess",
                    e.SubmitAfter = "submit-after",
                    e.SubmitError = "submit-error",
                    e.SubmitVerify = "submit-verify",
                    e.Stay = "stay",
                    e.ResetStay = "reset-stay",
                    e.StayReady = "stay-ready",
                    e.SetStay = "set-stay",
                    e.RouteChange = "route-change",
                    e.RouteReady = "route-ready",
                    e.Ab = "ab",
                    e.AbVar = "ab-var",
                    e.AbAllVars = "ab-all-vars",
                    e.AbConfig = "ab-config",
                    e.AbExternalVersion = "ab-external-version",
                    e.AbVersionChangeOn = "ab-version-change-on",
                    e.AbVersionChangeOff = "ab-version-change-off",
                    e.AbOpenLayer = "ab-open-layer",
                    e.AbCloseLayer = "ab-close-layer",
                    e.AbReady = "ab-ready",
                    e.AbComplete = "ab-complete",
                    e.Profile = "profile",
                    e.ProfileSet = "profile-set",
                    e.ProfileSetOnce = "profile-set-once",
                    e.ProfileUnset = "profile-unset",
                    e.ProfileIncrement = "profile-increment",
                    e.ProfileAppend = "profile-append",
                    e.ProfileClear = "profile-clear",
                    e.Autotrack = "autotrack",
                    e.AutotrackReady = "autotrack-ready",
                    e.CepReady = "cep-ready",
                    e.TracerReady = "tracer-ready"
                }(L = L || {}),
                L), T = function() {
                    function e(e) {
                        this.native = e
                    }
                    var t = e.prototype;
                    return t.bridgeInject = function() {
                        try {
                            return !!this.native && !!AppLogBridge
                        } catch (e) {
                            return !1
                        }
                    }
                    ,
                    t.bridgeReady = function() {
                        var e = this;
                        return new Promise((function(t, r) {
                            try {
                                e.bridgeInject() ? AppLogBridge.hasStarted((function(e) {
                                    e ? t(!0) : r(!1)
                                }
                                )) : r(!1)
                            } catch (e) {
                                r(!1)
                            }
                        }
                        ))
                    }
                    ,
                    t.setConfig = function(e) {
                        var t = this;
                        try {
                            Object.keys(e).forEach((function(r) {
                                "user_unique_id" === r ? t.setUserUniqueId(e[r]) : config[r] ? t.addHeaderInfo(r, e[r]) : t.removeHeaderInfo(r)
                            }
                            ))
                        } catch (e) {}
                    }
                    ,
                    t.setUserUniqueId = function(e) {
                        try {
                            AppLogBridge.setUserUniqueId(e)
                        } catch (e) {}
                    }
                    ,
                    t.addHeaderInfo = function(e, t) {
                        try {
                            AppLogBridge.addHeaderInfo(e, t)
                        } catch (e) {}
                    }
                    ,
                    t.setHeaderInfo = function(e) {
                        try {
                            AppLogBridge.setHeaderInfo(JSON.stringify(e))
                        } catch (e) {}
                    }
                    ,
                    t.removeHeaderInfo = function(e) {
                        try {
                            AppLogBridge.removeHeaderInfo(e)
                        } catch (e) {}
                    }
                    ,
                    t.reportPv = function(e) {
                        this.onEventV3("predefine_pageview", e)
                    }
                    ,
                    t.onEventV3 = function(e, t) {
                        try {
                            AppLogBridge.onEventV3(e, t)
                        } catch (e) {}
                    }
                    ,
                    t.profileSet = function(e) {
                        try {
                            AppLogBridge.profileSet(e)
                        } catch (e) {}
                    }
                    ,
                    t.profileSetOnce = function(e) {
                        try {
                            AppLogBridge.profileSetOnce(e)
                        } catch (e) {}
                    }
                    ,
                    t.profileIncrement = function(e) {
                        try {
                            AppLogBridge.profileIncrement(e)
                        } catch (e) {}
                    }
                    ,
                    t.profileUnset = function(e) {
                        try {
                            AppLogBridge.profileUnset(e)
                        } catch (e) {}
                    }
                    ,
                    t.profileAppend = function(e) {
                        try {
                            AppLogBridge.profileAppend(e)
                        } catch (e) {}
                    }
                    ,
                    e
                }(), I = 500, j = 5005;
                function P(e, t, r, n, i, o, s, a) {
                    try {
                        var c = new XMLHttpRequest
                          , u = a || "POST";
                        c.open(u, "" + e, !0),
                        c.setRequestHeader("Content-Type", "application/json; charset=utf-8"),
                        s && c.setRequestHeader("X-MCS-AppKey", "" + s),
                        n && (c.withCredentials = !0),
                        c.onload = function() {
                            if (i) {
                                var r = null;
                                if (c.responseText) {
                                    try {
                                        r = JSON.parse(c.responseText)
                                    } catch (e) {
                                        r = {}
                                    }
                                    i(r, t)
                                }
                            }
                        }
                        ,
                        r && (c.timeout = r,
                        c.ontimeout = function() {
                            o && o(t, j)
                        }
                        ),
                        c.onerror = function() {
                            c.abort(),
                            o && o(t, I)
                        }
                        ,
                        c.send(JSON.stringify(t))
                    } catch (e) {}
                }
                function D(e, t, r, n) {
                    try {
                        var i = e.match(/\/v\d\//)
                          , o = i ? i[0] : -1 !== e.indexOf("/v1/") ? "/v1/" : "/v2/"
                          , s = e.split(o)[0];
                        if (!s)
                            return void n(e, t, B);
                        t.forEach((function(i) {
                            i = function(e) {
                                var t, r = "";
                                for (t in e)
                                    e.hasOwnProperty(t) && void 0 !== e[t] && (r += "&" + t + "=" + encodeURIComponent(JSON.stringify(e[t])));
                                return "&" === r[0] ? r.slice(1) : r
                            }(i);
                            var o = new Image(1,1);
                            o.onload = function() {
                                o = null,
                                r && r()
                            }
                            ,
                            o.onerror = function() {
                                o = null,
                                n && n(e, t, z)
                            }
                            ,
                            o.src = s + "/gif?" + i
                        }
                        ))
                    } catch (r) {
                        n && n(e, t, F, r.message)
                    }
                }
                function A(e, t, r, n, i, o, s) {
                    var a = window.navigator.userAgent;
                    if (-1 === window.navigator.appName.indexOf("Microsoft Internet Explorer") || -1 === a.indexOf("MSIE 8.0") && -1 === a.indexOf("MSIE 9.0")) {
                        if (s)
                            return window.navigator && window.navigator.sendBeacon ? window.navigator.sendBeacon(e, JSON.stringify(t)) ? i() : o(e, t, 4003) : D(e, t, i, o)
                    } else
                        D(e, t, i, o);
                    P(e, t, r, n, i, o)
                }
                function E() {
                    return function e(t) {
                        return t ? (t ^ 16 * Math.random() >> t / 4).toString(10) : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, e)
                    }().replace(/-/g, "").slice(0, 19)
                }
                function U() {
                    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (function(e) {
                        var t = 16 * Math.random() | 0;
                        return ("x" === e ? t : 3 & t | 8).toString(16)
                    }
                    ))
                }
                var B = 4001
                  , z = 4e3
                  , F = 4002
                  , R = function() {
                    function e() {
                        this.eventLimit = 50,
                        this.enable_ttwebid = !1,
                        this.eventCache = [],
                        this.beconEventCache = []
                    }
                    return e.prototype.apply = function(e, t) {
                        var r = this;
                        this.collect = e,
                        this.config = t,
                        this.configManager = e.configManager,
                        this.cacheStorgae = new m(!0),
                        this.localStorage = new m(!1),
                        this.maxReport = t.max_report || 10,
                        this.reportTime = t.reportTime || 30,
                        this.timeout = t.timeout || 1e5,
                        this.enable_ttwebid = t.enable_ttwebid,
                        this.reportUrl = this.configManager.getUrl("event"),
                        this.eventKey = "__tea_cache_events_" + this.configManager.get("app_id"),
                        this.beconKey = "__tea_cache_events_becon_" + this.configManager.get("app_id"),
                        this.abKey = "__tea_sdk_ab_version_" + this.configManager.get("app_id"),
                        this.collect.on(C.Ready, (function() {
                            r.reportAll(!1)
                        }
                        )),
                        this.collect.on(C.ConfigDomain, (function() {
                            r.reportUrl = r.configManager.getUrl("event")
                        }
                        )),
                        this.collect.on(C.Event, (function(e) {
                            r.event(e)
                        }
                        )),
                        this.collect.on(C.BeconEvent, (function(e) {
                            r.beconEvent(e)
                        }
                        )),
                        this.collect.on(C.CleanEvents, (function() {
                            r.reportAll(!1)
                        }
                        )),
                        this.linster()
                    }
                    ,
                    e.prototype.linster = function() {
                        var e = this;
                        window.addEventListener("unload", (function() {
                            e.reportAll(!0)
                        }
                        ), !1),
                        function(e) {
                            navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/) ? window.addEventListener("pagehide", e, !1) : window.addEventListener("beforeunload", e, !1)
                        }((function() {
                            e.reportAll(!0)
                        }
                        )),
                        document.addEventListener("visibilitychange", (function() {
                            "hidden" === document.visibilityState && e.reportAll(!0)
                        }
                        ), !1)
                    }
                    ,
                    e.prototype.reportAll = function(e) {
                        this.report(e),
                        this.reportBecon()
                    }
                    ,
                    e.prototype.event = function(e) {
                        var t = this;
                        try {
                            var r, n = s(e, this.cacheStorgae.getItem(this.eventKey) || []);
                            this.cacheStorgae.setItem(this.eventKey, n),
                            this.reportTimeout && clearTimeout(this.reportTimeout),
                            n.length >= this.maxReport ? this.report(!1) : (r = this.reportTime,
                            this.reportTimeout = setTimeout((function() {
                                t.report(!1),
                                t.reportTimeout = null
                            }
                            ), r))
                        } catch (e) {}
                    }
                    ,
                    e.prototype.beconEvent = function(e) {
                        e = s(e, this.cacheStorgae.getItem(this.beconKey) || []),
                        this.cacheStorgae.setItem(this.beconKey, e),
                        this.collect.destroyInstance || this.collect.tokenManager.getReady() && this.collect.sdkReady && (this.cacheStorgae.removeItem(this.beconKey),
                        this.send(this.split(this.merge(e)), !0))
                    }
                    ,
                    e.prototype.reportBecon = function() {
                        var e = this.cacheStorgae.getItem(this.beconKey) || [];
                        e && e.length && (this.cacheStorgae.removeItem(this.beconKey),
                        this.send(this.split(this.merge(e)), !0))
                    }
                    ,
                    e.prototype.report = function(e) {
                        var t;
                        !this.collect.destroyInstance && this.collect.tokenManager.getReady() && this.collect.sdkReady && (t = this.cacheStorgae.getItem(this.eventKey) || []).length && (this.cacheStorgae.removeItem(this.eventKey),
                        this.sliceEvent(t, e))
                    }
                    ,
                    e.prototype.sliceEvent = function(e, t) {
                        if (e.length > this.eventLimit)
                            for (var r = 0; r < e.length; r += this.eventLimit) {
                                var n = e.slice(r, r + this.eventLimit)
                                  , i = this.split(this.merge(n));
                                this.send(i, t)
                            }
                        else
                            i = this.split(this.merge(e)),
                            this.send(i, t)
                    }
                    ,
                    e.prototype.merge = function(e) {
                        var t = this
                          , r = (s = this.configManager.get()).header
                          , n = s.user
                          , i = (r.custom = JSON.stringify(r.custom),
                        this.configManager.get("evtParams"))
                          , s = e.map((function(e) {
                            Object.keys(i).length && (e.params = o({}, i, e.params));
                            var r = t.localStorage.getItem(t.abKey);
                            return r && r.uuid && r.uuid === n.user_unique_id && t.configManager.getAbVersion() && (e.ab_sdk_version = t.configManager.getAbVersion()),
                            e.session_id = t.collect.sessionManager.getSessionId(),
                            e.params = JSON.stringify(e.params),
                            e
                        }
                        ));
                        return ((e = JSON.parse(JSON.stringify({
                            events: s,
                            user: n,
                            header: r
                        }))).local_time = Math.floor(Date.now() / 1e3),
                        e.user_unique_type = this.config.enable_ttwebid ? this.config.user_unique_type : void 0,
                        s = []).push(e),
                        s
                    }
                    ,
                    e.prototype.split = function(e) {
                        return e.map((function(e) {
                            var t = [];
                            return t.push(e),
                            t
                        }
                        ))
                    }
                    ,
                    e.prototype.send = function(e, t) {
                        var r = this;
                        e.length && e.forEach((function(e) {
                            try {
                                var n = JSON.parse(JSON.stringify(e))
                                  , i = (r.config.filter && (n = r.config.filter(n)),
                                r.collect.eventFilter && n && (n = r.collect.eventFilter(n)),
                                n || e);
                                r.collect.emit(C.SubmitBefore, i),
                                r.collect.emit(C.SubmitVerify, i),
                                A(r.reportUrl, i, r.timeout, r.enable_ttwebid, (function(e, t) {
                                    e && 0 !== e.e ? r.collect.emit(C.SubmitError, {
                                        type: "f_data",
                                        eventData: t,
                                        errorCode: e.e,
                                        response: e
                                    }) : r.collect.emit(C.SubmitScuess, {
                                        eventData: t,
                                        res: e
                                    })
                                }
                                ), (function(e, t) {
                                    r.configManager.get("reportErrorCallback")(e, t),
                                    r.collect.emit(C.SubmitError, {
                                        type: "f_net",
                                        eventData: e,
                                        errorCode: t
                                    })
                                }
                                ), t),
                                r.collect.emit(C.SubmitAfter, i)
                            } catch (e) {}
                        }
                        ))
                    }
                    ,
                    e
                }()
                  , M = function() {
                    function e() {
                        this.cacheToken = {},
                        this.enableCookie = !1,
                        this.enable_ttwebid = !1,
                        this.enableCustomWebid = !1
                    }
                    return e.prototype.apply = function(e, t) {
                        var r = this;
                        this.collect = e,
                        this.config = t,
                        this.configManager = this.collect.configManager,
                        this.storage = new m(!1),
                        this.tokenKey = "__tea_cache_tokens_" + t.app_id,
                        this.enable_ttwebid = t.enable_ttwebid,
                        this.enableCustomWebid = t.enable_custom_webid,
                        this.collect.on(C.ConfigUuid, (function(e) {
                            r.setUuid(e)
                        }
                        )),
                        this.collect.on(C.ConfigWebId, (function(e) {
                            r.setWebId(e)
                        }
                        )),
                        this.enableCookie = t.cross_subdomain,
                        this.expiresTime = t.cookie_expire || 6048e5,
                        this.cookieDomain = t.cookie_domain || "",
                        this.checkStorage()
                    }
                    ,
                    e.prototype.checkStorage = function() {
                        var e, t = this;
                        this.enableCookie ? (e = this.storage.getCookie(this.tokenKey, this.cookieDomain),
                        this.cacheToken = e && "string" == typeof e ? JSON.parse(e) : {}) : this.cacheToken = this.storage.getItem(this.tokenKey) || {},
                        this.tokenType = this.cacheToken && this.cacheToken._type_ ? this.cacheToken._type_ : "default",
                        "custom" !== this.tokenType || this.enableCustomWebid ? this.enableCustomWebid ? this.collect.on(C.CustomWebId, (function() {
                            t.tokenReady = !0,
                            t.collect.emit(C.TokenComplete)
                        }
                        )) : this.checkEnv() || (this.enable_ttwebid ? this.completeTtWid(this.cacheToken) : this.check()) : this.remoteWebid()
                    }
                    ,
                    e.prototype.check = function() {
                        this.cacheToken && this.cacheToken.web_id ? this.complete(this.cacheToken) : this.config.disable_webid ? this.complete({
                            web_id: E(),
                            user_unique_id: this.configManager.get("user_unique_id") || E()
                        }) : this.remoteWebid()
                    }
                    ,
                    e.prototype.checkEnv = function() {
                        var e, t;
                        return !(-1 === window.navigator.userAgent.indexOf("miniProgram") || !(e = u(window.location.href)) || !e.Web_ID || (t = this.configManager.get("user_unique_id"),
                        this.complete({
                            web_id: "" + e.Web_ID,
                            env_uuid: t
                        }),
                        0))
                    }
                    ,
                    e.prototype.remoteWebid = function() {
                        var e = this;
                        P(this.configManager.getUrl("webid"), {
                            app_key: this.config.app_key,
                            app_id: this.config.app_id,
                            url: location.href,
                            user_agent: window.navigator.userAgent,
                            referer: document.referrer,
                            user_unique_id: ""
                        }, 3e3, !1, (function(t) {
                            t && 0 === t.e ? e.complete({
                                web_id: e.configManager.get("web_id") || t.web_id,
                                user_unique_id: e.configManager.get("user_unique_id") || t.web_id
                            }) : e.collect.emit(C.TokenError)
                        }
                        ), (function() {
                            e.collect.emit(C.TokenError)
                        }
                        ))
                    }
                    ,
                    e.prototype.complete = function(e) {
                        var t = e.web_id
                          , r = e.user_unique_id;
                        e.timestamp = Date.now(),
                        this.collect.configManager.set({
                            web_id: t,
                            user_unique_id: r
                        }),
                        this.setStorage(e),
                        this.tokenReady = !0,
                        this.collect.emit(C.TokenComplete)
                    }
                    ,
                    e.prototype.completeTtWid = function(e) {
                        var t = e.user_unique_id || ""
                          , r = this.configManager.get("user_unique_id");
                        (r || t) && this.configManager.set({
                            user_unique_id: r || t
                        }),
                        this.setStorage(e),
                        this.tokenReady = !0,
                        this.collect.emit(C.TokenComplete)
                    }
                    ,
                    e.prototype.setUuid = function(e) {
                        var t, r;
                        e ? (e = String(e),
                        t = this.configManager.get("user_unique_id"),
                        r = this.cacheToken && this.cacheToken.user_unique_id,
                        e === t && e === r || (this.configManager.set({
                            user_unique_id: e
                        }),
                        this.cacheToken || (this.cacheToken = {}),
                        this.cacheToken.user_unique_id = e,
                        this.cacheToken.timestamp = Date.now(),
                        this.setStorage(this.cacheToken),
                        this.collect.emit(C.TokenChange, "uuid"),
                        this.collect.emit(C.SessionReset))) : this.clearUuid()
                    }
                    ,
                    e.prototype.clearUuid = function() {
                        this.config.enable_ttwebid || this.configManager.get("web_id") && (this.configManager.set({
                            user_unique_id: this.configManager.get("web_id")
                        }),
                        this.cacheToken && this.cacheToken.web_id && (this.cacheToken.user_unique_id = this.cacheToken.web_id,
                        this.cacheToken.timestamp = Date.now(),
                        this.setStorage(this.cacheToken)),
                        this.collect.emit(C.TokenReset))
                    }
                    ,
                    e.prototype.setWebId = function(e) {
                        var t, r;
                        e && !this.config.enable_ttwebid && (this.cacheToken && this.cacheToken.web_id ? this.cacheToken.web_id !== e && (this.cacheToken.user_unique_id = this.cacheToken.web_id === this.cacheToken.user_unique_id ? e : this.cacheToken.user_unique_id,
                        this.cacheToken.web_id = e) : (this.cacheToken = {},
                        this.cacheToken.web_id = e,
                        this.cacheToken.user_unique_id = e),
                        this.cacheToken.timestamp = Date.now(),
                        t = this.configManager.get("web_id"),
                        (r = this.configManager.get("user_unique_id")) && r !== t || (this.configManager.set({
                            user_unique_id: e
                        }),
                        this.collect.emit(C.TokenChange, "uuid")),
                        t !== e && (this.configManager.set({
                            web_id: e
                        }),
                        this.collect.emit(C.TokenChange, "webid")),
                        this.setStorage(this.cacheToken))
                    }
                    ,
                    e.prototype.setStorage = function(e) {
                        e._type_ = this.enableCustomWebid ? "custom" : "default",
                        delete e["diss".split("").reverse().join("")],
                        this.enableCookie || this.enable_ttwebid ? this.storage.setCookie(this.tokenKey, e, this.expiresTime, this.cookieDomain) : this.storage.setItem(this.tokenKey, e),
                        this.cacheToken = e
                    }
                    ,
                    e.prototype.getReady = function() {
                        return this.tokenReady
                    }
                    ,
                    e.prototype.getTobId = function() {
                        var e = this
                          , t = this.configManager.getUrl("tobid");
                        return new Promise((function(r) {
                            P(t, {
                                app_id: e.config.app_id,
                                user_unique_id: e.configManager.get("user_unique_id"),
                                web_id: e.configManager.get("web_id")
                            }, 3e4, e.enable_ttwebid, (function(e) {
                                e && 0 === e.e ? r(e.tobid) : r("")
                            }
                            ), (function() {
                                r("")
                            }
                            ))
                        }
                        ))
                    }
                    ,
                    e
                }()
                  , H = function() {
                    function e() {}
                    return e.prototype.apply = function(e, t) {
                        var r = this;
                        this.collect = e,
                        this.storage = new m(!1,"session"),
                        this.sessionKey = "__tea_session_id_" + t.app_id,
                        this.expireTime = t.expireTime || 18e5,
                        this.disableSession = t.disable_session,
                        this.disableSession || (this.setSessionId(),
                        this.collect.on(C.SessionReset, (function() {
                            r.resetSessionId()
                        }
                        )),
                        this.collect.on(C.SessionResetTime, (function() {
                            r.updateSessionIdTime()
                        }
                        )))
                    }
                    ,
                    e.prototype.updateSessionIdTime = function() {
                        var e, t = this.storage.getItem(this.sessionKey);
                        t && t.sessionId && (e = t.timestamp,
                        Date.now() - e > this.expireTime ? t = {
                            sessionId: U(),
                            timestamp: Date.now()
                        } : t.timestamp = Date.now(),
                        this.storage.setItem(this.sessionKey, t),
                        this.resetExpTime())
                    }
                    ,
                    e.prototype.setSessionId = function() {
                        var e = this
                          , t = this.storage.getItem(this.sessionKey);
                        t && t.sessionId ? t.timestamp = Date.now() : t = {
                            sessionId: U(),
                            timestamp: Date.now()
                        },
                        this.storage.setItem(this.sessionKey, t),
                        this.sessionExp = setInterval((function() {
                            e.checkEXp()
                        }
                        ), this.expireTime)
                    }
                    ,
                    e.prototype.getSessionId = function() {
                        var e = this.storage.getItem(this.sessionKey);
                        return !this.disableSession && e && e.sessionId ? e.sessionId : ""
                    }
                    ,
                    e.prototype.resetExpTime = function() {
                        var e = this;
                        this.sessionExp && (clearInterval(this.sessionExp),
                        this.sessionExp = setInterval((function() {
                            e.checkEXp()
                        }
                        ), this.expireTime))
                    }
                    ,
                    e.prototype.resetSessionId = function() {
                        var e = {
                            sessionId: U(),
                            timestamp: Date.now()
                        };
                        this.storage.setItem(this.sessionKey, e)
                    }
                    ,
                    e.prototype.checkEXp = function() {
                        var e = this.storage.getItem(this.sessionKey);
                        e && e.sessionId && Date.now() - e.timestamp + 30 >= this.expireTime && (e = {
                            sessionId: U(),
                            timestamp: Date.now()
                        },
                        this.storage.setItem(this.sessionKey, e))
                    }
                    ,
                    e
                }()
                  , N = {
                    autotrack: {
                        src: {
                            cn: "https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/autotrack.js",
                            sg: "https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",
                            va: "https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"
                        },
                        object: "LogAutoTrack"
                    },
                    ab: {
                        src: {
                            cn: "https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/ab.js",
                            sg: "https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",
                            va: "https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"
                        },
                        object: "LogAb"
                    },
                    stay: {
                        src: {
                            cn: "https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/stay.js",
                            sg: "https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",
                            va: "https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"
                        },
                        object: "LogStay"
                    },
                    route: {
                        src: {
                            cn: "https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/route.js",
                            sg: "https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",
                            va: "https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"
                        },
                        object: "LogRoute"
                    },
                    cep: {
                        src: {
                            cn: "https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/cep.js",
                            sg: "https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",
                            va: "https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"
                        },
                        object: "LogCep"
                    },
                    tracer: {
                        src: {
                            cn: "https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/tracer.js",
                            sg: "https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",
                            va: "https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"
                        },
                        object: "LogTracer"
                    }
                }
                  , L = (t = function() {
                    function e(e) {
                        this.disableAutoPageView = !1,
                        this.bridgeReport = !1,
                        this.staging = !1,
                        this.pluginInstances = [],
                        this.sended = !1,
                        this.started = !1,
                        this.destroyInstance = !1,
                        this.sdkReady = !1,
                        this.adapters = {},
                        this.name = e,
                        this.hook = new h,
                        this.logger = new O(e),
                        this.remotePlugin = new Map,
                        this.Types = C,
                        this.adapters.fetch = P,
                        this.adapters.storage = m
                    }
                    return e.usePlugin = function(t, r, n) {
                        if (r) {
                            for (var i = !1, o = 0, s = e.plugins.length; o < s; o++)
                                if (e.plugins[o].name === r) {
                                    e.plugins[o].plugin = t,
                                    e.plugins[o].options = n || {},
                                    i = !0;
                                    break
                                }
                            i || e.plugins.push({
                                name: r,
                                plugin: t,
                                options: n
                            })
                        } else
                            e.plugins.push({
                                plugin: t
                            })
                    }
                    ,
                    e.prototype.usePlugin = function(e, t, r) {
                        e && (t ? "string" == typeof t ? this.remotePlugin.get(e) || this.remotePlugin.set(e, {
                            src: t,
                            call: r
                        }) : this.remotePlugin.get(e) || this.remotePlugin.set(e, {
                            instance: t
                        }) : this.remotePlugin.get(e) || this.remotePlugin.set(e, "sdk"))
                    }
                    ,
                    e.prototype.init = function(t) {
                        var r, n = this;
                        this.inited || t && a(t) && t.app_id && "number" == typeof (r = t.app_id) && !isNaN(r) && (t.app_key && "string" != typeof t.app_key || (t.channel_domain || -1 !== ["cn", "sg", "va"].indexOf(t.channel) || (t.channel = "cn"),
                        this.appBridge = new T(t.Native),
                        this.bridgeReport = this.appBridge.bridgeInject(),
                        this.configManager = new x(t),
                        this.initConfig = t,
                        this.bridgeReport || (this.configManager.set({
                            app_id: t.app_id
                        }),
                        this.eventManager = new R,
                        this.tokenManager = new M,
                        this.sessionManager = new H,
                        Promise.all([new Promise((function(e) {
                            n.once(C.TokenComplete, (function() {
                                e(!0)
                            }
                            ))
                        }
                        )), new Promise((function(e) {
                            n.once(C.Start, (function() {
                                e(!0)
                            }
                            ))
                        }
                        ))]).then((function() {
                            try {
                                e.plugins.reduce((function(e, t) {
                                    var r = t.plugin;
                                    return t = t.options,
                                    t = Object.assign(n.initConfig, t),
                                    (r = new r).apply(n, t),
                                    e.push(r),
                                    e
                                }
                                ), n.pluginInstances)
                            } catch (r) {}
                            n.sdkReady = !0,
                            n.emit(C.Ready);
                            try {
                                (window.opener || window.parent).postMessage("[tea-sdk]ready", "*")
                            } catch (r) {}
                            t.disable_auto_pv || n.pageView(),
                            n.on(C.TokenChange, (function(e) {
                                "webid" === e && n.pageView()
                            }
                            )),
                            n.on(C.TokenReset, (function() {}
                            )),
                            n.on(C.RouteChange, (function(e) {
                                e.init || t.disable_route_report || n.pageView()
                            }
                            ))
                        }
                        )),
                        this.tokenManager.apply(this, t),
                        this.eventManager.apply(this, t),
                        this.sessionManager.apply(this, t),
                        this.emit(C.Init)),
                        this.inited = !0))
                    }
                    ,
                    e.prototype.config = function(e) {
                        var t, r;
                        this.inited ? e && a(e) ? this.bridgeReport ? this.appBridge.setConfig(e) : (e._staging_flag && 1 === e._staging_flag && (this.staging = !0),
                        e.disable_auto_pv && (this.disableAutoPageView = !0,
                        delete e.disable_auto_pv),
                        t = o({}, e),
                        this.initConfig && this.initConfig.configPersist && ((r = this.configManager.getStore()) && (t = Object.assign(r, e)),
                        this.configManager.setStore(e)),
                        t.web_id,
                        t.user_unique_id,
                        r = function(e, t) {
                            var r = {};
                            for (i in e)
                                Object.prototype.hasOwnProperty.call(e, i) && t.indexOf(i) < 0 && (r[i] = e[i]);
                            if (null != e && "function" == typeof Object.getOwnPropertySymbols)
                                for (var n = 0, i = Object.getOwnPropertySymbols(e); n < i.length; n++)
                                    t.indexOf(i[n]) < 0 && (r[i[n]] = e[i[n]]);
                            return r
                        }(t, ["web_id", "user_unique_id"]),
                        t.hasOwnProperty("web_id") && this.emit(C.ConfigWebId, t.web_id),
                        t.hasOwnProperty("user_unique_id") && this.emit(C.ConfigUuid, t.user_unique_id),
                        this.configManager.set(r)) : this.logger.warn("config params is error, please check") : this.logger.warn("config must be use after function init")
                    }
                    ,
                    e.prototype.setDomain = function(e) {
                        this.configManager && this.configManager.setDomain(e),
                        this.emit(C.ConfigDomain)
                    }
                    ,
                    e.prototype.getConfig = function(e) {
                        return this.configManager.get(e)
                    }
                    ,
                    e.prototype.send = function() {
                        this.start()
                    }
                    ,
                    e.prototype.start = function() {
                        this.inited && !this.sended && (this.sended = !0,
                        this.emit(C.Start))
                    }
                    ,
                    e.prototype.event = function(e, t) {
                        var r = this;
                        try {
                            if (this.initConfig && this.initConfig.disable_track_event)
                                return;
                            var n = [];
                            Array.isArray(e) ? e.forEach((function(e) {
                                n.push(r.processEvent(e[0], e[1] || {}))
                            }
                            )) : n.push(this.processEvent(e, t)),
                            this.bridgeReport ? n.forEach((function(e) {
                                var t = e.event;
                                e = e.params,
                                r.appBridge.onEventV3(t, JSON.stringify(e))
                            }
                            )) : n.length && (this.emit(C.Event, n),
                            this.emit(C.SessionResetTime))
                        } catch (e) {}
                    }
                    ,
                    e.prototype.beconEvent = function(e, t) {
                        var r;
                        this.initConfig && this.initConfig.disable_track_event || Array.isArray(e) || ((r = []).push(this.processEvent(e, t || {})),
                        r.length && (this.emit(C.BeconEvent, r),
                        this.emit(C.SessionResetTime)))
                    }
                    ,
                    e.prototype.processEvent = function(e, t) {
                        void 0 === t && (t = {});
                        try {
                            var r = e
                              , n = (/^event\./.test(e) && (r = e.slice(6)),
                            t)
                              , i = void ((n = "object" != typeof n ? {} : n).profile ? delete n.profile : n.event_index = l += 1);
                            return n.local_ms ? (i = n.local_ms,
                            delete n.local_ms) : i = +new Date,
                            {
                                event: r,
                                params: n,
                                local_time_ms: i,
                                is_bav: this.initConfig && this.initConfig.autotrack ? 1 : 0
                            }
                        } catch (r) {
                            return {
                                event: e,
                                params: t
                            }
                        }
                    }
                    ,
                    e.prototype.filterEvent = function(e) {
                        this.eventFilter = e
                    }
                    ,
                    e.prototype.on = function(e, t) {
                        this.hook.on(e, t)
                    }
                    ,
                    e.prototype.once = function(e, t) {
                        this.hook.once(e, t)
                    }
                    ,
                    e.prototype.off = function(e, t) {
                        this.hook.off(e, t)
                    }
                    ,
                    e.prototype.emit = function(e, t, r) {
                        this.hook.emit(e, t, r)
                    }
                    ,
                    e.prototype.set = function(e) {
                        this.hook.set(e)
                    }
                    ,
                    e.prototype.pageView = function() {
                        this.disableAutoPageView || this.predefinePageView()
                    }
                    ,
                    e.prototype.predefinePageView = function(e) {
                        void 0 === e && (e = {});
                        var t = {
                            title: document.title || location.pathname,
                            url: location.href,
                            url_path: location.pathname,
                            time: Date.now(),
                            referrer: window.document.referrer,
                            $is_first_time: "" + this.configManager.is_first_time
                        };
                        t = o({}, t, e),
                        this.event("predefine_pageview", t)
                    }
                    ,
                    e.prototype.clearEventCache = function() {
                        this.emit(C.CleanEvents)
                    }
                    ,
                    e.prototype.setWebIDviaUnionID = function(e) {
                        var t;
                        e && (t = f(e),
                        this.config({
                            web_id: "" + t,
                            wechat_unionid: e
                        }),
                        this.emit(C.CustomWebId))
                    }
                    ,
                    e.prototype.setWebIDviaOpenID = function(e) {
                        var t;
                        e && (t = f(e),
                        this.config({
                            web_id: "" + t,
                            wechat_openid: e
                        }),
                        this.emit(C.CustomWebId))
                    }
                    ,
                    e.prototype.resetStayDuration = function(e, t, r) {
                        this.emit(C.ResetStay, {
                            url_path: e = void 0 === e ? "" : e,
                            title: t = void 0 === t ? "" : t,
                            url: r = void 0 === r ? "" : r
                        }, C.Stay)
                    }
                    ,
                    e.prototype.resetStayParams = function(e, t, r) {
                        this.emit(C.SetStay, {
                            url_path: e = void 0 === e ? "" : e,
                            title: t = void 0 === t ? "" : t,
                            url: r = void 0 === r ? "" : r
                        }, C.Stay)
                    }
                    ,
                    e.prototype.getToken = function(e, t) {
                        function r(t) {
                            var r;
                            s || (s = !0,
                            r = i.configManager.get().user,
                            t && (r.tobid = t,
                            r["diss".split("").reverse().join("")] = t),
                            e(o({}, r)))
                        }
                        function n() {
                            i.tokenManager.getTobId().then((function(e) {
                                r(e)
                            }
                            ))
                        }
                        var i = this
                          , s = !1;
                        this.sdkReady ? n() : (t && setTimeout((function() {
                            r()
                        }
                        ), t),
                        this.on(C.Ready, (function() {
                            n()
                        }
                        )))
                    }
                    ,
                    e.prototype.profileSet = function(e) {
                        this.bridgeReport ? this.appBridge.profileSet(JSON.stringify(e)) : this.emit(C.ProfileSet, e, C.Profile)
                    }
                    ,
                    e.prototype.profileSetOnce = function(e) {
                        this.bridgeReport ? this.appBridge.profileSetOnce(JSON.stringify(e)) : this.emit(C.ProfileSetOnce, e, C.Profile)
                    }
                    ,
                    e.prototype.profileIncrement = function(e) {
                        this.bridgeReport ? this.appBridge.profileIncrement(JSON.stringify(e)) : this.emit(C.ProfileIncrement, e, C.Profile)
                    }
                    ,
                    e.prototype.profileUnset = function(e) {
                        this.bridgeReport ? this.appBridge.profileUnset(e) : this.emit(C.ProfileUnset, e, C.Profile)
                    }
                    ,
                    e.prototype.profileAppend = function(e) {
                        this.bridgeReport ? this.appBridge.profileAppend(JSON.stringify(e)) : this.emit(C.ProfileAppend, e, C.Profile)
                    }
                    ,
                    e.prototype.setExternalAbVersion = function(e) {
                        this.emit(C.AbExternalVersion, "string" == typeof e && e ? ("" + e).trim() : null, C.Ab)
                    }
                    ,
                    e.prototype.getVar = function(e, t, r) {
                        this.emit(C.AbVar, {
                            name: e,
                            defaultValue: t,
                            callback: r
                        }, C.Ab)
                    }
                    ,
                    e.prototype.getABconfig = function(e, t) {
                        this.emit(C.AbConfig, {
                            param: e,
                            callback: t
                        }, C.Ab)
                    }
                    ,
                    e.prototype.getAbSdkVersion = function() {
                        return this.configManager.getAbVersion()
                    }
                    ,
                    e.prototype.onAbSdkVersionChange = function(e) {
                        var t = this;
                        return this.emit(C.AbVersionChangeOn, e, C.Ab),
                        function() {
                            t.emit(C.AbVersionChangeOff, e, C.Ab)
                        }
                    }
                    ,
                    e.prototype.offAbSdkVersionChange = function(e) {
                        this.emit(C.AbVersionChangeOff, e, C.Ab)
                    }
                    ,
                    e.prototype.openOverlayer = function() {
                        this.emit(C.AbOpenLayer, "", C.Ab)
                    }
                    ,
                    e.prototype.closeOverlayer = function() {
                        this.emit(C.AbCloseLayer, "", C.Ab)
                    }
                    ,
                    e.prototype.getAllVars = function(e) {
                        this.emit(C.AbAllVars, e, C.Ab)
                    }
                    ,
                    e.prototype.autoInitializationRangers = function(e) {
                        var t = e.app_id
                          , r = e.channel
                          , n = e.onTokenReady
                          , i = (e = b[r] + "/webid",
                        new m(!1))
                          , o = "__tea_cache_tokens_" + t;
                        (r = i.getItem(o)) && r.web_id ? n(r.web_id) : A(e, {
                            app_key: "",
                            app_id: t,
                            url: location.href,
                            user_agent: window.navigator.userAgent,
                            referer: document.referrer
                        }, 3e3, !1, (function(e) {
                            e && 0 === e.e ? (n(e.web_id),
                            e = {
                                web_id: e.web_id,
                                user_unique_id: e.web_id,
                                timestamp: Date.now()
                            },
                            i.setItem(o, e)) : n("")
                        }
                        ), (function() {
                            n("")
                        }
                        ), !0)
                    }
                    ,
                    e.prototype.destoryInstace = function() {
                        this.destroyInstance || (this.destroyInstance = !0,
                        this.off(C.TokenComplete))
                    }
                    ,
                    e.plugins = [],
                    e
                }(),
                function() {
                    function e() {}
                    return e.prototype.apply = function(e, t) {
                        var r = this
                          , n = e.adapters.fetch;
                        t.event_verify_url && "string" == typeof t.event_verify_url && (this.url = t.event_verify_url + "/v1/list_test",
                        this.url && (t = e.Types,
                        e.on(t.SubmitBefore, (function(e) {
                            n(r.url, e, 3e4)
                        }
                        ))))
                    }
                    ,
                    e
                }())
                  , q = function() {
                    function e() {}
                    return e.prototype.apply = function(e, t) {
                        var r = this;
                        this.collect = e,
                        this.config = t,
                        this.duration = 6e4,
                        this.reportUrl = e.configManager.getDomain() + "/profile/list",
                        t = e.Types,
                        e = e.adapters.fetch,
                        this.fetch = e,
                        this.cache = {},
                        this.collect.on(t.ProfileSet, (function(e) {
                            r.setProfile(e)
                        }
                        )),
                        this.collect.on(t.ProfileSetOnce, (function(e) {
                            r.setOnceProfile(e)
                        }
                        )),
                        this.collect.on(t.ProfileUnset, (function(e) {
                            r.unsetProfile(e)
                        }
                        )),
                        this.collect.on(t.ProfileIncrement, (function(e) {
                            r.incrementProfile(e)
                        }
                        )),
                        this.collect.on(t.ProfileAppend, (function(e) {
                            r.appendProfile(e)
                        }
                        )),
                        this.collect.on(t.ProfileClear, (function() {
                            r.cache = {}
                        }
                        )),
                        this.ready(t.Profile)
                    }
                    ,
                    e.prototype.ready = function(e) {
                        var t = this;
                        if (this.collect.set(e),
                        this.collect.hook._hooksCache.hasOwnProperty(e)) {
                            var r = this.collect.hook._hooksCache[e];
                            if (Object.keys(r).length)
                                for (var n in r)
                                    !function(e) {
                                        r[e].length && r[e].forEach((function(r) {
                                            t.collect.hook.emit(e, r)
                                        }
                                        ))
                                    }(n)
                        }
                    }
                    ,
                    e.prototype.report = function(e, t) {
                        void 0 === t && (t = {});
                        try {
                            if (this.config.disable_track_event)
                                return;
                            var r = []
                              , n = (r.push(this.collect.processEvent(e, t)),
                            this.collect.eventManager.merge(r));
                            this.fetch(this.reportUrl, n)
                        } catch (e) {}
                    }
                    ,
                    e.prototype.setProfile = function(e) {
                        (e = this.formatParams(e)) && Object.keys(e).length && (this.pushCache(e),
                        this.report("__profile_set", o({}, e, {
                            profile: !0
                        })))
                    }
                    ,
                    e.prototype.setOnceProfile = function(e) {
                        (e = this.formatParams(e, !0)) && Object.keys(e).length && (this.pushCache(e),
                        this.report("__profile_set_once", o({}, e, {
                            profile: !0
                        })))
                    }
                    ,
                    e.prototype.incrementProfile = function(e) {
                        e && this.report("__profile_increment", o({}, e, {
                            profile: !0
                        }))
                    }
                    ,
                    e.prototype.unsetProfile = function(e) {
                        var t;
                        e && ((t = {})[e] = "1",
                        this.report("__profile_unset", o({}, t, {
                            profile: !0
                        })))
                    }
                    ,
                    e.prototype.appendProfile = function(e) {
                        if (e) {
                            var t, r = {};
                            for (t in e)
                                ("string" == typeof e[t] || "Array" === Object.prototype.toString.call(e[t]).slice(8, -1)) && (r[t] = e[t]);
                            Object.keys(r).length && this.report("__profile_append", o({}, r, {
                                profile: !0
                            }))
                        }
                    }
                    ,
                    e.prototype.pushCache = function(e) {
                        var t = this;
                        Object.keys(e).forEach((function(r) {
                            t.cache[r] = {
                                val: t.clone(e[r]),
                                timestamp: Date.now()
                            }
                        }
                        ))
                    }
                    ,
                    e.prototype.formatParams = function(e, t) {
                        var r = this;
                        void 0 === t && (t = !1);
                        try {
                            if (!e || "[object Object]" !== Object.prototype.toString.call(e))
                                return;
                            var n, i = {};
                            for (n in e)
                                ("string" == typeof e[n] || "number" == typeof e[n] || "Array" === Object.prototype.toString.call(e[n]).slice(8, -1)) && (i[n] = e[n]);
                            var o = Object.keys(i);
                            if (!o.length)
                                return;
                            var s = Date.now();
                            return o.filter((function(n) {
                                var i = r.cache[n];
                                return t ? !i : !(i && r.compare(i.val, e[n]) && s - i.timestamp < r.duration)
                            }
                            )).reduce((function(e, t) {
                                return e[t] = i[t],
                                e
                            }
                            ), {})
                        } catch (e) {}
                    }
                    ,
                    e.prototype.compare = function(e, t) {
                        try {
                            return JSON.stringify(e) === JSON.stringify(t)
                        } catch (e) {
                            return !1
                        }
                    }
                    ,
                    e.prototype.clone = function(e) {
                        try {
                            return JSON.parse(JSON.stringify(e))
                        } catch (t) {
                            return e
                        }
                    }
                    ,
                    e.prototype.unReady = function() {}
                    ,
                    e
                }()
                  , K = function() {
                    function e() {
                        var e = this;
                        this.setInterval = function() {
                            e.clearIntervalFunc = function(e, t) {
                                void 0 === e && (e = function() {}
                                ),
                                void 0 === t && (t = 1e3);
                                var r = Date.now() + t
                                  , n = window.setTimeout((function i() {
                                    var o = Date.now() - r;
                                    e(),
                                    r += t,
                                    n = window.setTimeout(i, Math.max(0, t - o))
                                }
                                ), t);
                                return function() {
                                    window.clearTimeout(n)
                                }
                            }((function() {
                                e.isSessionhasEvent && e.endCurrentSession()
                            }
                            ), e.sessionInterval)
                        }
                        ,
                        this.clearInterval = function() {
                            e.clearIntervalFunc && e.clearIntervalFunc()
                        }
                    }
                    return e.prototype.apply = function(e, t) {
                        var r = this;
                        this.collect = e,
                        t.disable_heartbeat || (this.sessionInterval = 6e4,
                        this.startTime = 0,
                        this.lastTime = 0,
                        this.setInterval(),
                        e = this.collect.Types,
                        this.collect.on(e.SessionReset, (function() {
                            r.process()
                        }
                        )))
                    }
                    ,
                    e.prototype.endCurrentSession = function() {
                        this.collect.event("_be_active", {
                            start_time: this.startTime,
                            end_time: this.lastTime,
                            url: window.location.href,
                            referrer: window.document.referrer,
                            title: document.title || location.pathname
                        }),
                        this.isSessionhasEvent = !1,
                        this.startTime = 0
                    }
                    ,
                    e.prototype.process = function() {
                        this.isSessionhasEvent || (this.isSessionhasEvent = !0,
                        this.startTime = +new Date);
                        var e = this.lastTime || +new Date;
                        this.lastTime = +new Date,
                        this.lastTime - e > this.sessionInterval && (this.clearInterval(),
                        this.endCurrentSession(),
                        this.setInterval())
                    }
                    ,
                    e
                }()
                  , W = function() {
                    function e() {}
                    return e.prototype.apply = function(e, t) {
                        var r, n = this;
                        this.collect = e,
                        this.config = t,
                        this.config.channel_domain || (r = e.adapters.fetch,
                        this.fetch = r,
                        t.disable_track_event || t.disable_sdk_monitor || (this.url = e.configManager.getUrl("event"),
                        r = this.collect.Types,
                        this.collect.on(r.Ready, (function() {
                            n.sdkOnload()
                        }
                        )),
                        this.collect.on(r.SubmitError, (function(e) {
                            var t = e.eventData;
                            e = e.errorCode,
                            n.sdkError(t, e)
                        }
                        ))))
                    }
                    ,
                    e.prototype.sdkOnload = function() {
                        var e = this;
                        try {
                            var t = this.collect.configManager.get()
                              , r = t.header
                              , n = t.user
                              , i = r.app_id
                              , o = r.app_name
                              , s = r.sdk_version
                              , a = n.web_id
                              , c = {
                                events: [{
                                    event: "onload",
                                    params: JSON.stringify({
                                        app_id: i,
                                        app_name: o || "",
                                        sdk_version: s,
                                        sdk_type: "npm",
                                        sdk_config: this.config,
                                        sdk_desc: "TOC"
                                    }),
                                    local_time_ms: Date.now()
                                }],
                                user: {
                                    user_unique_id: a
                                },
                                header: {}
                            };
                            setTimeout((function() {
                                e.fetch(e.url, [c], 3e4, !1, (function() {}
                                ), (function() {}
                                ), "566f58151b0ed37e")
                            }
                            ), 16)
                        } catch (e) {}
                    }
                    ,
                    e.prototype.sdkError = function(e, t) {
                        var r = this;
                        try {
                            var n = e[0]
                              , i = n.user
                              , o = n.header
                              , s = []
                              , a = (e.forEach((function(e) {
                                e.events.forEach((function(e) {
                                    s.push(e)
                                }
                                ))
                            }
                            )),
                            {
                                events: s.map((function(e) {
                                    return {
                                        event: "on_error",
                                        params: JSON.stringify({
                                            error_code: t,
                                            app_id: o.app_id,
                                            app_name: o.app_name || "",
                                            error_event: e.event,
                                            sdk_version: o.sdk_version,
                                            local_time_ms: e.local_time_ms,
                                            tea_event_index: Date.now(),
                                            params: e.params,
                                            header: JSON.stringify(o),
                                            user: JSON.stringify(i)
                                        }),
                                        local_time_ms: Date.now()
                                    }
                                }
                                )),
                                user: {
                                    user_unique_id: i.user_unique_id
                                },
                                header: {}
                            });
                            setTimeout((function() {
                                r.fetch(r.url, [a], 3e4, !1, (function() {}
                                ), (function() {}
                                ), "566f58151b0ed37e")
                            }
                            ), 16)
                        } catch (e) {}
                    }
                    ,
                    e
                }()
                  , V = function() {
                    function e() {
                        this.verifyReady = !1,
                        this.waitTime = 5e3,
                        this.cleanStatus = !1
                    }
                    return e.prototype.apply = function(e, t) {
                        var r = this;
                        this.collector = e,
                        this.config = t,
                        t = e.adapters.storage,
                        this.cacheStorgae = new t(!1,"session"),
                        this.eventStorage = [],
                        this.collector.on("submit-verify", (function(e) {
                            e && e.length && r.eventStore(e[0])
                        }
                        )),
                        this.checkCache()
                    }
                    ,
                    e.prototype.checkCache = function() {
                        var e = this
                          , t = (this.verifyCookieKey = "__applog_verify_set_" + this.config.app_id,
                        this.cacheStorgae.getCookie(this.verifyCookieKey),
                        this.cacheStorgae.getItem(this.verifyCookieKey))
                          , r = (this.sign = t && t.sign || "",
                        this.origin = t && t.origin || "*",
                        setTimeout((function() {
                            e.cleanVerify(),
                            clearTimeout(r),
                            e.collector.off("submit-verify")
                        }
                        ), this.waitTime));
                        window.addEventListener("message", (function(t) {
                            t && t.data && "simulator:verify" === t.data.type && (clearTimeout(r),
                            e.receMessage(t))
                        }
                        ), !0)
                    }
                    ,
                    e.prototype.receMessage = function(e) {
                        var t;
                        this.cleanStatus || (t = e.data,
                        this.verifyReady = !0,
                        this.sign = t.sign,
                        this.origin = e.origin,
                        this.cacheStorgae.setItem(this.verifyCookieKey, JSON.stringify({
                            sign: t.sign,
                            origin: e.origin
                        })),
                        this.eventStorage.length && this.postVerify(this.eventStorage, t.sign, e.origin))
                    }
                    ,
                    e.prototype.eventStore = function(e) {
                        this.cleanStatus || (this.verifyReady ? this.postVerify(e, this.sign, this.origin) : this.eventStorage.push(e))
                    }
                    ,
                    e.prototype.cleanVerify = function() {
                        this.cleanStatus = !0,
                        this.eventStorage = []
                    }
                    ,
                    e.prototype.postVerify = function(e, t, r) {
                        try {
                            var n = []
                              , i = (Array.isArray(e) ? e.forEach((function(e) {
                                n.push(e)
                            }
                            )) : n.push(e),
                            {
                                type: "simulator:verify:event",
                                sign: t,
                                pageUrl: window.location.href,
                                events: n
                            });
                            (window.opener || window.parent).postMessage(i, r)
                        } catch (e) {}
                    }
                    ,
                    e
                }()
                  , J = "undefined" != typeof window ? (window.LogPluginObject || (window.LogPluginObject = {}),
                window.LogPluginObject) : null
                  , G = function() {
                    function e() {}
                    return e.prototype.apply = function(e, t) {
                        this._plugin = {},
                        this.config = t,
                        this.collect = e,
                        this.channel = t.channel || "cn",
                        this.loadExtend()
                    }
                    ,
                    e.prototype.loadExtend = function() {
                        var e = this;
                        try {
                            this.collect.remotePlugin.forEach((function(t, r) {
                                var n, i;
                                "sdk" === t ? N.hasOwnProperty(r) && (n = N[r].object,
                                i = N[r].src[e.channel] + "?query=" + Date.now(),
                                e.exist(r, n, i)) : "object" == typeof t && (t.src ? e.exist(r, t.call, t.src) : e.process(r, t.instance, "INSTANCE"))
                            }
                            ))
                        } catch (e) {}
                    }
                    ,
                    e.prototype.exist = function(e, t, r) {
                        var n = this;
                        J[t] ? this.process(e, J[t]) : this.loadPlugin(e, r, (function() {
                            n.process(e, J[t])
                        }
                        ), (function() {}
                        ))
                    }
                    ,
                    e.prototype.process = function(e, t, r) {
                        try {
                            var n;
                            r ? (n = new t).apply && n.apply(this.collect, this.config) : t && t(this.collect, this.config)
                        } catch (t) {}
                    }
                    ,
                    e.prototype.loadPlugin = function(e, t, r, n) {
                        var i = this;
                        try {
                            var o = document.createElement("script");
                            o.src = t,
                            this._plugin[e] || (this._plugin[e] = []),
                            this._plugin[e].push(r),
                            o.onerror = function() {
                                n(t)
                            }
                            ,
                            o.onload = function() {
                                i._plugin[e].forEach((function(e) {
                                    e()
                                }
                                ))
                            }
                            ,
                            document.getElementsByTagName("head")[0].appendChild(o)
                        } catch (e) {}
                    }
                    ,
                    e
                }()
                  , Q = (t.usePlugin(G, "extend"),
                t.usePlugin(V, "verify"),
                t.usePlugin(L, "et"),
                t.usePlugin(q, "profile"),
                t.usePlugin(K, "heartbeat"),
                t.usePlugin(W, "monitor"),
                G = new t("default"))
                  , X = {
                    browserError: 1e3,
                    crc32: 1e3,
                    preUpload: 1001,
                    initUploadID: 1002,
                    process: 1003,
                    fileMerge: 1004,
                    complete: 1005
                }
                  , $ = "video"
                  , Z = "image"
                  , Y = "object"
                  , ee = {
                    video: "video_upload",
                    image: "image_upload",
                    object: "object_upload"
                }
                  , te = "vod"
                  , re = "imagex"
                  , ne = {
                    cn: "cn-north-1",
                    us: "us-east-1",
                    sg: "ap-singapore-1",
                    "cn-north-1": "cn-north-1",
                    "us-east-1": "us-east-1",
                    "ap-singapore-1": "ap-singapore-1",
                    boe: "boe",
                    boei18n: "boei18n",
                    "US-TTP": "US-TTP"
                }
                  , ie = {
                    "cn-north-1": "https://vod.bytedanceapi.com",
                    "us-east-1": "https://vod.us-east-1.bytedanceapi.com",
                    "ap-singapore-1": "https://vod.ap-singapore-1.bytedanceapi.com"
                }
                  , oe = {
                    "cn-north-1": "https://open.bytedanceapi.com",
                    "us-east-1": "https://open.us-east-1.bytedanceapi.com",
                    "ap-singapore-1": "https://open.ap-singapore-1.bytedanceapi.com"
                }
                  , se = {
                    "cn-north-1": "https://imagex.bytedanceapi.com",
                    "us-east-1": "https://imagex.us-east-1.bytedanceapi.com",
                    "ap-singapore-1": "https://imagex.ap-singapore-1.bytedanceapi.com"
                }
                  , ae = {
                    "cn-north-1": "https://open.bytedanceapi.com",
                    "us-east-1": "https://imagex-us-east-1.bytevcloudapi.com",
                    "ap-singapore-1": "https://imagex-ap-singapore-1.bytevcloudapi.com"
                };
                function ce() {
                    return (ce = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function ue(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                var fe = function() {
                    function e(t, r) {
                        switch (function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, e),
                        this.options = t,
                        this.context = r,
                        this.teaLog = Q,
                        this.tea_app_id = 2562,
                        this.tea_channel = "cn",
                        this.options.region) {
                        case "us":
                        case "us-east-1":
                        case "gcp":
                        case "US-TTP":
                            this.tea_app_id = 2643,
                            this.tea_channel = "va";
                            break;
                        case "sg":
                        case "ap-singapore-1":
                            this.tea_app_id = 2643,
                            this.tea_channel = "sg";
                            break;
                        default:
                            this.tea_app_id = 2562,
                            this.tea_channel = "cn"
                        }
                        this.teaLog.init({
                            app_id: this.tea_app_id,
                            channel: this.tea_channel,
                            log: !1,
                            disable_sdk_monitor: !0,
                            disable_auto_pv: !0
                        }),
                        this.teaLog.config({
                            evtParams: {
                                sdk_version: "1.1.10",
                                line_app_id: this.options.appId
                            },
                            user_unique_id: this.options.userId
                        }),
                        this.teaLog.start()
                    }
                    return function(e, t, r) {
                        t && ue(e.prototype, t),
                        r && ue(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(e, [{
                        key: "send",
                        value: function(e) {
                            var t = this.context
                              , r = e.key
                              , n = (t = t.tasks[r],
                            X[e.stage] || 999)
                              , i = (t = e.fileType || t.fileType,
                            e.fileSize || 0)
                              , o = {
                                log_type: ee[t],
                                stage: n,
                                fk: r,
                                fs: i,
                                req: e.req,
                                res: e.res,
                                ts: Math.round(Date.now() / 1e3),
                                sst: e.stageStartTime,
                                set: e.stageEndTime,
                                dur: e.duration,
                                tdur: e.totalDuration,
                                durs: e.duration / 1e3,
                                tdurs: e.totalDuration / 1e3
                            }
                              , s = (r = "error" === (r = e.type) || "retry" === r ? r : n,
                            "".concat("image" === t ? "image" : "video", "_") + r);
                            switch (n) {
                            case 1e3:
                                this.teaLog.event(s, ce({}, o, {
                                    type: e.type,
                                    errc: e.extra && e.extra.errorCode,
                                    ex: JSON.stringify({
                                        errc: e.extra && e.extra.errorCode,
                                        msg: e.extra && e.extra.message,
                                        crc32Array: e.crc32Array,
                                        isDirect: e.isDirect
                                    })
                                }));
                                break;
                            case 1001:
                                this.teaLog.event(s, ce({}, o, {
                                    type: e.type,
                                    oid: e.oid,
                                    upload_host: e.tosDomain,
                                    errc: e.extra && e.extra.errorCode,
                                    ex: JSON.stringify({
                                        errc: e.extra && e.extra.errorCode,
                                        err: e.extra && e.extra.error,
                                        msg: e.extra && e.extra.message,
                                        sig: e.signature,
                                        stk: e.proxyStsToken
                                    })
                                }));
                                break;
                            case 1002:
                                this.teaLog.event(s, ce({}, o, {
                                    type: e.type,
                                    oid: e.oid,
                                    upload_host: e.tosDomain,
                                    errc: e.extra && e.extra.errorCode,
                                    ex: JSON.stringify({
                                        errc: e.extra && e.extra.errorCode,
                                        msg: e.extra && e.extra.message,
                                        upid: e.uploadID
                                    })
                                }));
                                break;
                            case 1003:
                                e.isAllFinish || e.isDirect || (delete o.sst,
                                delete o.set,
                                delete o.dur),
                                this.teaLog.event(s, ce({}, o, {
                                    type: e.type,
                                    oid: e.oid,
                                    errc: e.extra && e.extra.errorCode,
                                    upload_host: e.tosDomain,
                                    af: e.isAllFinish,
                                    cst: e.crc32StartTime,
                                    cet: e.crc32EndTime,
                                    cdur: e.crc32Duration,
                                    slst: e.sliceStartTime,
                                    slet: e.sliceEndTime,
                                    sldurs: e.sliceDuration && e.sliceDuration / 1e3,
                                    ex: JSON.stringify({
                                        errc: e.extra && e.extra.errorCode,
                                        msg: e.extra && e.extra.message,
                                        si: e.sliceIndex,
                                        af: e.isAllFinish
                                    })
                                }));
                                break;
                            case 1004:
                            default:
                                this.teaLog.event(s, ce({}, o, {
                                    type: e.type,
                                    oid: e.oid,
                                    upload_host: e.tosDomain,
                                    errc: e.extra && e.extra.errorCode,
                                    ex: JSON.stringify({
                                        errc: e.extra && e.extra.errorCode,
                                        msg: e.extra && e.extra.message
                                    })
                                }));
                                break;
                            case 1005:
                                this.teaLog.event(s, ce({}, o, {
                                    type: e.type,
                                    oid: e.oid,
                                    upload_host: e.tosDomain,
                                    errc: e.extra && e.extra.errorCode,
                                    speed: Math.round(i / (e.totalDuration / 1e3) / 1024),
                                    ex: JSON.stringify({
                                        errc: e.extra && e.extra.errorCode,
                                        err: e.extra && e.extra.error,
                                        msg: e.extra && e.extra.message,
                                        vid: e.uploadResult && e.uploadResult.Vid
                                    })
                                }))
                            }
                        }
                    }, {
                        key: "console",
                        value: function(e) {
                            function t(t) {
                                return e.apply(this, arguments)
                            }
                            return t.toString = function() {
                                return e.toString()
                            }
                            ,
                            t
                        }((function(e) {
                            this.options.debug
                        }
                        ))
                    }]),
                    e
                }()
                  , le = (V = r(5),
                r.n(V))
                  , he = (L = r(4),
                r.n(L))
                  , pe = {
                    urlTemplate: function(e, t) {
                        var r;
                        return t = t || {},
                        Object.keys(t).forEach((function(n) {
                            r = new RegExp("{".concat(n, "}"),"g"),
                            e = e.replace(r, t[n])
                        }
                        )),
                        e
                    },
                    toQueryString: function() {
                        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
                        return Object.keys(e).map((function(t) {
                            return "".concat(t, "=").concat(encodeURIComponent(e[t]))
                        }
                        )).join("&")
                    },
                    supportChunked: function() {
                        var e = window.Blob || window.WebKitBlob;
                        try {
                            var t = e.prototype;
                            return !(!FormData || !(t.slice || t.webkitSlice || t.mozSlice))
                        } catch (e) {
                            return !1
                        }
                    },
                    supportXhr: function() {
                        return !!window.FormData || window.ProgressEvent && window.FileReader
                    },
                    supportCrc32: function() {
                        var e = window.FileReader && window.FileReader.prototype.readAsBinaryString;
                        return "undefined" != typeof Int32Array && e && (blob.slice || blob.webkitSlice || blob.mozSlice)
                    },
                    storage: function(e) {
                        var t = e;
                        e = {
                            removeItem: function(e) {
                                delete t.cache[e]
                            },
                            setItem: function(e, r) {
                                t.cache[e] = r
                            },
                            getItem: function(e) {
                                return t.cache[e]
                            },
                            clear: function() {
                                delete t.cache,
                                t.cache = {}
                            }
                        };
                        try {
                            if (window.localStorage)
                                return window.localStorage.setItem("", ""),
                                window.localStorage
                        } catch (r) {
                            return e
                        }
                        return e
                    },
                    noop: function() {},
                    getUnique: function(e) {
                        return "".concat(e, "_").concat((new Date).getTime(), "_").concat(parseInt(1e6 * Math.random()))
                    },
                    getFileSliceLength: function(e, t) {
                        var r = e.size
                          , n = 1048576;
                        return t && "function" == typeof t ? t(r) < 2097152 ? 2097152 : t(r) || r : 200 * n < r ? 10 * n : r <= 200 * n && 2 * n <= r ? 5 * n : e.size
                    },
                    getFileSuffix: function(e) {
                        if (e && "[object String]" === Object.prototype.toString.call(e)) {
                            var t = e.lastIndexOf(".");
                            if (0 < t && (e = "." + e.substring(t + 1)).length <= 8)
                                return e
                        }
                    },
                    fileSlice: function(e, t, r) {
                        return (e.slice || e.webkitSlice || e.mozSlice).call(e, t, r)
                    },
                    getPathByURL: function(e) {
                        return /^(?:(https?\:)\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/.exec(e)[5] || "/"
                    },
                    crypto: {
                        hmac: function(e, t) {
                            return le()(t, e)
                        },
                        sha256: function(e) {
                            return he()(e)
                        }
                    },
                    date: {
                        iso8601: function(e) {
                            return (e = void 0 === e ? pe.date.getDate() : e).toISOString().replace(/\.\d{3}Z$/, "Z")
                        }
                    },
                    Buffer: Uint8Array,
                    generateKey: function(e) {
                        for (var t = "", r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", n = r.length, i = 0; i < e; i++)
                            t += r.charAt(Math.floor(Math.random() * n));
                        return t
                    }
                }
                  , de = pe
                  , ye = function(e, t) {
                    for (var r = [0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049, 498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, 997073096, 1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, 651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275, 3060149565, 1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297, 1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, 1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277, 2852801631, 3708648649, 1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443, 3233442989, 3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, 4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143, 2394877945, 397917763, 1622183637, 3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669, 829329135, 1181335161, 3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, 2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112, 2463272603, 3855990285, 2094854071, 198958881, 2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727, 4167216745, 1634467795, 376229701, 2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918e3, 2847714899, 3736837829, 1202900863, 817233897, 3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746, 711928724, 3020668471, 3272380065, 1510334235, 755167117], n = ("undefined" != typeof Int32Array && (r = new Int32Array(r)),
                    -1 ^ ~~t), i = (e = new Uint8Array(e)).length, o = 0; o < i; o++)
                        n = r[255 & (n ^ e[o])] ^ n >>> 8;
                    return (-1 ^ n) >>> 0
                }
                  , ge = function(e) {
                    if (void 0 !== e)
                        return function e(t) {
                            return t.length < 8 ? e(t = "0".concat(t)) : t
                        }(Number(e).toString(16))
                };
                function me(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                var ve = function() {
                    function e(t, r, n, i) {
                        !function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, e),
                        this.file = t,
                        this.successProcess = n,
                        this.failProcess = i,
                        this.sliceLength = r,
                        this.retryTime = 0,
                        this.fileSize = t.size,
                        this.crc32Array = []
                    }
                    return function(e, t, r) {
                        t && me(e.prototype, t),
                        r && me(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(e, [{
                        key: "start",
                        value: function() {
                            this.readFileCrc32(this.file)
                        }
                    }, {
                        key: "readFileCrc32",
                        value: function(e) {
                            var t = this
                              , r = this.sliceLength
                              , n = e.slice || e.webkitSlice || e.mozSlice
                              , i = new FileReader
                              , o = 0
                              , s = 0
                              , a = 0;
                            !function c() {
                                s < e.size && (s = Math.min(o + r, e.size),
                                104857600 < e.size && e.size - s <= 5242880 && (s = e.size)),
                                i.readAsArrayBuffer(n.call(e, o, s)),
                                i.onload = function(r) {
                                    r = r.target.result,
                                    a = ye(r, 0),
                                    t.crc32Array.push({
                                        start: o,
                                        end: s,
                                        crc32: ge(a),
                                        buffer: r
                                    }),
                                    (o = s) < e.size ? c() : t.success(t.crc32Array)
                                }
                            }()
                        }
                    }, {
                        key: "success",
                        value: function(e) {
                            this.successProcess(e)
                        }
                    }, {
                        key: "fail",
                        value: function(e, t, r, n) {
                            3 <= this.retryTime ? this.failProcess() : (this.readFileCrc32(e, t, r, n),
                            this.retryTime++)
                        }
                    }]),
                    e
                }()
                  , be = 1000002
                  , _e = 1000003
                  , we = 1003e3
                  , ke = "The format of stsToken is incorrect.";
                function Se() {
                    return (Se = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function xe(e, t) {
                    (null == t || t > e.length) && (t = e.length);
                    for (var r = 0, n = new Array(t); r < t; r++)
                        n[r] = e[r];
                    return n
                }
                function Oe(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                var Ce = function() {
                    function e(t) {
                        var r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                        !function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, e),
                        this.context = t.context,
                        this.key = t.key,
                        this.isDirect = t.isDirect,
                        this.isImageBatchUpload = t.isImageBatchUpload,
                        this.file = t.file,
                        this.type = (this.isImageBatchUpload ? this.file[0] : this.file).type || "",
                        this.sliceLength = de.getFileSliceLength(this.file, r.getSliceFunc),
                        this.config = r
                    }
                    return function(e, t, r) {
                        t && Oe(e.prototype, t),
                        r && Oe(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(e, [{
                        key: "start",
                        value: function(e, t, r) {
                            this.successProcess = t,
                            this.failProcess = r,
                            this._st = Date.now(),
                            this.crc32(this.file, this.sliceLength)
                        }
                    }, {
                        key: "crc32",
                        value: function(e, t) {
                            var r = this;
                            this.isImageBatchUpload ? function() {
                                for (var t = e.length, n = [], i = 0; i < t; i++)
                                    new ve(e[i],e[i].size,(function(e) {
                                        n.push(e[0]),
                                        n.length === t && r.success(n)
                                    }
                                    ),(function(e) {
                                        r.fail(e)
                                    }
                                    )).start()
                            }() : !e || !e.size || e.size <= 0 ? this.fail({
                                errorCode: _e,
                                message: "There is a problem with the input file or fileSize."
                            }) : this.isDirect ? new ve(e,e.size,(function(e) {
                                r.success(e)
                            }
                            ),(function(e) {
                                r.fail({
                                    errorCode: _e,
                                    message: "get crc32 error: ".concat(e && e.message)
                                })
                            }
                            )).start() : this.sliceFile(e, t, (function(e) {
                                r.success(e)
                            }
                            ), (function(e) {
                                r.fail(e)
                            }
                            ))
                        }
                    }, {
                        key: "sliceFile",
                        value: function(e, t, r, n) {
                            for (var i = [], o = t, s = e.size, a = e.slice || e.webkitSlice || e.mozSlice, c = 0, u = 0, f = 0; u < s; )
                                u = Math.min(c + o, s),
                                i.push({
                                    start: c,
                                    end: u = 104857600 < s && s - u <= 5242880 ? s : u,
                                    crc32: 0
                                }),
                                c = u;
                            try {
                                !function t(o) {
                                    var c = new FileReader
                                      , u = i[o].start
                                      , l = i[o].end;
                                    c.readAsArrayBuffer(a.call(e, u, l)),
                                    c.onload = function(e) {
                                        e = e.target.result,
                                        f = ge(ye(e, 0)),
                                        i[o].crc32 = f,
                                        l === s ? r(i) : t(i.length - 1)
                                    }
                                    ,
                                    c.onerror = function(e) {
                                        var t = e.target.error.name;
                                        e = e.target.error.message,
                                        n({
                                            crc32Array: i,
                                            errorCode: 1000003,
                                            message: t + ": " + e
                                        })
                                    }
                                }(0)
                            } catch (t) {
                                n({
                                    message: t && t.toString()
                                })
                            }
                        }
                    }, {
                        key: "getCrc32Key",
                        value: function(e, t) {
                            return t = "[object Array]" === Object.prototype.toString.call(t) ? function(e) {
                                return function(e) {
                                    if (Array.isArray(e))
                                        return xe(e)
                                }(e) || function(e) {
                                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                                        return Array.from(e)
                                }(e) || function(e, t) {
                                    if (e) {
                                        if ("string" == typeof e)
                                            return xe(e, t);
                                        var r = Object.prototype.toString.call(e).slice(8, -1);
                                        return "Map" === (r = "Object" === r && e.constructor ? e.constructor.name : r) || "Set" === r ? Array.from(e) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? xe(e, t) : void 0
                                    }
                                }(e) || function() {
                                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                }()
                            }(t) : [t],
                            t.push(e[0].crc32, e[e.length - 1].crc32),
                            t.join("_")
                        }
                    }, {
                        key: "success",
                        value: function(e) {
                            var t = this.context
                              , r = this.key
                              , n = []
                              , i = [];
                            if (this.isImageBatchUpload)
                                for (var o = 0; o < this.file.length; o++)
                                    n.push(this.file[o].size),
                                    i.push(this.file[o].name);
                            else
                                n = this.file.size,
                                i = this.file.name;
                            var s = this.getCrc32Key(e, n);
                            (t = t.tasks[r]) && this.successProcess(Se(t, {
                                key: r,
                                crc32Array: e,
                                crc32Key: s,
                                sdkVersion: "1.1.10",
                                sliceLength: this.sliceLength,
                                extra: {
                                    message: "get crc32 success"
                                },
                                stage: "crc32",
                                type: "success",
                                fileSize: n,
                                fileName: i,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st,
                                isDirect: this.isDirect,
                                isImageBatchUpload: this.isImageBatchUpload
                            }))
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            var t = this.context
                              , r = this.key
                              , n = e && e.message ? e.message : "get crc32 error"
                              , i = e && e.errorCode;
                            e = e && e.crc32Array,
                            t = Se(t.tasks[r], {
                                crc32Array: e,
                                extra: {
                                    message: n,
                                    errorCode: i
                                },
                                type: "error",
                                stage: "crc32",
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st
                            }),
                            this.failProcess(t)
                        }
                    }]),
                    e
                }();
                function Te(e) {
                    return (Te = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function Ie(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function je(e, t) {
                    return (je = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function Pe(e) {
                    return (Pe = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var De = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && je(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = Pe(e);
                            return function(e, t) {
                                if (t && ("object" === Te(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = Pe(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t() {
                        var r;
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (r = e.call(this)).xhr = new XMLHttpRequest,
                        r._data = null,
                        r
                    }
                    return function(e, t, r) {
                        t && Ie(e.prototype, t),
                        r && Ie(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "_ajax",
                        value: function(e) {
                            var t = this
                              , r = this.xhr;
                            r.upload.onprogress = function(e) {
                                t.emit("progress", e)
                            }
                            ,
                            r.onreadystatechange = function(n) {
                                4 === r.readyState && (r.upload.onprogress = de.noop,
                                r.onreadystatechange = de.noop,
                                r.params = e,
                                t._data && t._data.url && (r.currentUrl = t._data.url),
                                200 <= r.status && r.status < 300 ? t.emit("complete", r) : 400 <= r.status && t.emit("error", r))
                            }
                            ,
                            r.onerror = function() {
                                r.errText = "unknow net error",
                                t.emit("error", r)
                            }
                            ,
                            r.ontimeout = function() {
                                r.errText = "timeout",
                                t.emit("error", r)
                            }
                            ,
                            r.onabort = function() {
                                r.errText = "abort",
                                t.emit("error", r)
                            }
                            ,
                            r.send(e)
                        }
                    }, {
                        key: "send",
                        value: function(e) {
                            var t = this;
                            return this._data = e,
                            this.xhr.open(e.method || "POST", e.url || "", !0),
                            e.headers && Object.keys(e.headers).forEach((function(r) {
                                t.xhr.setRequestHeader(r, e.headers[r])
                            }
                            )),
                            this.xhr.timeout = e.timeout || 0,
                            e.ontimeout && (this.xhr.ontimeout = e.ontimeout),
                            e.binary ? this.sendAsBinary(e) : e.custom ? "object" === Te(e.custom) ? this.sendAsCustom(JSON.stringify(e.custom)) : "none" === e.custom ? (delete e.custom,
                            this.sendAsCustom()) : this.sendAsCustom(e.custom) : this.sendAsFormData(e)
                        }
                    }, {
                        key: "sendAsBinary",
                        value: function(e) {
                            return this.xhr.setRequestHeader("Content-Type", "application/octet-stream"),
                            this.xhr.setRequestHeader("Content-Disposition", 'attachment; filename="'.concat(encodeURI(e.filename), '"')),
                            this._ajax(e.file)
                        }
                    }, {
                        key: "sendAsFormData",
                        value: function(e) {
                            t = (t = e.formData ? "function" == typeof e.formData ? e.formData() : e.formData : t) || [];
                            for (var t, r = new FormData, n = 0, i = t.length; n < i; n++) {
                                var o = r[n];
                                r.append(o.name, o.value)
                            }
                            return e.file && r.append(e.field, e.file, e.name),
                            this._ajax(r)
                        }
                    }, {
                        key: "sendAsCustom",
                        value: function(e) {
                            return this._ajax(e)
                        }
                    }, {
                        key: "abort",
                        value: function() {
                            this.xhr.onreadystatechange = de.noop,
                            this.xhr.abort()
                        }
                    }, {
                        key: "getResponse",
                        value: function() {
                            return this.xhr.response
                        }
                    }, {
                        key: "getText",
                        value: function() {
                            return this.xhr.responseText
                        }
                    }, {
                        key: "getJson",
                        value: function() {
                            return JSON.parse(this.xhr.responseText)
                        }
                    }]),
                    t
                }()
                  , Ae = (q = r(1),
                r.n(q))
                  , Ee = function(e) {
                    return !e || e.SessionToken && e.SecretAccessKey && (e.AccessKeyId || e.AccessKeyID)
                }
                  , Ue = function(e, t) {
                    if (e === $)
                        return te;
                    if (e === Z)
                        return re;
                    if (e === Y) {
                        if (t.objectConfig && t.objectConfig.spaceName)
                            return te;
                        if (t.objectConfig && t.objectConfig.serviceId)
                            return re;
                        if (t.videoConfig && t.videoConfig.spaceName)
                            return te;
                        if (t.imageConfig && t.imageConfig.serviceId)
                            return re
                    }
                    return te
                };
                function Be(e) {
                    return (Be = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function ze(e, t) {
                    var r, n = Object.keys(e);
                    return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(e),
                    t && (r = r.filter((function(t) {
                        return Object.getOwnPropertyDescriptor(e, t).enumerable
                    }
                    ))),
                    n.push.apply(n, r)),
                    n
                }
                function Fe(e) {
                    for (var t = 1; t < arguments.length; t++) {
                        var r = null != arguments[t] ? arguments[t] : {};
                        t % 2 ? ze(Object(r), !0).forEach((function(t) {
                            !function(e, t, r) {
                                t in e ? Object.defineProperty(e, t, {
                                    value: r,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : e[t] = r
                            }(e, t, r[t])
                        }
                        )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : ze(Object(r)).forEach((function(t) {
                            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t))
                        }
                        ))
                    }
                    return e
                }
                function Re() {
                    return (Re = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function Me(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function He(e, t) {
                    return (He = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function Ne(e) {
                    return (Ne = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var Le = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && He(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = Ne(e);
                            return function(e, t) {
                                if (t && ("object" === Be(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = Ne(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r, n) {
                        var i;
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (i = e.call(this)).options = r,
                        i.config = n,
                        i.uploaderCtx = r.context,
                        i.currFileCtx = r.context.tasks[r.key],
                        i.systemTimeGap = 0,
                        i.retryTime = n.retryTaskTime || 2,
                        i.hasRetryTime = 0,
                        i.isImageBatchUpload = !!i.options.isImageBatchUpload,
                        i.isDirect = i.options.isDirect,
                        i
                    }
                    return function(e, t, r) {
                        t && Me(e.prototype, t),
                        r && Me(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "start",
                        value: function(e, t, r) {
                            this.failProcess = r,
                            this.successProcess = t,
                            this._st = Date.now(),
                            t = (r = this.uploaderCtx._getCache(this.currFileCtx.crc32Key)) ? JSON.parse(r) : {},
                            !this.isDirect && t.oid && (t.uploadID || t.UploadID) ? this.resumeFromCache(t) : this.startPreUpload()
                        }
                    }, {
                        key: "startPreUpload",
                        value: function() {
                            var e = this
                              , t = ne[this.config.region]
                              , r = new De
                              , n = (r.on("complete", (function(t) {
                                if (t.response)
                                    try {
                                        var r, n, i, o, s, a, c, u, f, l, h, p, d = JSON.parse(t.response);
                                        d.ResponseMetadata.Error ? e.fail({
                                            xhr: t,
                                            errorCode: d.ResponseMetadata.Error.CodeN,
                                            error: d.ResponseMetadata.Error.Code,
                                            message: d.ResponseMetadata.Error.Message
                                        }) : (r = Ue(e.options.type, e.config),
                                        n = d.Result,
                                        o = (i = r === re ? n.UploadAddress : n.InnerUploadAddress.UploadNodes[0]).StoreInfos,
                                        s = i.UploadHosts,
                                        a = i.SessionKey,
                                        u = void 0 === (c = i.UploadHeader) ? {} : c,
                                        f = r === re ? s[0] : i.UploadHost,
                                        l = [],
                                        h = [],
                                        e.isImageBatchUpload && 1 < o.length ? o.forEach((function(e) {
                                            l.push(e.Auth),
                                            h.push(e.StoreUri)
                                        }
                                        )) : (l = o[0].Auth,
                                        h = o[0].StoreUri),
                                        p = Re(e.currFileCtx, {
                                            key: e.options.key,
                                            useBackupDomain: e.uploaderCtx.useBackupDomain,
                                            signature: l,
                                            type: "success",
                                            extra: {
                                                message: "prepare upload success"
                                            },
                                            stage: "preUpload",
                                            oid: h,
                                            systemTimeGap: e.systemTimeGap,
                                            tosDomain: "".concat(e.config.schema, "://").concat(f),
                                            xhr: t,
                                            UploadHeader: u,
                                            SessionKey: a,
                                            UploadID: o[0].UploadID,
                                            stageStartTime: e._st,
                                            stageEndTime: Date.now(),
                                            duration: Date.now() - e._st,
                                            totalDuration: Date.now() - e._st + e.currFileCtx.totalDuration
                                        }),
                                        e.successProcess && e.successProcess(p))
                                    } catch (r) {
                                        e.fail({
                                            error: "catch error: ".concat(r.toString()),
                                            xhr: t
                                        })
                                    }
                                else
                                    e.fail({
                                        error: "request fail: ".concat(t.statusText || t.errText || "UNKNOWN"),
                                        xhr: t
                                    })
                            }
                            )),
                            r.on("error", (function(t) {
                                var r;
                                e.uploaderCtx.useBackupDomain ? (r = {
                                    error: "request fail: ".concat(t.statusText || t.errText || "UNKNOWN"),
                                    xhr: t
                                },
                                t.response && (t = JSON.parse(t.response)).ResponseMetadata && t.ResponseMetadata.Error && (r.errorCode = t.ResponseMetadata.Error.CodeN,
                                r.error = t.ResponseMetadata.Error.Code,
                                r.message = t.ResponseMetadata.Error.Message),
                                e.fail(r)) : (e.hasRetryTime < e.retryTime - 1 ? e.hasRetryTime++ : e.uploaderCtx.useBackupDomain = !0,
                                e.startPreUpload())
                            }
                            )),
                            "")
                              , i = {}
                              , o = this.uploaderCtx.useBackupDomain
                              , s = Ue(this.options.type, this.config)
                              , a = (s === re && (n = this.config.imageHost || (o ? ae : se)[t],
                            i = {
                                Action: "ApplyImageUpload",
                                Version: "2018-08-01"
                            },
                            this.options.type === Z && (this.config.imageConfig && this.config.imageConfig.serviceId ? i.ServiceId = this.config.imageConfig.serviceId : i.SpaceName = this.config.videoConfig && this.config.videoConfig.spaceName),
                            this.options.type === Y && (i.ServiceId = this.config.objectConfig && this.config.objectConfig.serviceId || this.config.imageConfig && this.config.imageConfig.serviceId),
                            this.currFileCtx.fileSize && 1 < this.currFileCtx.fileSize.length && (i.UploadNum = this.currFileCtx.fileSize.length),
                            this.options.storeKey && (a = this.options.storeKey,
                            "[object Array]" === Object.prototype.toString.call(a) ? i.StoreKeys = a : "[object String]" === Object.prototype.toString.call(a) && (i.StoreKeys = [a]))),
                            s === te && (a = this.config.videoConfig && this.config.videoConfig.spaceName,
                            this.options.type === Y && this.config.objectConfig && this.config.objectConfig.spaceName && (a = this.config.objectConfig.spaceName),
                            n = this.config.videoHost || (o ? oe : ie)[t],
                            i = {
                                Action: "ApplyUploadInner",
                                Version: "2020-11-19",
                                SpaceName: a,
                                FileType: this.options.type,
                                IsInner: 1
                            },
                            this.currFileCtx.fileSize && (i.FileSize = this.currFileCtx.fileSize),
                            this.config.enOID && (i.EnOID = 1),
                            this.config.testHost && (i.TestHost = this.config.testHost)),
                            this.config.useFileExtension && this.currFileCtx.fileName && (this.options.type === Y || this.options.type === Z) && (o = this.currFileCtx.fileName,
                            (a = de.getFileSuffix(o)) && (i.FileExtension = a)),
                            this.config.accountId && (i["X-Account-Id"] = this.config.accountId),
                            this.options.type !== Z && this.options.type !== Y || !this.config.bizType || (i.BizType = this.config.bizType,
                            i.AppID = this.config.appId,
                            i.UserID = this.config.userId),
                            this.config.openExperiment && (i.app_id = this.config.appId,
                            i.user_id = this.config.userId),
                            i.s = Math.random().toString(36).substr(2),
                            this.options.fileSize && (i.fileSize = this.options.fileSize),
                            o = this.currFileCtx.proxyStsToken || this.config.stsToken,
                            de.toQueryString(i))
                              , c = o.AccessKeyID
                              , u = o.AccessKeyId
                              , f = o.SecretAccessKey
                              , l = o.SessionToken;
                            o = o.CurrentTime,
                            a = {
                                method: "GET",
                                url: "".concat(n, "?").concat(a),
                                timeout: this.config.gatewayTimeout || 3e4,
                                region: t,
                                params: i,
                                pathname: de.getPathByURL(n)
                            },
                            t = new Ae.a(a,s),
                            this.config.useServerCurrentTime && 6e4 < Math.abs(new Date(o) - new Date) && (this.systemTimeGap = new Date(o) - new Date),
                            i = this.systemTimeGap ? new Date((new Date).getTime() + this.systemTimeGap) : new Date,
                            t.addAuthorization({
                                accessKeyId: u || c,
                                secretAccessKey: f,
                                sessionToken: l
                            }, i),
                            r.send(a)
                        }
                    }, {
                        key: "resumeFromCache",
                        value: function(e) {
                            var t = this
                              , r = this.options.key
                              , n = new De
                              , i = (n.on("complete", (function(n) {
                                try {
                                    var i, o, s, a = JSON.parse(n.response);
                                    0 === a.success && 0 < a.payload.partList.length ? (i = t.confirmCache(a.payload.partList),
                                    o = e.hasMerge ? 5 : i.isAllFinished ? 4 : 3,
                                    s = Re(t.currFileCtx, e, {
                                        key: r,
                                        xhr: n,
                                        extra: {
                                            message: "prepare upload from cache success"
                                        },
                                        stage: "preUpload",
                                        type: "success",
                                        percent: 0,
                                        cacheTask: o,
                                        proxyStsToken: t.options.stsToken,
                                        currentTask: 1,
                                        status: 1,
                                        isBreak: 1,
                                        crc32Array: i.crc32Array,
                                        stageStartTime: t._st,
                                        stageEndTime: Date.now(),
                                        duration: Date.now() - t._st,
                                        totalDuration: Date.now() - t._st + t.currFileCtx.totalDuration
                                    }),
                                    t.successProcess && t.successProcess(s)) : t.startPreUpload()
                                } catch (n) {
                                    t.startPreUpload()
                                }
                            }
                            )),
                            n.on("error", (function(e) {
                                400 <= e.status ? t.startPreUpload() : t.fail({
                                    error: "request error",
                                    xhr: e
                                })
                            }
                            )),
                            this.config.userId);
                            n.send({
                                method: "get",
                                url: de.urlTemplate(this.config.getUploadListUrl, {
                                    tosDomain: e.tosDomain,
                                    oid: e.oid,
                                    uploadId: e.uploadID || e.UploadID
                                }),
                                headers: Fe({
                                    Authorization: e.signature,
                                    "X-Storage-U": encodeURIComponent(i)
                                }, e.UploadHeader),
                                timeout: 3e4
                            })
                        }
                    }, {
                        key: "confirmCache",
                        value: function(e) {
                            var t = this.currFileCtx.crc32Array
                              , r = {}
                              , n = (e.forEach((function(e) {
                                void 0 === r[e.partNumber - 1] && (r[e.partNumber - 1] = {
                                    tag: !0,
                                    crc32: e.crc32
                                })
                            }
                            )),
                            !0);
                            return e = t.map((function(e, t) {
                                return r[t] && r[t].tag && r[t].crc32 ? (e.crc32 = r[t].crc32,
                                e.finished = !0,
                                e.loaded = e.end - e.start) : n = !1,
                                e
                            }
                            )),
                            {
                                isAllFinished: n,
                                crc32Array: e
                            }
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            var t = e.xhr
                              , r = e.errorCode || 1001e3
                              , n = "prepare upload error: UNKNOWN";
                            t && (n = 0 === t.status ? "prepare upload error: NETERROR" : e.message || "prepare upload error: ".concat(t.status)),
                            n = Re(this.currFileCtx, {
                                extra: {
                                    message: n,
                                    error: e.error,
                                    errorCode: r
                                },
                                type: "error",
                                stage: "preUpload",
                                xhr: t,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st + this.currFileCtx.totalDuration
                            }),
                            this.uploaderCtx._removeTaskCache(this.options.key),
                            this.failProcess(n)
                        }
                    }]),
                    t
                }();
                function qe(e) {
                    return (qe = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function Ke() {
                    return (Ke = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function We(e, t) {
                    var r, n = Object.keys(e);
                    return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(e),
                    t && (r = r.filter((function(t) {
                        return Object.getOwnPropertyDescriptor(e, t).enumerable
                    }
                    ))),
                    n.push.apply(n, r)),
                    n
                }
                function Ve(e) {
                    for (var t = 1; t < arguments.length; t++) {
                        var r = null != arguments[t] ? arguments[t] : {};
                        t % 2 ? We(Object(r), !0).forEach((function(t) {
                            !function(e, t, r) {
                                t in e ? Object.defineProperty(e, t, {
                                    value: r,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : e[t] = r
                            }(e, t, r[t])
                        }
                        )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : We(Object(r)).forEach((function(t) {
                            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t))
                        }
                        ))
                    }
                    return e
                }
                function Je(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function Ge(e, t) {
                    return (Ge = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function Qe(e) {
                    return (Qe = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var Xe = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && Ge(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = Qe(e);
                            return function(e, t) {
                                if (t && ("object" === qe(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = Qe(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r, n) {
                        var i;
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (i = e.call(this)).options = r,
                        i.config = n,
                        i.transport = new De,
                        i.uploaderCtx = r.context,
                        i.currFileCtx = r.context.tasks[r.key],
                        i.eventInit(),
                        i
                    }
                    return function(e, t, r) {
                        t && Je(e.prototype, t),
                        r && Je(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "initUpload",
                        value: function() {
                            var e = this.options.context
                              , t = this.options.key
                              , r = {
                                oid: e.tasks[t].oid,
                                tosDomain: e.tasks[t].tosDomain
                            }
                              , n = (r = de.urlTemplate(this.config.initUploadFileUrl, r),
                            this.config.userId);
                            this.transport.send({
                                method: "post",
                                url: r,
                                headers: Ve({
                                    Authorization: e.tasks[t].signature,
                                    "X-Storage-U": encodeURIComponent(n)
                                }, this.currFileCtx.UploadHeader),
                                timeout: 3e4
                            })
                        }
                    }, {
                        key: "start",
                        value: function(e, t, r) {
                            this.successProcess = t,
                            this.failProcess = r,
                            this._st = Date.now(),
                            this.initUpload()
                        }
                    }, {
                        key: "eventInit",
                        value: function() {
                            var e = this;
                            this.transport.on("complete", (function(t) {
                                try {
                                    var r, n = JSON.parse(t.response), i = n.payload.uploadID;
                                    0 === n.success && i ? (r = Ke(e.currFileCtx, {
                                        UploadID: i,
                                        percent: 0,
                                        type: "success",
                                        extra: {
                                            message: "init upload id success"
                                        },
                                        stage: "initUploadID",
                                        xhr: t,
                                        stageStartTime: e._st,
                                        stageEndTime: Date.now(),
                                        duration: Date.now() - e._st,
                                        totalDuration: Date.now() - e._st + e.currFileCtx.totalDuration
                                    }),
                                    e.successProcess(r)) : e.fail({
                                        error: "fail! res.success: ".concat(n.success, ", uploadId:").concat(i),
                                        xhr: t
                                    })
                                } catch (r) {
                                    e.fail({
                                        error: "catch error: ".concat(JSON.stringify(r)),
                                        xhr: t
                                    })
                                }
                            }
                            )),
                            this.transport.on("error", (function(t) {
                                e.fail({
                                    error: "request fail: ".concat(t.statusText || t.errText || "UNKNOWN"),
                                    xhr: t
                                })
                            }
                            ))
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            var t = this.options.context
                              , r = this.options.key;
                            t = Ke(t.tasks[r], {
                                extra: {
                                    message: "init upload id error, ".concat(e.error),
                                    errorCode: 1002e3
                                },
                                type: "error",
                                stage: "initUploadID",
                                xhr: e.xhr,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st + this.currFileCtx.totalDuration
                            }),
                            this.uploaderCtx._removeTaskCache(this.options.key),
                            this.failProcess(t)
                        }
                    }]),
                    t
                }();
                function $e(e) {
                    return ($e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function Ze(e, t) {
                    var r, n = Object.keys(e);
                    return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(e),
                    t && (r = r.filter((function(t) {
                        return Object.getOwnPropertyDescriptor(e, t).enumerable
                    }
                    ))),
                    n.push.apply(n, r)),
                    n
                }
                function Ye(e) {
                    for (var t = 1; t < arguments.length; t++) {
                        var r = null != arguments[t] ? arguments[t] : {};
                        t % 2 ? Ze(Object(r), !0).forEach((function(t) {
                            !function(e, t, r) {
                                t in e ? Object.defineProperty(e, t, {
                                    value: r,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : e[t] = r
                            }(e, t, r[t])
                        }
                        )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Ze(Object(r)).forEach((function(t) {
                            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t))
                        }
                        ))
                    }
                    return e
                }
                function et(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function tt(e, t) {
                    return (tt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function rt(e) {
                    return (rt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var nt = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && tt(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = rt(e);
                            return function(e, t) {
                                if (t && ("object" === $e(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = rt(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r) {
                        var n, i = r.sliceItem, o = r.crc32, s = r.url, a = r.signature, c = r.uploadHeader, u = r.userId, f = r.retryTime, l = r.timeout;
                        return r = void 0 === (r = r.method) ? "put" : r,
                        function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (n = e.call(this)).fileSlice = i,
                        n.crc32 = o,
                        n.uploadUrl = s,
                        n.uploadHeader = c,
                        n.signature = a,
                        n.userId = u,
                        n.retryTime = f || 0,
                        n.method = r,
                        n.retryCount = 0,
                        n.timeout = l || 18e5,
                        n.ready = !1,
                        n.cancel = !1,
                        n.transport = new De,
                        n.eventInit(),
                        n
                    }
                    return function(e, t, r) {
                        t && et(e.prototype, t),
                        r && et(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "upload",
                        value: function(e, t) {
                            this.isParamsValid() && (this._st = Date.now(),
                            this.transport && this.transport.send({
                                method: this.method,
                                url: this.uploadUrl,
                                headers: Ye({
                                    Authorization: this.signature,
                                    "Content-CRC32": this.crc32,
                                    "X-Storage-U": encodeURIComponent(this.userId)
                                }, this.uploadHeader),
                                file: this.fileSlice,
                                binary: 1,
                                timeout: this.timeout
                            }),
                            e && this.emit("retry", t))
                        }
                    }, {
                        key: "isParamsValid",
                        value: function() {
                            return this.fileSlice && (this.fileSlice.size || this.fileSlice.byteLength) ? this.crc32 ? !!this.uploadUrl || (this.emit("error", {
                                message: "slice upload failed: NOURL",
                                crc32: this.crc32,
                                size: this.fileSlice.size || this.fileSlice.byteLength
                            }),
                            !1) : (this.emit("error", {
                                message: "slice upload failed: NOCRC32",
                                crc32: this.crc32,
                                size: this.fileSlice.size || this.fileSlice.byteLength
                            }),
                            !1) : (this.emit("error", {
                                message: "slice upload failed: NOCONTENT",
                                crc32: this.crc32
                            }),
                            !1)
                        }
                    }, {
                        key: "eventInit",
                        value: function() {
                            var e = this;
                            this.transport.on("complete", (function(t) {
                                e.success(t)
                            }
                            )),
                            this.transport.on("error", (function(t) {
                                e.fail(t)
                            }
                            )),
                            this.transport.on("progress", (function(t) {
                                e.process(t)
                            }
                            ))
                        }
                    }, {
                        key: "success",
                        value: function(e) {
                            this.ready = !0;
                            var t = Date.now() - this._st
                              , r = this.fileSlice.size || this.fileSlice.byteLength;
                            this.emit("complete", {
                                crc32: this.crc32,
                                size: r,
                                speed: r / t,
                                xhr: e,
                                sliceStartTime: this._st,
                                sliceEndTime: Date.now(),
                                sliceDuration: Date.now() - this._st
                            })
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            var t = this;
                            if (!this.cancel) {
                                var r = {
                                    crc32: this.crc32,
                                    size: this.fileSlice.size || this.fileSlice.byteLength,
                                    xhr: e,
                                    sliceStartTime: this._st,
                                    sliceEndTime: Date.now(),
                                    sliceDuration: Date.now() - this._st
                                };
                                if (e && 401 === e.status)
                                    this.emit("error", Ye({
                                        message: "slice upload failed: UNAUTHORIZED"
                                    }, r));
                                else {
                                    var n = "slice upload failed: UNKNOWN";
                                    if (e && (n = e.status ? "slice upload failed: ".concat(e.status) : "slice upload failed: NETERROR"),
                                    this.retryCount < this.retryTime)
                                        return setTimeout((function() {
                                            t.upload(!0, Ye({
                                                message: n
                                            }, r))
                                        }
                                        ), 1e3),
                                        void this.retryCount++;
                                    this.emit("error", Ye({
                                        message: n
                                    }, r))
                                }
                            }
                        }
                    }, {
                        key: "process",
                        value: function(e) {
                            this.cancel || this.emit("progress", {
                                crc32: this.crc32,
                                loaded: e.loaded || 0,
                                total: e.total || 0
                            })
                        }
                    }, {
                        key: "abort",
                        value: function() {
                            this.transport && (this.cancel = !0,
                            this.transport.abort())
                        }
                    }, {
                        key: "destroy",
                        value: function() {
                            this.transport = null
                        }
                    }]),
                    t
                }()
                  , it = (K = r(2),
                r.n(K));
                function ot(e) {
                    return (ot = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function st() {
                    return (st = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function at(e, t) {
                    (null == t || t > e.length) && (t = e.length);
                    for (var r = 0, n = new Array(t); r < t; r++)
                        n[r] = e[r];
                    return n
                }
                function ct(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function ut(e, t) {
                    return (ut = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function ft(e) {
                    return (ft = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var lt = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && ut(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = ft(e);
                            return function(e, t) {
                                if (t && ("object" === ot(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = ft(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r) {
                        var n, i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (n = e.call(this)).file = r.file,
                        n.context = r.context,
                        n.key = r.key,
                        n.config = i,
                        n.finishArr = [],
                        n.errorLength = 0,
                        n.finishSize = 0,
                        n.retryUploadTime = Number(i.retryUploadTime) || 2,
                        n.progressMonitorTime = Number(i.progressMonitorTime) || 10,
                        n.progressMonitorSpeed = Number(i.progressMonitorSpeed) || 50,
                        n.uploadSliceCount = Number(i.uploadSliceCount) || 3,
                        n.realtimeSpeedInterval = Number(i.realtimeSpeedInterval) || 5,
                        n.processRetry = 0,
                        n.lastFinishSize = -1,
                        n.lastProcessPercent = -1,
                        n.lastIntervalSize = -1,
                        n.lastCalculateSpeedTime = -1,
                        n.lastCalculateSpeedSize = 0,
                        n.uploadHandlers = {},
                        n
                    }
                    return function(e, t, r) {
                        t && ct(e.prototype, t),
                        r && ct(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "start",
                        value: function(e, t, r) {
                            this.failProcess = r,
                            this.successProcess = t,
                            this.errorLength = 0,
                            this.currentCtx = this.context.tasks[this.key],
                            this.crc32Array = this.context.tasks[this.key].crc32Array,
                            this.uploadSliceCount = this.uploadSliceCount > this.crc32Array.length ? this.crc32Array.length : this.uploadSliceCount,
                            this.lastIndex = 0,
                            this.uploading = [],
                            this._uploadSize = this.crc32Array.reduce((function(e, t) {
                                return e + (t.finished ? 0 : t.end - t.start)
                            }
                            ), 0),
                            this._st = Date.now(),
                            this._lastSaveTime = Date.now(),
                            this.lastCalculateSpeedTime = this._st,
                            this.initWorker(),
                            this.setProgressMonitor(),
                            this.threadUpload()
                        }
                    }, {
                        key: "initWorker",
                        value: function() {
                            var e, t = this;
                            this.worker || (e = this.crc32Array,
                            this.worker = new it.a,
                            this.worker.onmessage = function(r) {
                                r = function(e, t) {
                                    return function(e) {
                                        if (Array.isArray(e))
                                            return e
                                    }(e) || function(e, t) {
                                        var r = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                                        if (null != r) {
                                            var n, i, o = [], s = !0, a = !1;
                                            try {
                                                for (r = r.call(e); !(s = (n = r.next()).done) && (o.push(n.value),
                                                !t || o.length !== t); s = !0)
                                                    ;
                                            } catch (e) {
                                                a = !0,
                                                i = e
                                            } finally {
                                                try {
                                                    s || null == r.return || r.return()
                                                } finally {
                                                    if (a)
                                                        throw i
                                                }
                                            }
                                            return o
                                        }
                                    }(e, t) || function(e, t) {
                                        if (e) {
                                            if ("string" == typeof e)
                                                return at(e, t);
                                            var r = Object.prototype.toString.call(e).slice(8, -1);
                                            return "Map" === (r = "Object" === r && e.constructor ? e.constructor.name : r) || "Set" === r ? Array.from(e) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? at(e, t) : void 0
                                        }
                                    }(e, t) || function() {
                                        throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                    }()
                                }(r.data, 4);
                                var n = r[0]
                                  , i = r[1]
                                  , o = r[2]
                                  , s = (r = r[3],
                                (new Date).getTime())
                                  , a = e[o];
                                a.crc32 = i,
                                a.crc32StartTime = r,
                                a.crc32EndTime = s,
                                a.crc32Duration = s - r,
                                t.upload(a, n, o)
                            }
                            )
                        }
                    }, {
                        key: "read",
                        value: function(e, t) {
                            var r = this
                              , n = this.file
                              , i = n.slice || n.webkitSlice || n.mozSlice
                              , o = new FileReader;
                            o.onload = function(e) {
                                var n = (new Date).getTime();
                                r.worker.postMessage([e.target.result, t, n, !!r.config.clientEncrypt, r.currentCtx.clientEncryptKey, r.crc32Array.length - 1 === t], [e.target.result])
                            }
                            ,
                            o.onerror = function() {
                                r.stop(),
                                r.fail({
                                    extra: {
                                        message: "An error occurred reading the file",
                                        errorCode: 1003003
                                    }
                                })
                            }
                            ,
                            o.readAsArrayBuffer(i.call(n, e.start, e.end))
                        }
                    }, {
                        key: "threadUpload",
                        value: function() {
                            if (this.uploading.length < this.uploadSliceCount) {
                                var e = this.lastIndex
                                  , t = this.crc32Array[e];
                                if (t) {
                                    if (t.finished) {
                                        if (-1 === this.finishArr.indexOf(t.start) && (this.finishArr.push(t.start),
                                        this.finishArr.length >= this.crc32Array.length))
                                            return this.stop(),
                                            void this.success()
                                    } else
                                        t.loaded = 0,
                                        this.uploading.push(e),
                                        this.read(t, e);
                                    this.lastIndex++,
                                    this.threadUpload()
                                }
                            }
                        }
                    }, {
                        key: "stop",
                        value: function() {
                            var e = this;
                            Object.keys(this.uploadHandlers).forEach((function(t) {
                                e.uploadHandlers[t].abort(),
                                e.uploadHandlers[t].destroy()
                            }
                            )),
                            this.uploadHandlers = {},
                            this.worker && this.worker.terminate(),
                            this.worker = null,
                            this.clearMonitor()
                        }
                    }, {
                        key: "setProgressMonitor",
                        value: function() {
                            var e = this;
                            this.progressMonitorInterval = setInterval((function() {
                                var t, r = e.finishSize;
                                r - e.lastIntervalSize < e.progressMonitorTime * e.progressMonitorSpeed * 1024 ? (t = st(e.currentCtx, {
                                    stage: "process",
                                    type: "warn",
                                    extra: {
                                        message: "percent are not updated in ".concat(e.progressMonitorTime, " seconds")
                                    }
                                }),
                                e.context.logger.send(t),
                                e.context._broadcast("slowProgress", t),
                                e.clearMonitor()) : e.lastIntervalSize = r
                            }
                            ), 1e3 * this.progressMonitorTime)
                        }
                    }, {
                        key: "clearMonitor",
                        value: function() {
                            this.progressMonitorInterval && clearInterval(this.progressMonitorInterval)
                        }
                    }, {
                        key: "upload",
                        value: function(e, t, r) {
                            var n = this
                              , i = e.crc32
                              , o = (this.context._saveTask(this.key, {
                                crc32Array: this.crc32Array
                            }),
                            {
                                number: r + 1,
                                uploadId: this.currentCtx.UploadID || this.currentCtx.uploadID,
                                oid: this.currentCtx.oid,
                                tosDomain: this.currentCtx.tosDomain
                            })
                              , s = (o = de.urlTemplate(this.config.uploadChunkedUrl, o),
                            this.config.userId)
                              , a = this.config.uploadHttpMethod || "put"
                              , c = this.config.uploadTimeout;
                            (this.config.clientEncrypt || (t = de.fileSlice(this.file, e.start, e.end)),
                            t = new nt({
                                sliceItem: t,
                                crc32: i,
                                url: o,
                                signature: this.currentCtx.signature,
                                uploadHeader: this.currentCtx.UploadHeader,
                                userId: s,
                                method: a,
                                retryTime: this.retryUploadTime,
                                timeout: c
                            })).on("complete", (function(t) {
                                1 === n.currentCtx.status && (t.start = e.start,
                                t.crc32StartTime = e.crc32StartTime,
                                t.crc32EndTime = e.crc32EndTime,
                                t.crc32Duration = e.crc32Duration,
                                t.index = r,
                                n.fileSliceSuccess(t))
                            }
                            )),
                            t.on("error", (function(t) {
                                1 === n.currentCtx.status && (t.start = e.start,
                                t.crc32StartTime = e.crc32StartTime,
                                t.crc32EndTime = e.crc32EndTime,
                                t.crc32Duration = e.crc32Duration,
                                t.index = r,
                                n.fail(t))
                            }
                            )),
                            t.on("progress", (function(t) {
                                1 === n.currentCtx.status && (t.start = e.start,
                                t.index = r,
                                n.process(t))
                            }
                            )),
                            t.on("retry", (function(t) {
                                1 === n.currentCtx.status && (t.start = e.start,
                                t.index = r,
                                n.retry(t))
                            }
                            )),
                            t.upload(),
                            this.uploadHandlers[r] = t
                        }
                    }, {
                        key: "success",
                        value: function(e) {
                            this.finishArr = [];
                            var t = Date.now() - this._st;
                            t = this._uploadSize / t,
                            t = st(this.currentCtx, {
                                type: "success",
                                stage: "process",
                                percent: 100,
                                extra: {
                                    message: "upload all success"
                                },
                                speed: t,
                                xhr: e,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._lastSaveTime + this.currentCtx.totalDuration,
                                isAllFinish: !0
                            }),
                            this.worker && this.worker.terminate(),
                            this.successProcess(t)
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            var t = this.errorFormat(e);
                            t.type = "error",
                            void 0 !== e.statusCode && st(this.currentCtx, {
                                statusCode: e.statusCode
                            }),
                            this.errorLength || (this.context.logger.send(st({}, t)),
                            this.stop(),
                            this.context._broadcast("error", t),
                            this.currentCtx.isBreak ? this.context._cancel(this.key) : this.context._pause(this.key),
                            this.errorLength++)
                        }
                    }, {
                        key: "retry",
                        value: function(e) {
                            e = this.errorFormat(e),
                            this.context.logger.send(st({}, e, {
                                type: "retry"
                            }))
                        }
                    }, {
                        key: "fileSliceSuccess",
                        value: function(e) {
                            var t, r = e.index, n = Date.now(), i = (-1 === this.finishArr.indexOf(e.start) && this.finishArr.push(e.start),
                            this.crc32Array[r].finished = !0,
                            this.crc32Array[r].speed = e.speed,
                            {
                                message: "slice upload success"
                            });
                            if (e.xhr && (t = e.xhr,
                            i.currentUrl = t.currentUrl || "",
                            st(this.currentCtx, {
                                req: {
                                    url: t.currentUrl,
                                    param: t.params
                                },
                                res: {
                                    status: t.status,
                                    body: t.responseText,
                                    header: t.getAllResponseHeaders()
                                }
                            }),
                            delete e.xhr),
                            this.context.logger.send(st(this.currentCtx, {
                                stage: "process",
                                type: "success",
                                sliceIndex: r,
                                extra: i,
                                totalDuration: n - this._lastSaveTime + this.currentCtx.totalDuration,
                                sliceStartTime: e.sliceStartTime,
                                sliceEndTime: e.sliceEndTime,
                                sliceDuration: e.sliceDuration,
                                crc32StartTime: e.crc32StartTime,
                                crc32EndTime: e.crc32EndTime,
                                crc32Duration: e.crc32Duration
                            })),
                            this._lastSaveTime = n,
                            this.context._saveTask(this.key),
                            this.uploading.splice(this.uploading.indexOf(r), 1),
                            this.uploadHandlers[r] && delete this.uploadHandlers[r],
                            this.finishArr.length >= this.crc32Array.length)
                                return this.stop(),
                                void this.success(e.xhr);
                            this.threadUpload()
                        }
                    }, {
                        key: "getFinishSize",
                        value: function(e, t) {
                            var r = t.crc32
                              , n = 0;
                            return e.forEach((function(e) {
                                e.crc32 === r ? (e.loaded = t.loaded,
                                n += t.loaded) : (e.loaded || (e.loaded = 0),
                                n += e.loaded)
                            }
                            )),
                            n
                        }
                    }, {
                        key: "process",
                        value: function(e) {
                            var t = this.currentCtx.realtimeSpeed || 0
                              , r = this.currentCtx.fileSize
                              , n = (this.finishSize = this.getFinishSize(this.crc32Array, e),
                            this.finishSize > this.lastFinishSize && ((e = new Date).getTime() - this.lastCalculateSpeedTime > 1e3 * this.realtimeSpeedInterval && (i = e.getTime() - this.lastCalculateSpeedTime,
                            n = this.finishSize - this.lastCalculateSpeedSize,
                            t = Math.floor(n / i),
                            this.lastCalculateSpeedTime = e.getTime(),
                            this.lastCalculateSpeedSize = this.finishSize),
                            this.lastFinishSize = this.finishSize),
                            Math.floor(this.finishSize / r * 100 * 100) / 100 || 0)
                              , i = st(this.currentCtx, {
                                stage: "process",
                                percent: n,
                                realtimeSpeed: t
                            });
                            n > this.lastProcessPercent && 100 !== n && (this.lastProcessPercent = n,
                            this.context._broadcast("progress", i))
                        }
                    }, {
                        key: "errorFormat",
                        value: function(e) {
                            var t = this.currentCtx.totalDuration
                              , r = Date.now() - this._st
                              , n = e.index
                              , i = ((i = e.crc32 ? {
                                message: e.message,
                                data: e.crc32,
                                size: e.size
                            } : e.extra).errorCode = i.errorCode || we,
                            st(this.currentCtx, {
                                extra: i,
                                sliceIndex: n,
                                stage: "process",
                                req: {},
                                res: {},
                                totalDuration: r + t,
                                sliceStartTime: e.sliceStartTime,
                                sliceEndTime: e.sliceEndTime,
                                sliceDuration: e.sliceDuration,
                                crc32StartTime: e.crc32StartTime,
                                crc32EndTime: e.crc32EndTime,
                                crc32Duration: e.crc32Duration
                            }));
                            return e.xhr && (n = e.xhr,
                            i.req = {
                                url: e.xhr.currentUrl
                            },
                            i.res = {
                                status: n.status,
                                body: n.responseText,
                                header: n.getAllResponseHeaders()
                            },
                            delete e.xhr),
                            i
                        }
                    }]),
                    t
                }();
                function ht(e) {
                    return (ht = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function pt() {
                    return (pt = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function dt(e, t) {
                    var r, n = Object.keys(e);
                    return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(e),
                    t && (r = r.filter((function(t) {
                        return Object.getOwnPropertyDescriptor(e, t).enumerable
                    }
                    ))),
                    n.push.apply(n, r)),
                    n
                }
                function yt(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function gt(e, t) {
                    return (gt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function mt(e) {
                    return (mt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var vt = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && gt(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = mt(e);
                            return function(e, t) {
                                if (t && ("object" === ht(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = mt(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r, n) {
                        var i;
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (i = e.call(this)).options = r,
                        i.config = n,
                        i.transport = new De,
                        i.eventInit(),
                        i.errorCount = 0,
                        i.uploaderCtx = r.context,
                        i.currFileCtx = r.context.tasks[r.key],
                        i
                    }
                    return function(e, t, r) {
                        t && yt(e.prototype, t),
                        r && yt(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "mergeFile",
                        value: function() {
                            for (var e = {
                                oid: this.currFileCtx.oid,
                                uploadId: this.currFileCtx.UploadID || this.currFileCtx.uploadID,
                                tosDomain: this.currFileCtx.tosDomain
                            }, t = this.currFileCtx.crc32Array, r = "", n = 0; n < t.length; n++)
                                r = (r ? "".concat(r, ",") : "").concat(n + 1, ":").concat(t[n].crc32);
                            e = de.urlTemplate(this.config.uploadMergeUrl, e);
                            var i = this.config.userId;
                            i = function(e) {
                                for (var t = 1; t < arguments.length; t++) {
                                    var r = null != arguments[t] ? arguments[t] : {};
                                    t % 2 ? dt(Object(r), !0).forEach((function(t) {
                                        !function(e, t, r) {
                                            t in e ? Object.defineProperty(e, t, {
                                                value: r,
                                                enumerable: !0,
                                                configurable: !0,
                                                writable: !0
                                            }) : e[t] = r
                                        }(e, t, r[t])
                                    }
                                    )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : dt(Object(r)).forEach((function(t) {
                                        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t))
                                    }
                                    ))
                                }
                                return e
                            }({
                                Authorization: this.currFileCtx.signature,
                                "X-Storage-U": encodeURIComponent(i)
                            }, this.currFileCtx.UploadHeader),
                            this.config.clientEncrypt && (i["x-upload-encryption-mode"] = 2,
                            i["x-upload-encryption-key"] = btoa(this.currFileCtx.clientEncryptKey)),
                            this.transport.send({
                                method: "post",
                                url: e,
                                headers: i,
                                custom: r
                            })
                        }
                    }, {
                        key: "start",
                        value: function(e, t, r) {
                            this.successProcess = t,
                            this.failProcess = r,
                            this._st = Date.now(),
                            this.mergeFile()
                        }
                    }, {
                        key: "eventInit",
                        value: function() {
                            var e = this
                              , t = this.options.stage;
                            this.transport.on("complete", (function(r) {
                                try {
                                    var n = JSON.parse(r.response);
                                    0 === n.success && n.payload.key ? (pt(e.currFileCtx, {
                                        stage: t,
                                        type: "success",
                                        hasMerge: !0,
                                        extra: {
                                            message: "merge file success"
                                        },
                                        xhr: r,
                                        stageStartTime: e._st,
                                        stageEndTime: Date.now(),
                                        duration: Date.now() - e._st,
                                        totalDuration: Date.now() - e._st + e.currFileCtx.totalDuration
                                    }),
                                    e.successProcess(e.currFileCtx)) : e.fail({
                                        error: "fail! result.success:".concat(n.success),
                                        xhr: r
                                    })
                                } catch (n) {
                                    e.fail({
                                        error: "response parse error: ".concat(JSON.stringify(n)),
                                        xhr: r
                                    })
                                }
                            }
                            )),
                            this.transport.on("error", (function(t) {
                                e.fail({
                                    error: "request fail: ".concat(t.statusText || t.errText),
                                    xhr: t
                                })
                            }
                            ))
                        }
                    }, {
                        key: "getProcessIndex",
                        value: function(e) {
                            var t = 0;
                            return e.forEach((function(e, r) {
                                "process" === e.stage && (t = r)
                            }
                            )),
                            t
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            e = pt(this.currFileCtx, {
                                extra: {
                                    message: "merge file error, ".concat(e.error),
                                    errorCode: 1004e3
                                },
                                type: "error",
                                stage: this.options.stage,
                                xhr: e.xhr,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st + this.currFileCtx.totalDuration
                            }),
                            this.failProcess(e)
                        }
                    }]),
                    t
                }();
                function bt(e) {
                    return (bt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function _t() {
                    return (_t = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function wt(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function kt(e, t) {
                    return (kt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function St(e) {
                    return (St = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var xt = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && kt(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = St(e);
                            return function(e, t) {
                                if (t && ("object" === bt(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = St(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r) {
                        var n, i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (n = e.call(this)).options = r,
                        n.file = r.file,
                        n.context = r.context,
                        n.key = r.key,
                        n.config = i,
                        n.finishArr = [],
                        n.errorLength = 0,
                        n.finishSize = 0,
                        n.retryUploadTime = 0,
                        n.processRetry = 0,
                        n.lastFinishSize = -1,
                        n.lastProcessPercent = -1,
                        n.lastIntervalSize = -1,
                        n
                    }
                    return function(e, t, r) {
                        t && wt(e.prototype, t),
                        r && wt(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "start",
                        value: function(e, t, r) {
                            this.failProcess = r,
                            this.successProcess = t,
                            this.currentCtx = this.context.tasks[this.key],
                            this.crc32Array = this.context.tasks[this.key].crc32Array,
                            this._uploadSize = this.file.size,
                            this._st = Date.now(),
                            this.upload()
                        }
                    }, {
                        key: "stop",
                        value: function() {
                            this.uploader && (this.uploader.abort(),
                            this.uploader.destroy())
                        }
                    }, {
                        key: "upload",
                        value: function() {
                            for (var e = this, t = this.crc32Array.length, r = 0, n = 0, i = 0; i < t; i++) {
                                var o = (s = this.crc32Array[i]).buffer
                                  , s = s.crc32
                                  , a = this.currentCtx.oid
                                  , c = this.currentCtx.signature
                                  , u = (a = {
                                    oid: "[object Array]" === Object.prototype.toString.call(a) ? a[i] : a,
                                    tosDomain: this.currentCtx.tosDomain
                                },
                                a = de.urlTemplate(this.config.directUploadFileUrl, a),
                                this.config.userId)
                                  , f = this.config.uploadHttpMethod || "put"
                                  , l = this.config.uploadTimeout;
                                (o = new nt({
                                    sliceItem: o,
                                    crc32: s,
                                    url: a,
                                    signature: "[object Array]" === Object.prototype.toString.call(c) ? c[i] : c,
                                    uploadHeader: this.currentCtx.UploadHeader,
                                    userId: u,
                                    retryTime: this.retryUploadTime,
                                    method: f,
                                    timeout: l
                                })).on("complete", (function(i) {
                                    n + ++r === t && e.success(i.xhr)
                                }
                                )),
                                o.on("error", (function(r) {
                                    ++n === t && e.fail(r.xhr)
                                }
                                )),
                                o.on("progress", (function(t) {
                                    e.process(t)
                                }
                                )),
                                o.upload(),
                                this.uploader = o
                            }
                        }
                    }, {
                        key: "success",
                        value: function(e) {
                            this.finishArr = [];
                            var t = Date.now() - this._st;
                            t = this._uploadSize / t,
                            t = _t(this.currentCtx, {
                                type: "success",
                                stage: "process",
                                percent: 100,
                                extra: {
                                    message: "direct upload success"
                                },
                                speed: t,
                                xhr: e,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st + this.currentCtx.totalDuration
                            }),
                            this.successProcess(t)
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            e = _t(this.currentCtx, {
                                extra: {
                                    message: "direct upload error: ".concat(e.errText),
                                    errorCode: we
                                },
                                type: "error",
                                stage: "process",
                                xhr: e,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st + this.currentCtx.totalDuration
                            }),
                            this.failProcess(e)
                        }
                    }, {
                        key: "process",
                        value: function(e) {
                            var t = this.currentCtx.fileSize;
                            this.finishSize = e.loaded,
                            this.finishSize > this.lastFinishSize && (this.lastFinishSize = this.finishSize),
                            e = Math.floor(this.finishSize / t * 100 * 100) / 100 || 0,
                            t = _t(this.currentCtx, {
                                stage: "process",
                                percent: e
                            }),
                            e > this.lastProcessPercent && 100 !== e && (this.lastProcessPercent = e,
                            this.context._broadcast("progress", t))
                        }
                    }]),
                    t
                }();
                function Ot(e) {
                    return (Ot = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function Ct() {
                    return (Ct = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function Tt(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function It(e, t) {
                    return (It = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function jt(e) {
                    return (jt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var Pt = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && It(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = jt(e);
                            return function(e, t) {
                                if (t && ("object" === Ot(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = jt(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r) {
                        var n, i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (n = e.call(this)).options = r,
                        n.file = r.file,
                        n.context = r.context,
                        n.key = r.key,
                        n.config = i,
                        n.errorLength = 0,
                        n.retryUploadTime = Number(i.retryUploadTime) || 2,
                        n.maxUploadSliceCount = Number(i.uploadSliceCount) || 5,
                        n.uploadQueue = [],
                        n.crc32Array = [],
                        n.uploadSliceCount = 0,
                        n.isCalcCrc32 = !1,
                        n.isFileReading = !1,
                        n.hasStarted = !1,
                        n.hasCompleteUpload = !1,
                        n
                    }
                    return function(e, t, r) {
                        t && Tt(e.prototype, t),
                        r && Tt(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "start",
                        value: function(e, t, r) {
                            this.failProcess = r,
                            this.successProcess = t,
                            this.currentCtx = this.context.tasks[this.key],
                            this.hasStarted = !0,
                            this._st = Date.now(),
                            this.initWorker()
                        }
                    }, {
                        key: "initWorker",
                        value: function() {
                            var e = this;
                            this.worker || (this.worker = new it.a,
                            this.worker.onmessage = function(t) {
                                e.isCalcCrc32 = !1;
                                var r = t.data[0]
                                  , n = t.data[2]
                                  , i = t.data[1];
                                e.uploadQueue.forEach((function(t, o) {
                                    t.index === n && (e.uploadQueue[o].crc32 = i,
                                    e.uploadQueue[o].fileSliceBuffer = r,
                                    e.crc32Array[n] = {
                                        crc32: i
                                    })
                                }
                                )),
                                e.startUploadQueue()
                            }
                            ,
                            this.startUploadQueue())
                        }
                    }, {
                        key: "addStreamSlice",
                        value: function(e) {
                            var t = this
                              , r = e.fileSlice
                              , n = e.index;
                            (this.isFileReading = !0,
                            e = new FileReader).readAsArrayBuffer(r),
                            e.onload = function(e) {
                                t.isFileReading = !1,
                                e = e.target.result,
                                t.uploadQueue.push({
                                    fileSliceBuffer: e,
                                    index: n
                                }),
                                t.hasStarted && t.startUploadQueue()
                            }
                        }
                    }, {
                        key: "completeStreamUpload",
                        value: function() {
                            this.hasCompleteUpload = !0,
                            0 !== this.uploadQueue.length || this.isFileReading || this.success()
                        }
                    }, {
                        key: "startUploadQueue",
                        value: function() {
                            var e;
                            this.uploadSliceCount <= this.maxUploadSliceCount && 0 < this.uploadQueue.length && this.uploadQueue[0].crc32 ? (e = this.uploadQueue.shift(),
                            this.uploadSliceCount++,
                            this.upload({
                                sliceItem: e.fileSliceBuffer,
                                index: e.index,
                                crc32: e.crc32
                            })) : 0 < this.uploadQueue.length && !this.uploadQueue[0].crc32 && this.startCrc32Queue()
                        }
                    }, {
                        key: "startCrc32Queue",
                        value: function() {
                            if (!this.isCalcCrc32)
                                for (var e = 0; e < this.uploadQueue.length; e++) {
                                    var t = this.uploadQueue[e];
                                    if (!t.crc32) {
                                        this.isCalcCrc32 = !0,
                                        this.worker.postMessage([t.fileSliceBuffer, t.index], [t.fileSliceBuffer]);
                                        break
                                    }
                                }
                        }
                    }, {
                        key: "upload",
                        value: function(e) {
                            var t = this
                              , r = e.sliceItem
                              , n = e.index
                              , i = (e = e.crc32,
                            this.currentCtx.signature)
                              , o = {
                                number: n + 1,
                                uploadId: this.currentCtx.UploadID || this.currentCtx.uploadID,
                                oid: this.currentCtx.oid,
                                tosDomain: this.currentCtx.tosDomain
                            }
                              , s = (o = de.urlTemplate(this.config.uploadChunkedUrl, o),
                            this.config.userId);
                            (r = new nt({
                                sliceItem: r,
                                crc32: e,
                                url: o,
                                signature: i,
                                uploadHeader: this.currentCtx.UploadHeader,
                                userId: s,
                                retryTime: this.retryUploadTime,
                                method: "put",
                                timeout: this.config.uploadTimeout
                            })).on("complete", (function(e) {
                                1 === t.currentCtx.status && (e.index = n,
                                t.fileSliceSuccess(e))
                            }
                            )),
                            r.on("error", (function(e) {
                                1 === t.currentCtx.status && (e.index = n,
                                t.fail(e))
                            }
                            )),
                            r.upload()
                        }
                    }, {
                        key: "fileSliceSuccess",
                        value: function(e) {
                            var t = e.index
                              , r = Date.now()
                              , n = {
                                message: "stream slice upload success"
                            }
                              , i = (e.xhr && (i = e.xhr,
                            n.currentUrl = i.currentUrl || "",
                            Ct(this.currentCtx, {
                                req: {
                                    url: i.currentUrl,
                                    param: i.params
                                },
                                res: {
                                    status: i.status,
                                    body: i.responseText,
                                    header: i.getAllResponseHeaders()
                                }
                            }),
                            delete e.xhr),
                            this.context.logger.send(Ct(this.currentCtx, {
                                stage: "process",
                                type: "success",
                                sliceIndex: t,
                                extra: n,
                                totalDuration: r - this._lastSaveTime + this.currentCtx.totalDuration
                            })),
                            Ct(this.currentCtx, {
                                uploadQueueLength: this.uploadQueue.length,
                                sliceIndex: t
                            }));
                            this.context._broadcast("stream-progress", i),
                            this.uploadSliceCount--,
                            this.hasCompleteUpload && 0 === this.uploadQueue.length ? this.success(e.xhr) : this.startUploadQueue()
                        }
                    }, {
                        key: "success",
                        value: function(e) {
                            this.isAllSuccess || (e = Ct(this.currentCtx, {
                                type: "success",
                                stage: "process",
                                percent: 100,
                                extra: {
                                    message: "all slice upload success"
                                },
                                crc32Array: this.crc32Array,
                                xhr: e,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st + this.currentCtx.totalDuration
                            }),
                            this.successProcess(e))
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            var t = e.index;
                            e = Ct(this.currentCtx, {
                                extra: {
                                    message: "stream slice upload error"
                                },
                                type: "error",
                                stage: "process",
                                xhr: e.xhr,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st + this.currentCtx.totalDuration,
                                sliceIndex: t
                            }),
                            this.context.logger.send(Ct({}, e)),
                            this.context._broadcast("error", e)
                        }
                    }]),
                    t
                }();
                function Dt(e) {
                    return (Dt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function At() {
                    return (At = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function Et(e, t) {
                    var r, n = Object.keys(e);
                    return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(e),
                    t && (r = r.filter((function(t) {
                        return Object.getOwnPropertyDescriptor(e, t).enumerable
                    }
                    ))),
                    n.push.apply(n, r)),
                    n
                }
                function Ut(e) {
                    for (var t = 1; t < arguments.length; t++) {
                        var r = null != arguments[t] ? arguments[t] : {};
                        t % 2 ? Et(Object(r), !0).forEach((function(t) {
                            !function(e, t, r) {
                                t in e ? Object.defineProperty(e, t, {
                                    value: r,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : e[t] = r
                            }(e, t, r[t])
                        }
                        )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Et(Object(r)).forEach((function(t) {
                            Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t))
                        }
                        ))
                    }
                    return e
                }
                function Bt(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function zt(e, t) {
                    return (zt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function Ft(e) {
                    return (Ft = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var Rt = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && zt(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = Ft(e);
                            return function(e, t) {
                                if (t && ("object" === Dt(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = Ft(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r, n) {
                        var i;
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (i = e.call(this)).options = r,
                        i.config = n,
                        i.uploaderCtx = r.context,
                        i.currFileCtx = r.context.tasks[r.key],
                        i.isImageBatchUpload = !!i.options.isImageBatchUpload,
                        i.transport = new De,
                        i.eventInit(),
                        i
                    }
                    return function(e, t, r) {
                        t && Bt(e.prototype, t),
                        r && Bt(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "commitUpload",
                        value: function() {
                            var e, t, r = this.options.key, n = (r = this.options.context.tasks[r],
                            ne[this.config.region]), i = "", o = {}, s = this.uploaderCtx.useBackupDomain, a = Ue(this.options.type, this.config), c = (a === re && (i = this.config.imageHost || (s ? ae : se)[n],
                            o = {
                                Action: "CommitImageUpload",
                                Version: "2018-08-01",
                                SessionKey: r.SessionKey
                            },
                            this.options.type === Z && (this.config.imageConfig && this.config.imageConfig.serviceId ? o.ServiceId = this.config.imageConfig.serviceId : o.SpaceName = this.config.videoConfig && this.config.videoConfig.spaceName,
                            c = this.config.imageConfig && this.config.imageConfig.processAction,
                            Array.isArray(c) && 0 < c.length && ((e = {
                                SessionKey: r.SessionKey,
                                Functions: []
                            }).Functions = c,
                            t = JSON.stringify(e)),
                            this.config.skipMeta && (o.SkipMeta = !0)),
                            this.options.type === Y && (o.ServiceId = this.config.objectConfig && this.config.objectConfig.serviceId || this.config.imageConfig && this.config.imageConfig.serviceId)),
                            a === te && (c = this.config.videoConfig && this.config.videoConfig.spaceName,
                            this.options.type === Y && this.config.objectConfig && this.config.objectConfig.spaceName && (c = this.config.objectConfig.spaceName),
                            i = this.config.videoHost || (s ? oe : ie)[n],
                            o = {
                                Action: "CommitUploadInner",
                                Version: "2020-11-19",
                                SpaceName: c
                            },
                            e = {
                                SessionKey: r.SessionKey,
                                Functions: []
                            },
                            s = this.config.videoConfig && this.config.videoConfig.processAction,
                            this.options.type === Y && this.config.objectConfig && this.config.objectConfig.processAction && (s = this.config.objectConfig.processAction),
                            Array.isArray(s) && 0 < s.length && (e.Functions = s),
                            (this.config.videoConfig && this.config.videoConfig.callbackArgs || this.options.callbackArgs) && (e.CallbackArgs = this.options.callbackArgs || this.config.videoConfig.callbackArgs),
                            this.options.type === $ && this.config.skipDownload && (o.SkipDownload = !0),
                            t = JSON.stringify(e)),
                            this.config.accountId && (o["X-Account-Id"] = this.config.accountId),
                            de.toQueryString(o)), u = (s = this.currFileCtx.proxyStsToken || this.config.stsToken).AccessKeyID, f = s.AccessKeyId, l = s.SecretAccessKey;
                            s = s.SessionToken,
                            c = {
                                method: "POST",
                                url: "".concat(i, "?").concat(c),
                                timeout: this.config.gatewayTimeout || 3e4,
                                region: n,
                                params: o,
                                headers: {},
                                pathname: de.getPathByURL(i)
                            },
                            e ? (c.custom = t,
                            c.body = e) : (c.custom = "none",
                            c.headers["Content-Type"] = "application/json"),
                            n = new Ae.a(c,a),
                            i = (o = r.systemTimeGap) ? new Date((new Date).getTime() + o) : new Date,
                            n.addAuthorization({
                                accessKeyId: f || u,
                                secretAccessKey: l,
                                sessionToken: s
                            }, i),
                            this.transport.send(c)
                        }
                    }, {
                        key: "start",
                        value: function(e, t, r) {
                            this.successProcess = t,
                            this.failProcess = r,
                            this._st = Date.now();
                            try {
                                this.commitUpload()
                            } catch (e) {
                                this.fail({
                                    error: "catch error: ".concat(e.toString())
                                })
                            }
                        }
                    }, {
                        key: "eventInit",
                        value: function() {
                            var e = this;
                            this.transport.on("complete", (function(t) {
                                try {
                                    var r, n, i, o, s, a, c = JSON.parse(t.response);
                                    c.ResponseMetadata.Error ? e.fail({
                                        xhr: t,
                                        errorCode: c.ResponseMetadata.Error.CodeN,
                                        error: c.ResponseMetadata.Error.Code,
                                        message: c.ResponseMetadata.Error.Message
                                    }) : (r = Ue(e.options.type, e.config),
                                    n = c.Result,
                                    i = {},
                                    r === re ? e.isImageBatchUpload ? (o = n.Results,
                                    s = n.PluginResult || [],
                                    o.forEach((function(e, t) {
                                        o[t] = Ut(Ut({}, o[t]), s[t])
                                    }
                                    )),
                                    i = o) : At(i = n.Results[0], n.PluginResult && n.PluginResult[0]) : i = n.Results[0],
                                    a = At(e.currFileCtx, {
                                        stage: "complete",
                                        type: "success",
                                        percent: 100,
                                        extra: {
                                            message: "upload successful"
                                        },
                                        uploadResult: i,
                                        xhr: t,
                                        stageStartTime: e._st,
                                        stageEndTime: Date.now(),
                                        duration: Date.now() - e._st,
                                        totalDuration: Date.now() - e._st + e.currFileCtx.totalDuration
                                    }),
                                    e.successProcess && e.successProcess(a))
                                } catch (r) {
                                    e.fail({
                                        error: "catch error: ".concat(r.toString()),
                                        xhr: t
                                    })
                                }
                            }
                            )),
                            this.transport.on("error", (function(t) {
                                var r = {
                                    error: "request fail: ".concat(t.statusText || t.errText || "UNKNOWN"),
                                    xhr: t
                                };
                                t.response && (t = JSON.parse(t.response)).ResponseMetadata && t.ResponseMetadata.Error && (r.errorCode = t.ResponseMetadata.Error.CodeN,
                                r.error = t.ResponseMetadata.Error.Code,
                                r.message = t.ResponseMetadata.Error.Message),
                                e.fail(r)
                            }
                            ))
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            var t = this.options.context
                              , r = this.options.key
                              , n = e.xhr
                              , i = e.errorCode || 1005e3
                              , o = "prepare upload error: UNKNOWN";
                            n && (o = 0 === n.status ? "prepare upload error: NETERROR" : e.message || "prepare upload error: ".concat(n.status)),
                            t = At(t.tasks[r], {
                                extra: {
                                    message: o,
                                    error: e.error,
                                    errorCode: i
                                },
                                type: "error",
                                stage: "complete",
                                xhr: n,
                                stageStartTime: this._st,
                                stageEndTime: Date.now(),
                                duration: Date.now() - this._st,
                                totalDuration: Date.now() - this._st + this.currFileCtx.totalDuration
                            }),
                            this.failProcess(t)
                        }
                    }]),
                    t
                }();
                function Mt(e) {
                    return (Mt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function Ht() {
                    return (Ht = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function Nt(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function Lt(e, t) {
                    return (Lt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function qt(e) {
                    return (qt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var Kt = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && Lt(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = qt(e);
                            return function(e, t) {
                                if (t && ("object" === Mt(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, t ? (r = qt(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r) {
                        var n, i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, o = 2 < arguments.length ? arguments[2] : void 0, s = 3 < arguments.length ? arguments[3] : void 0;
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (n = e.call(this, r)).tasks = r,
                        n.config = i,
                        n.key = s,
                        n.uploaderCtx = o,
                        n.current = 0,
                        n.length = n.tasks.length,
                        n.taskError = {},
                        n.uploadList = [],
                        n.retryTaskTime = i.retryTaskTime || 2,
                        n
                    }
                    return function(e, t, r) {
                        t && Nt(e.prototype, t),
                        r && Nt(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "start",
                        value: function() {
                            var e = this.tasks.shift();
                            e && (this.current = e.index,
                            this.execTask(e))
                        }
                    }, {
                        key: "execTask",
                        value: function(e) {
                            var t, r, n = this, i = e.key, o = this.uploaderCtx, s = o.tasks[i];
                            s && (t = s.cacheTask,
                            r = o.taskList[i].length,
                            t && 0 < e.index && e.index < t ? this.start() : (s.currentTask = e.index,
                            1 === s.status && e && e.func.call(e.context, e.arg, (function(t) {
                                var s;
                                o.taskList[i] && ((s = o.taskList[i][e.index + 1]) && 0 !== e.index ? o._saveTask(i, {
                                    currentTask: s.index,
                                    stage: s.stage
                                }) : e.index === r - 1 && o._removeTaskCache(i),
                                0 < n.tasks.length ? n.start() : o._queueSuccess(i),
                                n.success(t))
                            }
                            ), (function(t) {
                                var r;
                                t.xhr && 400 <= t.xhr.status ? n.fail(t) : !n.taskError[i] || n.taskError[i] < n.retryTaskTime ? (n.taskError[i] ? n.taskError[i]++ : n.taskError[i] = 1,
                                r = n.errorFormat(t, !0),
                                n.uploaderCtx.logger.send(r),
                                n.execTask(e)) : (t.key = i,
                                n.fail(t))
                            }
                            ))))
                        }
                    }, {
                        key: "addTask",
                        value: function(e) {
                            this.tasks.push(e)
                        }
                    }, {
                        key: "success",
                        value: function(e) {
                            var t;
                            e.xhr && (t = e.xhr,
                            e.req = {
                                url: t.currentUrl,
                                param: t.params
                            },
                            e.res = {
                                status: t.status,
                                header: t.getAllResponseHeaders(),
                                body: t.responseText
                            },
                            delete e.xhr),
                            Ht(e, {
                                type: "success"
                            });
                            try {
                                this.uploaderCtx._broadcast(e.stage, e)
                            } catch (e) {}
                            this.uploaderCtx.logger.send(e)
                        }
                    }, {
                        key: "fail",
                        value: function(e) {
                            var t = this.uploaderCtx
                              , r = e.key;
                            e = this.errorFormat(e);
                            try {
                                t._broadcast("error", e)
                            } catch (e) {}
                            t.tasks[r].isBreak ? t._cancel(r) : t._pause(r),
                            t.logger.send(e)
                        }
                    }, {
                        key: "cancel",
                        value: function(e) {
                            var t, r;
                            e || (e = this.key,
                            t = this.uploaderCtx.tasks[e].currentTask,
                            this.uploaderCtx.taskList[e].forEach((function(e) {
                                t === e.index && (r = e)
                            }
                            )),
                            this.tasks = [],
                            r && 3 === r.index && r.context.stop(),
                            this.uploaderCtx._removeTaskCache(e))
                        }
                    }, {
                        key: "restart",
                        value: function() {
                            this.uploadList.forEach((function(e) {
                                e.cancel = !1
                            }
                            )),
                            this.start()
                        }
                    }, {
                        key: "errorFormat",
                        value: function(e, t) {
                            var r;
                            return t = {
                                type: t ? "retry" : "error"
                            },
                            e.xhr && (r = e.xhr,
                            e.req = {
                                url: r.currentUrl,
                                param: r.params
                            },
                            e.res = {
                                status: r.status,
                                header: r.getAllResponseHeaders(),
                                body: r.responseText
                            },
                            e.extra && (e.extra.req = e.req,
                            e.extra.res = e.res),
                            delete e.xhr),
                            Ht(e, t)
                        }
                    }]),
                    t
                }();
                function Wt(e) {
                    return (Wt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function Vt() {
                    return (Vt = Object.assign ? Object.assign.bind() : function(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r, n = arguments[t];
                            for (r in n)
                                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                        }
                        return e
                    }
                    ).apply(this, arguments)
                }
                function Jt(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function Gt(e, t) {
                    return (Gt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function Qt(e) {
                    if (void 0 === e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return e
                }
                function Xt(e) {
                    return (Xt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var $t = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && Gt(e, t)
                    }(t, n.a);
                    var e = function(e) {
                        var t = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var r, n = Xt(e);
                            return function(e, t) {
                                if (t && ("object" === Wt(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return Qt(e)
                            }(this, t ? (r = Xt(this).constructor,
                            Reflect.construct(n, arguments, r)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t(r) {
                        var n;
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        (n = e.call(this, r)).config = Vt({}, i),
                        n._mergeOptions(n.config, r),
                        n.tasks = {},
                        n.taskList = {},
                        n.cache = {},
                        n.storage = de.storage(Qt(n)),
                        n.logger = n.config.noLog ? {
                            send: function() {}
                        } : new fe(n.config,Qt(n)),
                        n
                    }
                    return function(e, t, r) {
                        t && Jt(e.prototype, t),
                        r && Jt(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "_mergeOptions",
                        value: function(e, t) {
                            t && "object" === Wt(t) && (Vt(e, t),
                            Object.keys(t).forEach((function(r) {
                                "vodDomain" === r && (e.replace[r] = t[r])
                            }
                            )))
                        }
                    }, {
                        key: "_setCache",
                        value: function(e, t) {
                            this.storage.setItem(e, t)
                        }
                    }, {
                        key: "_getCache",
                        value: function(e) {
                            return this.storage.getItem(e)
                        }
                    }, {
                        key: "_removeCache",
                        value: function(e) {
                            e ? this.storage.removeItem(e) : this.storage.clear()
                        }
                    }, {
                        key: "_addTask",
                        value: function(e, t) {
                            var r = this.tasks
                              , n = this.taskList;
                            r[e] && r[e].task ? n[e].push(t) : (n[e] = [],
                            n[e].push(t),
                            r[e] = r[e] || {},
                            r[e].task = new Kt([],this.config,this,e)),
                            r[e].task.addTask(t)
                        }
                    }, {
                        key: "_broadcast",
                        value: function(e, t) {
                            var r = this.tasks[t.key].status;
                            if (1 === r || 0 === r)
                                try {
                                    this.emit(e, t)
                                } catch (e) {
                                    if (!(r = !("[object Error]" !== Object.prototype.toString.call(e))) || "Error" === e.name)
                                        throw e
                                }
                        }
                    }, {
                        key: "_addCrc32ProcessTask",
                        value: function(e, t) {
                            var r = (n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}).isDirect
                              , n = n.isImageBatchUpload;
                            r = {
                                context: e = new Ce({
                                    file: e.file,
                                    context: this,
                                    key: t,
                                    isDirect: r,
                                    isImageBatchUpload: void 0 !== n && n
                                },this.config),
                                func: e.start,
                                arg: {},
                                key: t,
                                index: 0,
                                stage: "crc32"
                            },
                            this._addTask(t, r)
                        }
                    }, {
                        key: "_addPreUploadTask",
                        value: function(e, t) {
                            var r = (n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}).isDirect
                              , n = n.isImageBatchUpload;
                            r = {
                                file: e.file,
                                stsToken: e.stsToken,
                                context: this,
                                type: e.type || $,
                                preUploadUriParams: e.preUploadUriParams || {},
                                storeKey: e.storeKey,
                                key: t,
                                isDirect: r,
                                isImageBatchUpload: void 0 !== n && n,
                                fileSize: e.fileSize || null
                            },
                            e = {
                                context: n = new Le(r,this.config),
                                func: n.start,
                                arg: {},
                                key: t,
                                index: 1,
                                stage: "preUpload"
                            },
                            this._addTask(t, e)
                        }
                    }, {
                        key: "_addDirectUploadTask",
                        value: function(e, t) {
                            var r = (2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}).isImageBatchUpload;
                            r = {
                                context: e = new xt({
                                    file: e.file,
                                    context: this,
                                    key: t,
                                    isImageBatchUpload: void 0 !== r && r
                                },this.config),
                                func: e.start,
                                arg: {},
                                key: t,
                                index: 3,
                                stage: "process"
                            },
                            this._addTask(t, r)
                        }
                    }, {
                        key: "_addInitUploadIDTask",
                        value: function(e, t) {
                            e = {
                                context: e = new Xe({
                                    file: e.file,
                                    context: this,
                                    key: t
                                },this.config),
                                func: e.start,
                                arg: {},
                                key: t,
                                index: 2,
                                stage: "initUploadID"
                            },
                            this._addTask(t, e)
                        }
                    }, {
                        key: "_addUploadProcessTask",
                        value: function(e, t) {
                            e = {
                                context: e = new lt({
                                    file: e.file,
                                    context: this,
                                    key: t
                                },this.config),
                                func: e.start,
                                arg: {},
                                key: t,
                                index: 3,
                                stage: "process"
                            },
                            this._addTask(t, e)
                        }
                    }, {
                        key: "_addStreamUploadTask",
                        value: function(e, t) {
                            this.streamUploadTask = new Pt({
                                context: this,
                                key: t
                            },this.config);
                            var r = {
                                context: this.streamUploadTask,
                                func: this.streamUploadTask.start,
                                arg: {},
                                key: t,
                                index: 3,
                                stage: "process"
                            };
                            this._addTask(t, r)
                        }
                    }, {
                        key: "_mergeFileTask",
                        value: function(e, t) {
                            e = {
                                context: e = new vt({
                                    file: e.file,
                                    context: this,
                                    stage: "fileMerge",
                                    key: t
                                },this.config),
                                func: e.start,
                                arg: {},
                                key: t,
                                index: 4,
                                stage: "fileMerge"
                            },
                            this._addTask(t, e)
                        }
                    }, {
                        key: "_getMetaInfoTask",
                        value: function(e, t) {
                            var r = (2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}).isImageBatchUpload;
                            e = {
                                file: e.file,
                                context: this,
                                data: e.data,
                                type: e.type || $,
                                callbackArgs: e.callbackArgs,
                                key: t,
                                isImageBatchUpload: void 0 !== r && r
                            },
                            e = {
                                context: r = new Rt(e,this.config),
                                func: r.start,
                                arg: {},
                                key: t,
                                index: 5,
                                stage: "complete"
                            },
                            this._addTask(t, e)
                        }
                    }, {
                        key: "_addAllUploadProcess",
                        value: function(e, t) {
                            var r = e.type === Z && "[object Array]" === Object.prototype.toString.call(e.file)
                              , n = (this.tasks[t] = this.tasks[t] || {},
                            this.tasks[t].fileType = e.type || $,
                            this.tasks[t].fileSize = e.file && e.file.size,
                            this.tasks[t].proxyStsToken = e.stsToken,
                            e.file.size <= de.getFileSliceLength(e.file) || r);
                            this._addCrc32ProcessTask(e, t, {
                                isDirect: n,
                                isImageBatchUpload: r
                            }),
                            this._addPreUploadTask(e, t, {
                                isDirect: n,
                                isImageBatchUpload: r
                            }),
                            n ? this._addDirectUploadTask(e, t, {
                                isImageBatchUpload: r
                            }) : (this._addInitUploadIDTask(e, t),
                            this._addUploadProcessTask(e, t),
                            this._mergeFileTask(e, t)),
                            this._getMetaInfoTask(e, t, {
                                isImageBatchUpload: r
                            })
                        }
                    }, {
                        key: "_addAllUploadProcessClientEncrypt",
                        value: function(e) {
                            var t, r = this;
                            return e.type === Z && Array.isArray(e.file) ? (t = [],
                            e.file.forEach((function(n) {
                                t.push(r._createClientEncryptTask({
                                    stsToken: e.stsToken,
                                    type: e.type,
                                    file: n
                                }))
                            }
                            )),
                            t) : this._createClientEncryptTask(e)
                        }
                    }, {
                        key: "_createClientEncryptTask",
                        value: function(e) {
                            var t = de.getUnique("file");
                            return this.tasks[t] = this.tasks[t] || {},
                            this.tasks[t].fileType = e.type || $,
                            this.tasks[t].fileSize = e.file && e.file.size,
                            this.tasks[t].proxyStsToken = e.stsToken,
                            this.tasks[t].clientEncryptKey = de.generateKey(16),
                            this._addCrc32ProcessTask(e, t, {
                                isDirect: !1,
                                isImageBatchUpload: !1
                            }),
                            this._addPreUploadTask(e, t, {
                                isDirect: !1,
                                isImageBatchUpload: !1
                            }),
                            this._addInitUploadIDTask(e, t),
                            this._addUploadProcessTask(e, t),
                            this._mergeFileTask(e, t),
                            this._getMetaInfoTask(e, t, {
                                isImageBatchUpload: !1
                            }),
                            t
                        }
                    }, {
                        key: "_addAllStreamUploadProcess",
                        value: function(e, t) {
                            this.tasks[t] = this.tasks[t] || {},
                            this.tasks[t].fileType = e.type || $,
                            this.tasks[t].proxyStsToken = e.stsToken,
                            this._addPreUploadTask(e, t),
                            this._addStreamUploadTask(e, t),
                            this._mergeFileTask(e, t),
                            this._getMetaInfoTask(e, t)
                        }
                    }, {
                        key: "_addStreamSlice",
                        value: function(e) {
                            var t = e.fileSlice;
                            e = e.index,
                            this.streamUploadTask.addStreamSlice({
                                fileSlice: t,
                                index: e
                            })
                        }
                    }, {
                        key: "_completeStreamUpload",
                        value: function() {
                            this.streamUploadTask.completeStreamUpload()
                        }
                    }, {
                        key: "_run",
                        value: function(e) {
                            var t = this.tasks
                              , r = navigator.userAgent.toLowerCase().match(/msie ([\d.]+)/);
                            if (r && r[1] && Number(r[1]) <= 9)
                                return this._broadcast("error", Vt(t[e], {
                                    key: e,
                                    status: 0,
                                    stage: "browserError",
                                    extra: {
                                        message: "cannot support the browser below ie10"
                                    },
                                    type: "error"
                                })),
                                this.logger.send(t[e]),
                                void this._cancel(e);
                            t[e] && (3 === t[e].status ? this._restart(e) : (r = new Date,
                            t[e].startTime = r.getTime(),
                            t[e].task && 1 !== t[e].status && t[e].task.tasks.length && (t[e].status = 1,
                            this.logger.send(Vt({}, t[e], {
                                extra: {
                                    message: "start upload"
                                },
                                type: "start",
                                key: e
                            })),
                            t[e].task.start())))
                        }
                    }, {
                        key: "_restart",
                        value: function(e) {
                            var t, r, n = this, i = this.tasks;
                            i[e] && (t = i[e].task,
                            r = i[e].currentTask || 0,
                            this.taskList[e].forEach((function(i, o) {
                                i.index === r && (t.tasks = n.taskList[e].slice(o))
                            }
                            )),
                            t && 1 !== i[e].status && t.tasks.length && (i[e].status = 1,
                            t.restart()))
                        }
                    }, {
                        key: "_cancel",
                        value: function(e) {
                            var t = this.tasks;
                            t[e] && (t[e].status = 2,
                            t[e].task.cancel(),
                            delete this.taskList[e])
                        }
                    }, {
                        key: "_pause",
                        value: function(e) {
                            var t = this.tasks;
                            t[e] && (t[e].status = 3,
                            t[e].task.cancel(!0),
                            this._saveTask(e))
                        }
                    }, {
                        key: "_removeTaskCache",
                        value: function(e) {
                            var t = this.tasks;
                            t[e] && (t = t[e].crc32Key) && this._removeCache(t)
                        }
                    }, {
                        key: "_saveTask",
                        value: function(e, t) {
                            (t = (e = Vt({}, this.tasks[e], t || {})).crc32Key) && (delete e.task,
                            delete e.xhr,
                            delete e.crc32Array,
                            this._setCache(t, JSON.stringify(e)))
                        }
                    }, {
                        key: "_queueSuccess",
                        value: function(e) {
                            var t, r = this.tasks;
                            r[e] && (t = new Date,
                            r[e].endTime = t.getTime(),
                            r[e].time = r[e].endTime - r[e].startTime,
                            r[e].status = 0,
                            this.taskList[e] = [])
                        }
                    }, {
                        key: "_removeFile",
                        value: function(e) {
                            delete this.tasks[e]
                        }
                    }, {
                        key: "_batchAction",
                        value: function(e) {
                            var t = this.tasks;
                            Object.keys(t).forEach((function(t) {
                                e && e(t)
                            }
                            ))
                        }
                    }, {
                        key: "_refreshSTSToken",
                        value: function(e) {
                            var t = this
                              , r = this.tasks;
                            Object.keys(r).forEach((function(n) {
                                var i = Vt({}, n = r[n], {
                                    proxyStsToken: e
                                })
                                  , o = (n.proxyStsToken = e,
                                i.crc32Key);
                                o && (delete i.task,
                                delete i.xhr,
                                delete i.crc32Array,
                                n.proxyStsToken = e,
                                t._setCache(o, JSON.stringify(i)))
                            }
                            ))
                        }
                    }, {
                        key: "_setOption",
                        value: function(e) {
                            this._mergeOptions(this.config, e)
                        }
                    }, {
                        key: "_getOption",
                        value: function(e) {
                            var t = Vt({}, this.config);
                            return Object.keys(t).forEach((function(e) {
                                (-1 < e.indexOf("Url") || "replace" === e || "log" === e) && delete t[e]
                            }
                            )),
                            e ? t[e] : t
                        }
                    }, {
                        key: "_userCancel",
                        value: function(e) {
                            var t = this
                              , r = this.tasks;
                            e ? (this._cancel(e),
                            this.logger.send(Vt({}, r[e], {
                                type: "cancel"
                            })),
                            delete this.tasks[e]) : Object.keys(r).forEach((function(e) {
                                t._cancel(e),
                                t.logger.send(Vt({}, r[e], {
                                    type: "cancel"
                                })),
                                delete t.tasks[e]
                            }
                            ))
                        }
                    }, {
                        key: "_userPause",
                        value: function(e) {
                            var t = this
                              , r = this.tasks;
                            e ? (this._pause(e),
                            this.logger.send(Vt({}, r[e], {
                                type: "pause"
                            }))) : Object.keys(r).forEach((function(e) {
                                t._pause(e),
                                t.logger.send(Vt({}, r[e], {
                                    type: "pause"
                                }))
                            }
                            ))
                        }
                    }]),
                    t
                }();
                function Zt(e) {
                    return (Zt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function Yt(e, t) {
                    for (var r = 0; r < t.length; r++) {
                        var n = t[r];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                function er(e, t) {
                    return (er = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                        return e.__proto__ = t,
                        e
                    }
                    )(e, t)
                }
                function tr(e) {
                    return (tr = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                        return e.__proto__ || Object.getPrototypeOf(e)
                    }
                    )(e)
                }
                var rr = function() {
                    !function(e, t) {
                        if ("function" != typeof t && null !== t)
                            throw new TypeError("Super expression must either be null or a function");
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                writable: !0,
                                configurable: !0
                            }
                        }),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        }),
                        t && er(e, t)
                    }(t, $t);
                    var e = function(t) {
                        var r = function() {
                            if ("undefined" == typeof Reflect || !Reflect.construct)
                                return !1;
                            if (Reflect.construct.sham)
                                return !1;
                            if ("function" == typeof Proxy)
                                return !0;
                            try {
                                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                                ))),
                                !0
                            } catch (e) {
                                return !1
                            }
                        }();
                        return function() {
                            var e, n = tr(t);
                            return function(e, t) {
                                if (t && ("object" === Zt(t) || "function" == typeof t))
                                    return t;
                                if (void 0 !== t)
                                    throw new TypeError("Derived constructors may only return object or undefined");
                                return function(e) {
                                    if (void 0 !== e)
                                        return e;
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
                                }(e)
                            }(this, r ? (e = tr(this).constructor,
                            Reflect.construct(n, arguments, e)) : n.apply(this, arguments))
                        }
                    }(t);
                    function t() {
                        return function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, t),
                        e.apply(this, arguments)
                    }
                    return function(e, t, r) {
                        t && Yt(e.prototype, t),
                        r && Yt(e, r),
                        Object.defineProperty(e, "prototype", {
                            writable: !1
                        })
                    }(t, [{
                        key: "start",
                        value: function(e) {
                            this.abort = !1,
                            e ? this._run(e) : this._batchAction(this._run.bind(this))
                        }
                    }, {
                        key: "addFile",
                        value: function(e) {
                            return e && Ee(e.stsToken) ? e.file && this.config.clientEncrypt ? this._addAllUploadProcessClientEncrypt(e) : e.file ? (t = de.getUnique("file"),
                            this._addAllUploadProcess(e, t),
                            t) : null : (this.emit("error", {
                                extra: {
                                    message: ke,
                                    errorCode: be
                                }
                            }),
                            null);
                            var t
                        }
                    }, {
                        key: "addImageFile",
                        value: function(e) {
                            return e && Ee(e.stsToken) ? e.file ? (e.type = e.type || Z,
                            t = de.getUnique("file"),
                            this._addAllUploadProcess(e, t),
                            t) : null : (this.emit("error", {
                                extra: {
                                    message: ke,
                                    errorCode: be
                                }
                            }),
                            null);
                            var t
                        }
                    }, {
                        key: "addStreamUploadTask",
                        value: function(e) {
                            if (!e || !Ee(e.stsToken))
                                return this.emit("error", {
                                    extra: {
                                        message: ke,
                                        errorCode: be
                                    }
                                }),
                                null;
                            var t = de.getUnique("file");
                            return this._addAllStreamUploadProcess(e, t),
                            t
                        }
                    }, {
                        key: "addStreamSlice",
                        value: function(e) {
                            var t = e.fileSlice;
                            e = e.index,
                            this._addStreamSlice({
                                fileSlice: t,
                                index: e
                            })
                        }
                    }, {
                        key: "completeStreamUpload",
                        value: function() {
                            this._completeStreamUpload()
                        }
                    }, {
                        key: "removeFile",
                        value: function(e) {
                            e && this._removeFile(e)
                        }
                    }, {
                        key: "cancel",
                        value: function(e) {
                            e ? this._userCancel(e) : this._batchAction(this._userCancel.bind(this))
                        }
                    }, {
                        key: "pause",
                        value: function(e) {
                            this._userPause(e)
                        }
                    }, {
                        key: "restart",
                        value: function(e) {
                            e ? this._restart(e) : this._batchAction(this._restart.bind(this))
                        }
                    }, {
                        key: "refreshSTSToken",
                        value: function(e) {
                            this._refreshSTSToken(e)
                        }
                    }, {
                        key: "setOption",
                        value: function(e) {
                            this._setOption(e)
                        }
                    }, {
                        key: "getOption",
                        value: function(e) {
                            return this._getOption(e)
                        }
                    }]),
                    t
                }()
            }
            ]).default
        }
        ,
        e.exports = t()
    }
}]);